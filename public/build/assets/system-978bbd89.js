import{V as g,C as b,n as o,a as h,d as c,s as C,q as u,D as y,h as m,_ as k,b as w,E as f,c as l,X as x,e as $,f as D}from"./vue-clipboard-c57fd805.js";const P={components:{ckeditor:g.component},data(){return{loading_submit:!1,resource:"users",errors:{},editors:{classic:b},editorConfig:{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","undo","redo"]},form:{phone:null,whatsapp_number:null,address_contact:null,enable_whatsapp:!0,introduction:""}}},created(){this.initForm(),this.$http.get(`/${this.resource}/record`).then(s=>{s.data!==""&&(this.form=Object.assign({phone:null,whatsapp_number:null,address_contact:null,enable_whatsapp:!0,introduction:""},s.data.data||{}))})},methods:{initForm(){this.errors={},this.form={phone:null,whatsapp_number:null,address_contact:null,enable_whatsapp:!0,introduction:""}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).finally(()=>{this.loading_submit=!1})}}};var S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.phone}},[e("label",{staticClass:"control-label"},[t._v("Teléfono")]),e("el-input",{model:{value:t.form.phone,callback:function(a){t.$set(t.form,"phone",a)},expression:"form.phone"}}),e("small",{staticClass:"form-control-feedback text-muted"},[t._v("Agregar código de país, ejemplo; 51955955955")]),t.errors.phone?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.phone[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.whatsapp_number}},[e("label",{staticClass:"control-label"},[t._v("Número de WhatsApp")]),e("el-input",{model:{value:t.form.whatsapp_number,callback:function(a){t.$set(t.form,"whatsapp_number",a)},expression:"form.whatsapp_number"}}),e("small",{staticClass:"form-control-feedback text-muted"},[t._v("Agregar código de país, ejemplo; 51955955955")]),t.errors.whatsapp_number?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.whatsapp_number[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.address_contact}},[e("label",{staticClass:"control-label"},[t._v("Correo Electrónico")]),e("el-input",{attrs:{type:"email"},model:{value:t.form.address_contact,callback:function(a){t.$set(t.form,"address_contact",a)},expression:"form.address_contact"}}),e("small",{staticClass:"form-control-feedback text-muted"},[t._v("Ejemplo: soporte@miempresa.com")]),t.errors.address_contact?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.address_contact[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6 mt-3"},[e("label",[t._v("Mostrar botón flotante de WhatsApp")]),e("div",{class:{"has-danger":t.errors.enable_whatsapp}},[e("el-switch",{attrs:{"active-text":"Si","inactive-text":"No"},model:{value:t.form.enable_whatsapp,callback:function(a){t.$set(t.form,"enable_whatsapp",a)},expression:"form.enable_whatsapp"}}),t.errors.enable_whatsapp?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.enable_whatsapp[0])}}):t._e(),e("br"),e("small",{staticClass:"form-control-feedback"},[t._v("Se mostrará el botón de Whatsapp en la parte inferior derecha en el sistema del cliente.")])],1)]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.introduction}},[e("label",{staticClass:"control-label d-block"},[t._v("Mensaje de introducción")]),e("ckeditor",{attrs:{editors:t.editors,type:"classic",config:t.editorConfig},model:{value:t.form.introduction,callback:function(a){t.$set(t.form,"introduction",a)},expression:"form.introduction"}}),e("small",{staticClass:"form-control-feedback"},[t._v("Agrega detalles sobre el soporte. Puede indicar algún mensaje corto sobre como es la atención o el horario o forma de comunicarse con soporte.")]),t.errors.introduction?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.introduction[0])}}):t._e()],1)])])]),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])},F=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Configuración de Soporte")])])}],M=o(P,S,F,!1,null,null,null,null);const I=M.exports,E={props:["configuration"],created(){this.initForm()},data(){return{form:{qr_api_url:null,qr_api_token:null},resource:"configurations",loading_submit:!1}},methods:{initForm(){this.configuration&&(this.form.qr_api_url=this.configuration.qr_api_url,this.form.qr_api_token=this.configuration.qr_api_token)},async submit(){this.loading_submit=!0;try{await this.$http.post(`${this.resource}/qrapi`,this.form),this.$message({message:"Configuración guardada",type:"success"})}catch{this.$message({message:"Error al guardar la configuración",type:"error"})}finally{this.loading_submit=!1}}}};var A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("form",{staticClass:"row card-body px-0",attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("URL de Cliente")]),e("el-input",{model:{value:t.form.qr_api_url,callback:function(a){t.$set(t.form,"qr_api_url",a)},expression:"form.qr_api_url"}})],1)]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Api Key")]),e("el-input",{model:{value:t.form.qr_api_token,callback:function(a){t.$set(t.form,"qr_api_token",a)},expression:"form.qr_api_token"}})],1)]),e("div",{staticClass:"col-md-12 text-right pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])},L=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Configuración de QR Api")])])}],R=o(E,A,L,!1,null,null,null,null);const T=R.exports,B={methods:{change(s){return new Promise(t=>{this.$confirm("¿Desea cambiar la clave?","Cambiar clave",{confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",type:"warning"}).then(()=>{this.$http.post(s).then(e=>{e.data.success&&(this.$message.success("Se cambió correctamente la clave"),t())}).catch(e=>{e.response.status===500?this.$message.error("Error al intentar cambiar"):console.log(e.response.data.message)})}).catch(e=>{console.log(e)})})}}};const U={props:["data"],data(){return{chart:null,observer:null,_themeChangeHandler:null,isReady:!1}},mounted(){this.$nextTick(()=>{setTimeout(()=>{this.setupThemeObserver(),this.createChart(),this.isReady=!0},100)})},beforeDestroy(){this.teardownThemeObserver(),this.chart&&this.chart.destroy()},watch:{data:{handler(){this.isReady&&this.data&&this.data.datasets&&this.data.datasets.length>0&&this.$nextTick(()=>{this.createChart()})},deep:!0}},methods:{getCSSVariable(s){return getComputedStyle(document.documentElement).getPropertyValue(s).trim()},setupThemeObserver(){this.teardownThemeObserver();const s=()=>{this.handleThemeChange()};document.addEventListener("themeChanged",s),window.addEventListener("theme:change",s),this._themeChangeHandler=s,this.observer=new MutationObserver(()=>{this.handleThemeChange()}),this.observer.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]});const t=document.getElementById("theme-styles");t&&this.observer.observe(t,{childList:!0,subtree:!0,characterData:!0})},teardownThemeObserver(){this.observer&&(this.observer.disconnect(),this.observer=null),this._themeChangeHandler&&(document.removeEventListener("themeChanged",this._themeChangeHandler),window.removeEventListener("theme:change",this._themeChangeHandler),this._themeChangeHandler=null)},handleThemeChange(){console.log("Cambio de tema detectado en Line.vue"),this.isReady&&setTimeout(()=>{this.data&&this.data.datasets&&this.data.datasets.length&&this.createChart()},50)},hexToRgba(s,t){if(s.length===7){const e=parseInt(s.slice(1,3),16),a=parseInt(s.slice(3,5),16),i=parseInt(s.slice(5,7),16);return`rgba(${e}, ${a}, ${i}, ${t})`}else if(s.length===4){const e=parseInt(s.slice(1,2).repeat(2),16),a=parseInt(s.slice(2,3).repeat(2),16),i=parseInt(s.slice(3,4).repeat(2),16);return`rgba(${e}, ${a}, ${i}, ${t})`}return s},createChart(){if(!this.data||!this.data.datasets||this.data.datasets.length===0){console.warn("No hay datos disponibles para el gráfico");return}if(!this.data.labels||this.data.labels.length===0){console.warn("No hay etiquetas disponibles para el gráfico");return}if(!this.data.datasets[0].data||this.data.datasets[0].data.length===0){console.warn("No hay datos en el dataset");return}this.chart&&this.chart.destroy();const s=this.$refs.canvas.getContext("2d"),t={primary:this.getCSSVariable("--primary-color")||"#2b5bfb",highlight:this.getCSSVariable("--highlight-color")||"#7575e5",dark:this.getCSSVariable("--dark-color")||"#273747"};console.log("Creando gráfico con colores:",t);const e=s.createLinearGradient(0,0,0,s.canvas.height);e.addColorStop(0,this.hexToRgba(t.primary,.3)),e.addColorStop(.5,this.hexToRgba(t.highlight,.2)),e.addColorStop(1,this.hexToRgba(t.primary,.05));const a=this.data.datasets.map(i=>({...i,borderColor:t.primary,backgroundColor:e,borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:t.primary,pointBorderColor:t.primary,pointRadius:4,pointHoverRadius:6,pointHoverBackgroundColor:t.primary,pointHoverBorderColor:t.primary}));this.chart=new h(s,{type:"line",data:{labels:this.data.labels,datasets:a},options:{legend:{display:!1},responsive:!0,maintainAspectRatio:!1,elements:{line:{borderJoinStyle:"round",borderWidth:3}},scales:{yAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{beginAtZero:!0,fontColor:t.dark,fontSize:12}}],xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{fontColor:t.dark,fontSize:12}}]},plugins:{tooltip:{mode:"index",intersect:!1,displayColors:!0}}}})}}};var q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-line-container"},[e("canvas",{ref:"canvas"})])},N=[],z=o(U,q,N,!1,null,null,null,null);const O=z.exports,j={props:["showDialog","clientId"],mixins:[c],data(){return{title:null,recordId:null,resource:"client_payments",records:[],payment_method_types:[],card_brands:[],showAddButton:!0,has_card:!1,client:{}}},async created(){await this.initForm(),await this.$http.get(`/${this.resource}/tables`).then(s=>{this.payment_method_types=s.data.payment_method_types,this.card_brands=s.data.card_brands})},methods:{changePaymentMethodType(s){let t=_.find(this.payment_method_types,{id:s.payment_method_type_id});this.has_card=!!t.has_card},initForm(){this.records=[],this.showAddButton=!0},async getData(){this.initForm(),await this.$http.get(`/${this.resource}/client/${this.clientId}`).then(s=>{this.client=s.data,this.title="Programación de pagos del cliente: "+this.client.name}),await this.$http.get(`/${this.resource}/records/${this.clientId}`).then(s=>{this.records=s.data.data})},async clickCancelPayment(s){await this.$http.get(`/${this.resource}/cancel_payment/${s}`).then(t=>{t.data.success?(this.$message.success(t.data.message),this.getData()):this.$message.error(t.data.message)})},clickAddRow(){this.records.push({id:null,date_of_payment:moment().format("YYYY-MM-DD"),payment_method_type_id:null,card_brand_id:null,reference:null,reference:null,payment:this.client.pricing,errors:{},loading:!1}),this.showAddButton=!1},clickCancel(s){this.records.splice(s,1),this.showAddButton=!0},clickSubmit(s){if(this.has_card&&this.records[s].card_brand_id==null){this.$message.error("Elija una tarjeta.");return}let t={id:this.records[s].id,client_id:this.clientId,date_of_payment:this.records[s].date_of_payment,payment_method_type_id:this.records[s].payment_method_type_id,card_brand_id:this.records[s].card_brand_id,reference:this.records[s].reference,payment:this.records[s].payment};this.$http.post(`/${this.resource}`,t).then(e=>{e.data.success?(this.$message.success(e.data.message),this.getData(),this.showAddButton=!0):this.$message.error(e.data.message)}).catch(e=>{e.response.status===422?this.records[s].errors=e.response.data:console.log(e)})},close(){this.$emit("update:showDialog",!1)},clickDelete(s){this.destroy(`/${this.resource}/${s}`).then(()=>this.getData())}}};var H=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"70%",title:t.title,visible:t.showDialog},on:{close:t.close,open:t.getData}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[t.records.length>0?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[t._v("Fecha de pago")]),e("th",[t._v("Método de pago")]),e("th",[t._v("Tarjeta")]),e("th",[t._v("Referencia")]),e("th",[t._v("Monto")]),e("th",[t._v("Pagar")]),e("th")])]),e("tbody",t._l(t.records,function(a,i){return e("tr",[a.id?[e("td",[t._v(t._s(a.date_of_payment))]),e("td",[t._v(t._s(a.payment_method_type_description))]),a.card_brand?e("td",[t._v(t._s(a.card_brand.description))]):e("td",[t._v("-")]),e("td",[t._v(t._s(a.reference))]),e("td",[t._v("S/ "+t._s(a.payment))]),e("td",[a.state?[t._v(" Pagado ")]:[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-primary",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickCancelPayment(a.id)}}},[t._v(" Pagar ")])]],2),e("td",{staticClass:"series-table-actions text-right"},[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-danger",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickDelete(a.id)}}},[t._v("Eliminar")])])]:[e("td",[e("div",{staticClass:"form-group mb-0",class:{"has-danger":a.errors.date_of_payment}},[e("el-date-picker",{attrs:{type:"date",clearable:!1,format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:a.date_of_payment,callback:function(r){t.$set(a,"date_of_payment",r)},expression:"row.date_of_payment"}}),a.errors.date_of_payment?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(a.errors.date_of_payment[0])}}):t._e()],1)]),e("td",[e("div",{staticClass:"form-group mb-0",class:{"has-danger":a.errors.payment_method_type_id}},[e("el-select",{on:{change:function(r){return t.changePaymentMethodType(a)}},model:{value:a.payment_method_type_id,callback:function(r){t.$set(a,"payment_method_type_id",r)},expression:"row.payment_method_type_id"}},t._l(t.payment_method_types,function(r){return e("el-option",{key:r.id,attrs:{value:r.id,label:r.description}})}),1),a.errors.payment_method_type_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(a.errors.payment_method_type_id[0])}}):t._e()],1)]),t.has_card?e("td",[e("div",{staticClass:"form-group mb-0",class:{"has-danger":a.errors.card_brand_id}},[e("el-select",{model:{value:a.card_brand_id,callback:function(r){t.$set(a,"card_brand_id",r)},expression:"row.card_brand_id"}},t._l(t.card_brands,function(r){return e("el-option",{key:r.id,attrs:{value:r.id,label:r.description}})}),1),a.errors.card_brand_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(a.errors.card_brand_id[0])}}):t._e()],1)]):e("td"),e("td",[e("div",{staticClass:"form-group mb-0",class:{"has-danger":a.errors.reference}},[e("el-input",{model:{value:a.reference,callback:function(r){t.$set(a,"reference",r)},expression:"row.reference"}}),a.errors.reference?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(a.errors.reference[0])}}):t._e()],1)]),e("td",[e("div",{staticClass:"form-group mb-0",class:{"has-danger":a.errors.payment}},[e("el-input",{model:{value:a.payment,callback:function(r){t.$set(a,"payment",r)},expression:"row.payment"}},[e("template",{slot:"prepend"},[t._v("S/ ")])],2),a.errors.payment?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(a.errors.payment[0])}}):t._e()],1)]),e("td",[t._v(" - ")]),e("td",{staticClass:"series-table-actions text-right"},[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-info",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickSubmit(i)}}},[e("i",{staticClass:"fa fa-check"})]),e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-danger",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickCancel(i)}}},[e("i",{staticClass:"fa fa-trash"})])])]],2)}),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("TOTAL PAGADO")]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(t.client.total_paid))]),e("td")]),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("TOTAL A PAGAR")]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(t.client.total))]),e("td")]),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("PENDIENTE DE PAGO")]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(t.client.total_difference))]),e("td")])])])])]):t._e(),e("div",{staticClass:"col-md-12 text-center pt-2"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.clickAddRow}},[t._v("Programar pago")])],1)])])])},V=[],G=o(j,H,V,!1,null,null,null,null);const Y=G.exports,Q={props:["showDialog","clientId"],mixins:[c],data(){return{title:"Configuración de entornos para demos y pruebas",recordId:null,resource:"demo_environments",records:[],payment_method_types:[],card_brands:[],showAddButton:!0,has_card:!1,client:{},error:{},form:{},loading_create:!1,loading_restore:!1,restore_databases:{}}},async created(){await this.initForm()},methods:{initForm(){this.errors={},this.form={id:null,client_id:this.clientId,name:null,restore_dbname_bkdemo:null,restore_type_bkdemo:null,enabled_cron_restore_bkdemo:!1}},async getData(){this.initForm(),await this.$http.get(`/${this.resource}/client/${this.clientId}`).then(s=>{this.form.restore_dbname_bkdemo=s.data.data.restore_dbname_bkdemo,this.form.restore_type_bkdemo=s.data.data.restore_type_bkdemo,this.form.enabled_cron_restore_bkdemo=s.data.data.enabled_cron_restore_bkdemo}),this.getFiles()},close(){this.$emit("update:showDialog",!1)},async getFiles(){await this.$http.get(`/${this.resource}/files`).then(s=>{this.restore_databases=s.data.data})},saveBackupDemo(){this.form.client_id=this.clientId,this.loading_create=!0,this.$http.post(`/${this.resource}/backup-create`,this.form).then(s=>{s.data.success?(this.$message.success(s.data.message),this.getData()):this.$message.error(s.data.message)}).catch(s=>{console.log(s),this.$message.error("Error al crear demo")}).finally(()=>this.loading_create=!1)},restoreBackupDemo(){if(this.form.client_id=this.clientId,!this.form.restore_dbname_bkdemo)return this.$message.error("Seleccionar una demo para restaurar"),!0;const s=this.restore_databases.find(t=>t.name===this.form.restore_dbname_bkdemo);this.form.restore_type_bkdemo=s?s.type:null,this.loading_restore=!0,this.$http.post(`/${this.resource}/backup-restore`,this.form).then(t=>{t.data.success?(this.$message.success(t.data.message),this.getData()):this.$message.error(t.data.message)}).catch(t=>{console.log(t),this.$message.error("Error al restaurar demo")}).finally(()=>this.loading_restore=!1)},enabledCronDemo(){if(this.form.client_id=this.clientId,!this.form.restore_dbname_bkdemo&&this.form.enabled_cron_restore_bkdemo)return this.$message.error("Seleccionar una demo para restaurar"),this.form.enabled_cron_restore_bkdemo=!1,!0;this.$http.post(`/${this.resource}/enable-cron`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{console.log(s),this.$message.error("Error al actualizar cron")})}}};var Z=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"50%",title:t.title,visible:t.showDialog},on:{close:t.close,open:t.getData}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h5",[e("b",[t._v("Crear una copia de esta cuenta:")])]),e("span",[t._v("Crea una réplica exacta de tu base de datos actual para fines de demostración.")])]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8 form-group",class:{"has-danger":t.errors.name}},[e("label",{staticClass:"control-label"},[t._v("Nombre ")]),e("el-input",{model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),t.errors.name?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.name[0])}}):t._e()],1),e("div",{staticClass:"col-md-4 form-group d-flex align-items-center"},[e("br"),e("el-button",{staticClass:"mt-3",attrs:{type:"primary",loading:t.loading_create,disabled:t.loading_create},on:{click:function(a){return a.preventDefault(),t.saveBackupDemo()}}},[t._v(" Crear Demo ")])],1)])])]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h5",[e("b",[t._v("Restaurar demo:")])]),e("span",[t._v("Selecciona una demo de la lista para restaurar todos los datos originales de tal sistema.")]),e("span",[t._v("Util para crear entornos de pruebas rápidas para rubros específicos o personalizados.")])]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8 form-group",class:{"has-danger":t.errors.restore_dbname}},[e("label",{staticClass:"control-label"},[t._v("Demos")]),e("el-select",{model:{value:t.form.restore_dbname_bkdemo,callback:function(a){t.$set(t.form,"restore_dbname_bkdemo",a)},expression:"form.restore_dbname_bkdemo"}},t._l(t.restore_databases,function(a){return e("el-option",{key:a.name,attrs:{value:a.name,label:a.name+" ("+a.type+")"}})}),1),t.errors.restore_dbname?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.restore_dbname[0])}}):t._e()],1),e("div",{staticClass:"col-md-4 form-group d-flex align-items-center"},[e("br"),e("el-button",{staticClass:"mt-2",attrs:{type:"primary",loading:t.loading_restore,disabled:t.loading_restore},on:{click:function(a){return a.preventDefault(),t.restoreBackupDemo()}}},[t._v(" Restaurar Demo ")])],1)])])]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h5",[e("b",[t._v("Habilitar cron para resetear esta cuenta:")])]),e("span",[t._v("Cuando esta opción esta habilitada el sistema restaurará automáticamente los datos originales de la demo seleccionada.")])]),e("div",{staticClass:"col-md-12"},[e("label",{staticClass:"control-label"},[t._v(" Habilitar cron (Se ejecuta durante la madrugada todos los días) ")]),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.enabled_cron_restore_bkdemo}},[e("el-switch",{attrs:{"active-text":"Si","inactive-text":"No"},on:{change:function(a){return t.enabledCronDemo()}},model:{value:t.form.enabled_cron_restore_bkdemo,callback:function(a){t.$set(t.form,"enabled_cron_restore_bkdemo",a)},expression:"form.enabled_cron_restore_bkdemo"}}),t.errors.enabled_cron_restore_bkdemo?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.enabled_cron_restore_bkdemo[0])}}):t._e()],1)])])])])},K=[],W=o(Q,Z,K,!1,null,null,null,null);const J=W.exports,X={props:["showDialog","clientId"],data(){return{title:null,recordId:null,image_url:null,resource:"client_account_status",records:[],payment_method_types:[],card_brands:[],showAddButton:!0,has_card:!1,client:{},totals:{}}},async created(){await this.initForm()},methods:{initForm(){this.records=[],this.showAddButton=!0,this.title="Estado de cuenta"},async getData(){this.initForm(),await this.$http.get(`/${this.resource}/client/${this.clientId}`).then(s=>{this.client=s.data.client,this.totals=s.data.totals,this.image_url=s.data.image_url}),await this.$http.get(`/${this.resource}/records/${this.clientId}`).then(s=>{this.records=s.data.data})},clickAddRow(){this.records.push({id:null,date_of_payment:moment().format("YYYY-MM-DD"),payment_method_type_id:null,card_brand_id:null,reference:null,reference:null,payment:0,errors:{},loading:!1}),this.showAddButton=!1},clickCancel(s){this.records.splice(s,1),this.showAddButton=!0},close(){this.$emit("update:showDialog",!1)}}};var tt=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.showDialog},on:{close:t.close,open:t.getData}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label d-block"},[t._v("Nombre")]),e("el-input",{attrs:{readonly:""},model:{value:t.client.name,callback:function(a){t.$set(t.client,"name",a)},expression:"client.name"}})],1),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label d-block"},[t._v("RUC")]),e("el-input",{attrs:{readonly:""},model:{value:t.client.number,callback:function(a){t.$set(t.client,"number",a)},expression:"client.number"}})],1),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label d-block"},[t._v("C. electrónico")]),e("el-input",{attrs:{readonly:""},model:{value:t.client.email,callback:function(a){t.$set(t.client,"email",a)},expression:"client.email"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label d-block"},[t._v("Total deuda")]),e("el-input",{attrs:{readonly:""},model:{value:t.totals.total_due,callback:function(a){t.$set(t.totals,"total_due",a)},expression:"totals.total_due"}},[e("template",{slot:"prepend"},[t._v("S/ ")])],2)],1),e("center",{staticClass:"mt-4"},[e("img",{attrs:{src:t.image_url,height:"80",width:"80"}}),t.totals.total_due>0?e("label",{staticClass:"d-block"},[t._v(" Tiene deuda ")]):e("label",{staticClass:"d-block"},[t._v(" No tiene deuda ")])])],1)]),e("div",{staticClass:"row mt-4"},[t.records.length>0?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[t._v("Fec. Pago")]),e("th",[t._v("Método de pago")]),e("th",[t._v("Tarjeta")]),e("th",[t._v("Referencia")]),e("th",{staticClass:"text-right"},[t._v("Estado")]),e("th",{staticClass:"text-right"},[t._v("Monto")])])]),e("tbody",t._l(t.records,function(a,i){return e("tr",[e("td",[t._v(t._s(a.date_of_payment))]),e("td",[t._v(t._s(a.payment_method_type_description))]),a.card_brand?e("td",[t._v(t._s(a.card_brand.description))]):e("td",[t._v("-")]),e("td",[t._v(t._s(a.reference))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.state_description))]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(a.payment))])])}),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("TOTAL PAGADO")]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(t.totals.total_paid))]),e("td")]),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("TOTAL A PAGAR")]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(t.totals.total))]),e("td")]),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("PENDIENTE DE PAGO")]),e("td",{staticClass:"text-right"},[t._v("S/ "+t._s(t.totals.total_difference))]),e("td")])])])])]):t._e()])])])},et=[],st=o(X,tt,et,!1,null,null,null,null);const at=st.exports;const it={props:["showDialog","record"],data(){return{title:null,resource:"clients",loading_submit:!1,is_available_delete:!1,form:{}}},async created(){await this.initForm()},methods:{inputCheckAvailableDelete(){this.form.input_validate?this.form.input_validate===this.record.name||this.form.input_validate===this.record.number?this.is_available_delete=!0:this.is_available_delete=!1:this.is_available_delete=!1},async clickDelete(){this.loading_submit=!0,await this.$http.delete(`${this.resource}/${this.record.id}/${this.form.input_validate}`).then(s=>{s.data.success?(this.$message.success(s.data.message),this.close()):this.$message.error(s.data.message),this.$eventHub.$emit("reloadData")}).catch(s=>{s.response.status===500?this.$message.error("Error al intentar eliminar"):console.log(s.response.data.message)}).then(()=>{this.loading_submit=!1})},initForm(){this.form={input_validate:null},this.is_available_delete=!1},create(){this.title="Eliminar cliente"},close(){this.initForm(),this.$emit("update:showDialog",!1)}}};var rt=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"35%",title:t.title,visible:t.showDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{close:t.close,open:t.create}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"el-alert el-alert--error is-light",attrs:{role:"alert"}},[e("i",{staticClass:"el-alert__icon el-icon-error is-big"}),e("div",{staticClass:"el-alert__content"},[e("span",{staticClass:"el-alert__title is-bold fs-title"},[t._v("¿Está seguro de eliminar al cliente "+t._s(t.record.name)+"?")]),e("p",{staticClass:"el-alert__description text-justify mt-3 fs-description"},[e("strong",[t._v("Este proceso elimina al cliente y todos los recursos relacionados (base de datos, archivos, etc).")])])])])]),e("div",{staticClass:"col-md-12 mt-5"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label font-weight-bold"},[t._v("Ingrese el número de ruc o nombre de la empresa para confirmar la acción"),e("span",{staticClass:"text-danger"},[t._v(" *")])]),e("p",[e("el-tag",{attrs:{type:"info"}},[e("b",[t._v(t._s(t.record.number))])]),t._v(" o "),e("el-tag",{attrs:{type:"info"}},[e("b",[t._v(t._s(t.record.name))])])],1),e("el-input",{on:{input:t.inputCheckAvailableDelete},model:{value:t.form.input_validate,callback:function(a){t.$set(t.form,"input_validate",a)},expression:"form.input_validate"}})],1)])]),e("div",{staticClass:"form-actions text-right mt-3"},[e("el-button",{staticClass:"second-buton",on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cancelar")]),t.is_available_delete?[e("el-button",{attrs:{loading:t.loading_submit,type:"danger"},on:{click:function(a){return a.preventDefault(),t.clickDelete()}}},[t._v("Eliminar ")])]:[e("el-button",{attrs:{type:"info",disabled:""}},[t._v("Eliminar ")])]],2)])])},ot=[],lt=o(it,rt,ot,!1,null,"4c75a211",null,null);const nt=lt.exports,ct={props:{style_div:{type:String,required:!1,default:""},entity_description:{type:String,required:!0},unlimited:{type:Boolean,required:!0},quantity:{required:!0},max_quantity:{required:!0}},data(){return{}},computed:{exceedsLimit(){return!this.unlimited&&parseFloat(this.quantity)>parseFloat(this.max_quantity)}},async created(){},methods:{}};var dt=function(){var t=this,e=t._self._c;return e("div",{style:t.style_div},[t.exceedsLimit?[e("el-popover",{attrs:{content:`El límite de ${t.entity_description} fue superado.`,placement:"top-start",trigger:"hover",width:"220"}},[e("label",{staticClass:"text-danger",attrs:{slot:"reference"},slot:"reference"},[e("strong",[t._v(t._s(t.quantity))])])])]:[e("label",[e("strong",[t._v(t._s(t.quantity))])])],t._v(" / "),t.unlimited?[e("i",{staticClass:"fas fa-infinity"})]:[e("strong",[t._v(t._s(t.max_quantity))])]],2)},ut=[],mt=o(ct,dt,ut,!1,null,null,null,null);const _t=mt.exports;const pt={mixins:[c,B],props:["deletePermission","discUsed","iUsed","storageSize","version"],components:{ChartLine:O,ClientPayments:Y,AccountStatus:at,ClientDelete:nt,DataLimitNotification:_t,DemoConfiguration:J},data(){return{searchQuery:"",selectBillingDate:"",showDialogEdit:!1,showDialog:!1,showDialogPayments:!1,showDialogAccountStatus:!1,resource:"clients",recordId:null,records:[],text_limit_doc:null,text_limit_users:null,loaded:!1,chartDataLoaded:!1,year:moment().format("YYYY"),total_documents:0,filters:{entorno:"",plan:"",bloqueo:""},pagination:{currentPage:1,itemsPerPage:20,itemsPerPageOptions:[5,10,20,50,100]},sorting:{column:null,direction:"asc"},dateFilters:{startDate:null,endDate:null,appliedStartDate:null,appliedEndDate:null},dataChartLine:{labels:[],datasets:[{data:[]}]},showDialogDelete:!1,record:{},showDemoConfiguration:!1,showLeftShadow:!1,showRightShadow:!1,isFiltersVisible:!1,columns:{nombre:{title:"Nombre",visible:!0},ruc:{title:"RUC",visible:!0},plan:{title:"Plan",visible:!0},correo:{title:"Correo",visible:!0},entorno:{title:"Entorno",visible:!0},total_comprobantes:{title:"Total de Comprobantes",visible:!1},notificaciones:{title:"Notificaciones",visible:!0},inicio_ciclo:{title:"Inicio Ciclo Facturación",visible:!1},comprobantes_ciclo:{title:"Comprobantes Ciclo Facturación",visible:!0},usuarios:{title:"Usuarios",visible:!0},sucursales:{title:"Sucursales",visible:!1},ventas_mes:{title:"Ventas (Mes)",visible:!1},fecha_creacion:{title:"F.Creación",visible:!0},consultas_api:{title:"Consultas API Peru (mes)",visible:!1},notas_venta:{title:"Cant.Notas de venta",visible:!1},total_mes:{title:"Total (Comprobantes por mes)",visible:!1},total_pse:{title:"Total (Comprobantes a PSE-GIOR)",visible:!1},total_notas:{title:"Total (Comprobantes notas de venta)",visible:!1},bloquear_cuenta:{title:"Bloquear cuenta",visible:!0},limitar_doc:{title:"Limitar Doc.",visible:!1},limitar_usuarios:{title:"Limitar Usuarios",visible:!1},limitar_sucursales:{title:"Limitar Sucursales",visible:!1},limitar_ventas:{title:"Limitar Ventas (Mes)",visible:!1}}}},async mounted(){this.loaded=!1,this.chartDataLoaded=!1;try{const s=await this.$http.get(`/${this.resource}/charts`);let t=s.data.line;t&&t.labels&&t.data&&(this.dataChartLine.labels=t.labels,this.dataChartLine.datasets[0].data=t.data,this.total_documents=s.data.total_documents,this.$nextTick(()=>{this.chartDataLoaded=!0}))}catch(s){console.error("Error loading chart data:",s),this.dataChartLine.labels=[],this.dataChartLine.datasets[0].data=[]}this.loaded=!0,this.initScrollShadow(),this.$nextTick(()=>{const s=this.$refs.scrollContainer;s&&(s.addEventListener("scroll",this.checkScrollShadows),this.checkScrollShadows())})},created(){this.$eventHub.$on("reloadData",()=>{this.getData()}),this.getData(),this.text_limit_doc="El límite de comprobantes fue superado",this.text_limit_users="El límite de usuarios fue superado",this.loadColumnVisibility()},computed:{filteredRecords(){let s=this.records;if(this.searchQuery){const t=this.searchQuery.toLowerCase();s=s.filter(e=>e.name&&e.name.toLowerCase().includes(t)||e.hostname&&e.hostname.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.number&&e.number.toLowerCase().includes(t))}return this.filters.entorno&&(s=s.filter(t=>t.soap_type===this.filters.entorno)),this.filters.plan&&(s=s.filter(t=>t.plan===this.filters.plan)),this.filters.bloqueo!==""&&(s=s.filter(t=>{const e=!!t.locked_tenant;return this.filters.bloqueo==="1"?e:this.filters.bloqueo==="0"?!e:!0})),this.sorting.column&&(s=this.sortRecords(s,this.sorting.column,this.sorting.direction)),s},paginatedRecords(){const s=(this.pagination.currentPage-1)*this.pagination.itemsPerPage,t=s+this.pagination.itemsPerPage;return this.filteredRecords.slice(s,t)},totalPages(){return Math.ceil(this.filteredRecords.length/this.pagination.itemsPerPage)},paginationInfo(){const s=(this.pagination.currentPage-1)*this.pagination.itemsPerPage+1,t=Math.min(s+this.pagination.itemsPerPage-1,this.filteredRecords.length);return{start:this.filteredRecords.length>0?s:0,end:t,total:this.filteredRecords.length}},availablePlans(){return[...new Set(this.records.map(t=>t.plan).filter(t=>t))].sort()},columnsComputed:function(){return this.columns},hasActiveFilters(){return!!(this.searchQuery||this.filters.entorno||this.filters.plan||this.filters.bloqueo!=="")},hasActiveDateFilter(){return!!(this.dateFilters.appliedStartDate&&this.dateFilters.appliedEndDate)}},methods:{saveColumnVisibility(){localStorage.setItem("columnVisibilityClients",JSON.stringify(this.columns))},loadColumnVisibility(){const s=localStorage.getItem("columnVisibilityClients");s&&(this.columns=JSON.parse(s))},applyFilters(){console.log("Filtros aplicados:",this.filters),this.pagination.currentPage=1,this.$nextTick(()=>{const s=this.records.length,t=this.filteredRecords.length;if(this.filters.bloqueo!==""&&t===0){const e=this.filters.bloqueo==="1"?"bloqueados":"activos";console.log(`No se encontraron clientes ${e} de un total de ${s} registros`)}})},changePage(s){this.pagination.currentPage=s},changeItemsPerPage(){this.pagination.currentPage=1},sortBy(s){this.sorting.column===s?this.sorting.direction=this.sorting.direction==="asc"?"desc":"asc":(this.sorting.column=s,this.sorting.direction="asc"),this.pagination.currentPage=1},sortRecords(s,t,e){return[...s].sort((a,i)=>{let r,n;switch(t){case"total_comprobantes":r=parseInt(a.count_doc)||0,n=parseInt(i.count_doc)||0;break;case"notificaciones":r=(parseInt(a.document_not_sent)||0)+(parseInt(a.document_to_be_regularized)||0)+(parseInt(a.document_to_be_canceled)||0),n=(parseInt(i.document_not_sent)||0)+(parseInt(i.document_to_be_regularized)||0)+(parseInt(i.document_to_be_canceled)||0);break;case"comprobantes_ciclo":r=parseInt(a.count_doc_month)||0,n=parseInt(i.count_doc_month)||0;break;case"usuarios":r=parseInt(a.count_user)||0,n=parseInt(i.count_user)||0;break;case"sucursales":r=parseInt(a.quantity_establishments)||0,n=parseInt(i.quantity_establishments)||0;break;case"ventas_mes":r=parseFloat(a.monthly_sales_total)||0,n=parseFloat(i.monthly_sales_total)||0;break;default:return 0}return e==="asc"?r-n:n-r})},clearFilters(){this.filters.entorno="",this.filters.plan="",this.filters.bloqueo="",this.searchQuery="",this.pagination.currentPage=1},onDateFilterChange(){console.log("Fechas seleccionadas:",this.dateFilters.startDate,this.dateFilters.endDate)},applyDateFilter(){if(!this.dateFilters.startDate||!this.dateFilters.endDate){this.$message.warning("Por favor selecciona ambas fechas");return}if(new Date(this.dateFilters.startDate)>new Date(this.dateFilters.endDate)){this.$message.error("La fecha de inicio no puede ser mayor que la fecha de fin");return}this.dateFilters.appliedStartDate=this.dateFilters.startDate,this.dateFilters.appliedEndDate=this.dateFilters.endDate,this.getData(),this.$message.success("Filtro de fechas aplicado correctamente")},clearDateFilter(){this.dateFilters.startDate=null,this.dateFilters.endDate=null,this.dateFilters.appliedStartDate=null,this.dateFilters.appliedEndDate=null,this.getData(),this.$message.success("Filtro de fechas eliminado")},formatDate(s){return s?new Date(s).toLocaleDateString("es-ES"):""},toggleFilters(){this.isFiltersVisible=!this.isFiltersVisible},getEntornoLabel(s){return{"01":"Demo","02":"Producción","03":"Interno"}[s]||s},checkScrollShadows(){const s=this.$refs.scrollContainer;if(!s)return;const t=s.scrollLeft,e=s.scrollWidth-s.clientWidth-t;this.showLeftShadow=t>1,this.showRightShadow=e>1},handleCommand(s){switch(s.action){case"password":this.clickPassword(s.id);break;case"delete":this.clickDelete(s.row);break;case"edit":this.clickEdit(s.id);break;case"demoConfig":this.clickDemoConfiguration(s.id);break;case"secretLogin":this.clickSecretLogin(s.id);break;case"payments":this.clickPayments(s.id);break;case"accountStatus":this.clickAccountStatus(s.id);break}},initScrollShadow(){this.$nextTick(()=>{const s=this.$refs.scrollContainer;s&&(s.addEventListener("scroll",()=>{const t=s.scrollLeft>0,e=s.querySelector("th.sticky-column"),a=s.querySelectorAll("tbody td.sticky-column");e&&(t?e.classList.add("scroll-active"):e.classList.remove("scroll-active")),a.forEach(i=>{t?i.classList.add("scroll-active"):i.classList.remove("scroll-active")})}),s.dispatchEvent(new Event("scroll")))})},changeLockedTenant(s){this.$http.post(`${this.resource}/locked_tenant`,s).then(t=>{t.data.success?(this.$message.success(t.data.message),this.$eventHub.$emit("reloadData")):this.$message.error(t.data.message)}).catch(t=>{t.response.status===500?this.$message.error(t.response.data.message):console.log(t.response)}).then(()=>{})},changeLockedUser(s){this.$http.post(`${this.resource}/locked_user`,s).then(t=>{t.data.success?(this.$message.success(t.data.message),this.$eventHub.$emit("reloadData")):this.$message.error(t.data.message)}).catch(t=>{t.response.status===500?this.$message.error(t.response.data.message):console.log(t.response)}).then(()=>{})},changeLockedByColumn(s,t){const e={...s};e.column=t,this.$http.post(`${this.resource}/locked-by-column`,e).then(a=>{a.data.success?(this.$message.success(a.data.message),this.$eventHub.$emit("reloadData")):this.$message.error(a.data.message)}).catch(a=>{a.response.status===500?this.$message.error(a.response.data.message):console.log(a.response)}).then(()=>{})},setStartBillingCycle(s,t){this.$http.post(`${this.resource}/set_billing_cycle`,{id:t,start_billing_cycle:s}).then(e=>{e.data.success?this.$message.success(e.data.message):this.$message.error(e.data.message)}).catch(e=>{e.response.status===500?this.$message.error(e.response.data.message):console.log(e.response)}).then(()=>{this.$eventHub.$emit("reloadData")})},changeLockedEmission(s){this.$http.post(`${this.resource}/locked_emission`,s).then(t=>{t.data.success?(this.$message.success(t.data.message),this.$eventHub.$emit("reloadData")):this.$message.error(t.data.message)}).catch(t=>{t.response.status===500?this.$message.error(t.response.data.message):console.log(t.response)}).then(()=>{})},getData(){let s={};this.dateFilters.appliedStartDate&&this.dateFilters.appliedEndDate&&(s.start_date=this.dateFilters.appliedStartDate,s.end_date=this.dateFilters.appliedEndDate),this.$http.get(`/${this.resource}/records`,{params:s}).then(t=>{this.records=t.data.data,console.log("Datos recibidos:",this.records),console.log("Parámetros enviados:",s)}).catch(t=>{console.error("Error al obtener datos:",t),this.$message.error("Error al cargar los datos")})},clickCreate(s=null){this.recordId=s,this.showDialog=!0},clickPayments(s=null){this.recordId=s,this.showDialogPayments=!0},clickAccountStatus(s=null){this.recordId=s,this.showDialogAccountStatus=!0},clickSecretLogin(s){const t=document.createElement("form");t.method="POST",t.action="/secret-login",t.style.display="none";const e=document.head.querySelector('meta[name="csrf-token"]').content,a=document.createElement("input");a.type="hidden",a.name="_token",a.value=e,t.appendChild(a);const i=document.createElement("input");i.type="hidden",i.name="client_id",i.value=s,t.appendChild(i),document.body.appendChild(t),t.submit()},clickPassword(s){this.change(`/${this.resource}/password/${s}`)},clickDelete(s){this.record=s,this.showDialogDelete=!0},clickEdit(s){this.recordId=s,this.showDialog=!0},clickDemoConfiguration(s=null){this.recordId=s,this.showDemoConfiguration=!0}}};var ht=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"page-header"},[e("h2",[e("a",{attrs:{href:"/dashboard"}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-layout-dashboard",staticStyle:{"margin-top":"-5px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M5 4h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1"}}),e("path",{attrs:{d:"M5 16h4a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1"}}),e("path",{attrs:{d:"M15 12h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1"}}),e("path",{attrs:{d:"M15 4h4a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1"}})])])]),t._m(0)]),e("div",{staticClass:"row mb-3 px-2"},[e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body p-0 m-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"chart-data-selector ready ps-3 pe-4 pt-4"},[e("div",{staticClass:"chart-data-selector-items"},[t.chartDataLoaded&&t.dataChartLine.labels.length>0?e("chart-line",{attrs:{data:t.dataChartLine}}):e("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"200px"}},[e("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Cargando gráfico...")])])])],1)])])]),e("div",{staticClass:"row px-4 mt-2 pb-3"},[e("div",{staticClass:"col-2 font-weight-bold text-primary-new"},[t._v(t._s(t.year))]),e("div",{staticClass:"col-10 font-weight-semibold text-end"},[t._v("Comprobantes generados por mes")])])])])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("section",{staticClass:"card card-horizontal mb-4"},[e("header",{staticClass:"card-header bg-success"},[e("div",{staticClass:"card-header-icon"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-users-group",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}}),e("path",{attrs:{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1"}}),e("path",{attrs:{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}}),e("path",{attrs:{d:"M17 10h2a2 2 0 0 1 2 2v1"}}),e("path",{attrs:{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}}),e("path",{attrs:{d:"M3 13v-1a2 2 0 0 1 2 -2h2"}})])])]),e("div",{staticClass:"card-body p-4 text-center"},[e("p",{staticClass:"font-weight-semibold mb-0 mx-4"},[t._v("Total Clientes")]),e("h2",{staticClass:"font-weight-semibold mt-0"},[t._v(t._s(t.records.length))]),t._m(1)])])]),e("div",{staticClass:"col-md-12 mb-0"},[e("section",{staticClass:"card card-horizontal"},[e("header",{staticClass:"card-header bg-info"},[e("div",{staticClass:"card-header-icon"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-file-text",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M14 3v4a1 1 0 0 0 1 1h4"}}),e("path",{attrs:{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}}),e("path",{attrs:{d:"M9 9l1 0"}}),e("path",{attrs:{d:"M9 13l6 0"}}),e("path",{attrs:{d:"M9 17l6 0"}})])])]),e("div",{staticClass:"card-body p-4 text-center"},[e("p",{staticClass:"font-weight-semibold mb-0 mt-3"},[t._v("Total Comprobantes")]),e("h2",{staticClass:"font-weight-semibold mt-0 mb-3"},[t._v(t._s(t.total_documents))])])])])])])]),e("div",{staticClass:"row px-2"},[e("div",{staticClass:"col-md-3"},[e("section",{staticClass:"card card-featured-left card-featured-primary mb-4"},[e("div",{staticClass:"card-body mx-0"},[e("div",{staticClass:"widget-summary widget-summary-md"},[e("div",{staticClass:"widget-summary-col widget-summary-col-icon"},[e("div",{staticClass:"summary-icon text-secondary"},[e("div",{staticClass:"progress1 mx-auto",attrs:{"data-value":t.discUsed}},[t._m(2),t._m(3),e("div",{staticClass:"progress1-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center"},[e("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.discUsed)),e("small",{staticClass:"small"})])])])])]),t._m(4)])])])]),e("div",{staticClass:"col-md-3"},[e("section",{staticClass:"card card-featured-left card-featured-primary mb-4"},[e("div",{staticClass:"card-body mx-0"},[e("div",{staticClass:"widget-summary widget-summary-md"},[e("div",{staticClass:"widget-summary-col widget-summary-col-icon"},[e("div",{staticClass:"summary-icon text-secondary"},[e("div",{staticClass:"progress1 mx-auto",attrs:{"data-value":t.iUsed}},[t._m(5),t._m(6),e("div",{staticClass:"progress1-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center"},[e("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.iUsed)),e("small",{staticClass:"small"})])])])])]),t._m(7)])])])]),e("div",{staticClass:"col-md-3"},[e("section",{staticClass:"card card-featured-left card-featured-primary mb-4"},[e("div",{staticClass:"card-body mx-0"},[e("div",{staticClass:"widget-summary widget-summary-md"},[e("div",{staticClass:"widget-summary-col widget-summary-col-icon"},[e("div",{staticClass:"summary-icon text-secondary"},[e("div",{staticClass:"progress1 mx-auto",attrs:{"data-value":"100"}},[t._m(8),t._m(9),e("div",{staticClass:"progress1-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center"},[e("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.storageSize)),e("small",{staticClass:"small"})])])])])]),t._m(10)])])])]),e("div",{staticClass:"col-md-3"},[e("section",{staticClass:"card card-featured-left card-featured-primary mb-4"},[e("div",{staticClass:"card-body mx-0"},[e("div",{staticClass:"widget-summary widget-summary-md"},[t._m(11),e("div",{staticClass:"widget-summary-col"},[e("div",{staticClass:"summary"},[e("h4",{staticClass:"title"}),e("div",{staticClass:"info"},[e("strong",{staticClass:"amount"},[t._v("Versión")]),e("br"),e("span",{staticClass:"text-primary"},[t._v(t._s(t.version))])])]),e("div",{staticClass:"summary-footer"})])])])])])]),e("div",{staticClass:"row mb-0 mt-3"},[e("div",{staticClass:"col-12"},[e("header",{staticClass:"page-header"},[e("h2",[e("a",{attrs:{href:"/dashboard"}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-users",staticStyle:{"margin-top":"-5px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"}}),e("path",{attrs:{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}}),e("path",{attrs:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}),e("path",{attrs:{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"}})])])]),t._m(12),e("div",{staticClass:"right-wrapper pull-right"},[e("div",{staticClass:"btn-group flex-wrap"},[e("button",{staticClass:"btn btn-custom btn-sm mt-2 me-2 mb-3 primary-buton pull-end",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.clickCreate()}}},[e("i",{staticClass:"fa fa-plus-circle"}),t._v(" Nuevo ")])])])])])]),e("div",{staticClass:"card",attrs:{id:"client-list"}},[e("div",{staticClass:"card-body mx-2"},[e("div",{staticClass:"btn-filter-content mb-3 d-flex"},[e("el-button",{staticClass:"btn-show-filter",class:{shift:t.isFiltersVisible},attrs:{type:"secondary"},on:{click:t.toggleFilters}},[t._v(" "+t._s(t.isFiltersVisible?"Ocultar filtros":"Mostrar filtros")+" ")]),t.hasActiveFilters?e("el-button",{attrs:{type:"secondary"},on:{click:t.clearFilters}},[t._v(" Limpiar Filtros ")]):t._e()],1),t.isFiltersVisible?e("div",{staticClass:"filter-section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label mb-1"},[t._v("Buscar:")]),e("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Buscar por hostname, nombre, ruc o correo","prefix-icon":"el-icon-search"},on:{input:t.applyFilters},model:{value:t.searchQuery,callback:function(a){t.searchQuery=a},expression:"searchQuery"}})],1),e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label mb-1"},[t._v("Filtrar por Entorno:")]),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Todos los entornos"},on:{change:t.applyFilters},model:{value:t.filters.entorno,callback:function(a){t.$set(t.filters,"entorno",a)},expression:"filters.entorno"}},[e("el-option",{attrs:{label:"Todos",value:""}}),e("el-option",{attrs:{label:"Demo",value:"01"}}),e("el-option",{attrs:{label:"Producción",value:"02"}}),e("el-option",{attrs:{label:"Interno",value:"03"}})],1)],1),e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label mb-1"},[t._v("Filtrar por Plan:")]),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Todos los planes"},on:{change:t.applyFilters},model:{value:t.filters.plan,callback:function(a){t.$set(t.filters,"plan",a)},expression:"filters.plan"}},[e("el-option",{attrs:{label:"Todos",value:""}}),t._l(t.availablePlans,function(a){return e("el-option",{key:a,attrs:{label:a,value:a}})})],2)],1),e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label mb-1"},[t._v("Estado de Cuenta:")]),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Todos los estados"},on:{change:t.applyFilters},model:{value:t.filters.bloqueo,callback:function(a){t.$set(t.filters,"bloqueo",a)},expression:"filters.bloqueo"}},[e("el-option",{attrs:{label:"Todos",value:""}}),e("el-option",{attrs:{label:"Activos",value:"0"}}),e("el-option",{attrs:{label:"Bloqueados",value:"1"}})],1)],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"date-filter-section p-3 border rounded"},[t._m(13),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-lg-4 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label mb-1"},[t._v("Fecha Inicio:")]),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Seleccionar fecha inicio",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},on:{change:t.onDateFilterChange},model:{value:t.dateFilters.startDate,callback:function(a){t.$set(t.dateFilters,"startDate",a)},expression:"dateFilters.startDate"}})],1),e("div",{staticClass:"form-group col-lg-4 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label mb-1"},[t._v("Fecha Fin:")]),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Seleccionar fecha fin",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},on:{change:t.onDateFilterChange},model:{value:t.dateFilters.endDate,callback:function(a){t.$set(t.dateFilters,"endDate",a)},expression:"dateFilters.endDate"}})],1),e("div",{staticClass:"form-group col-lg-4 col-md-12 col-sm-12 mb-2 d-flex align-items-end"},[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",disabled:!t.dateFilters.startDate||!t.dateFilters.endDate},on:{click:t.applyDateFilter}},[e("i",{staticClass:"fa fa-filter"}),t._v(" Aplicar Filtro ")]),t.hasActiveDateFilter?e("el-button",{attrs:{type:"secondary"},on:{click:t.clearDateFilter}},[e("i",{staticClass:"fa fa-times"}),t._v(" Limpiar ")]):t._e()],1)]),t.hasActiveDateFilter?e("div",{staticClass:"alert alert-info mt-2"},[e("i",{staticClass:"fa fa-info-circle"}),t._v(" Filtro activo: "+t._s(t.formatDate(t.dateFilters.appliedStartDate))+" - "+t._s(t.formatDate(t.dateFilters.appliedEndDate))+" ")]):t._e()])])])]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"text-end mt-2 me-2 data-table-visible-columns"},[e("el-dropdown",{attrs:{"hide-on-click":!1}},[e("el-button",{attrs:{type:"secondary"}},[t._v(" Mostrar/Ocultar columnas"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.columnsComputed,function(a,i){return e("el-dropdown-item",{key:i},[a.title!==void 0&&a.visible!==void 0?e("el-checkbox",{on:{change:t.saveColumnVisibility},model:{value:a.visible,callback:function(r){t.$set(a,"visible",r)},expression:"column.visible"}},[t._v(t._s(a.title)+" ")]):t._e()],1)}),1)],1)],1)])]),e("div",{staticClass:"col-md-12 position-relative mt-4"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftShadow,expression:"showLeftShadow"}],staticClass:"scroll-shadow shadow-left"}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightShadow,expression:"showRightShadow"}],staticClass:"scroll-shadow shadow-right"}),e("div",{ref:"scrollContainer",staticClass:"table-responsive"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",{staticClass:"sticky-column"},[t._v("Hostname")]),t.columns.bloquear_cuenta.visible?e("th",{staticClass:"text-center"},[t._v("Bloquear "),e("br"),t._v("cuenta")]):t._e(),t.columns.nombre.visible?e("th",{staticClass:"column-name"},[t._v("Nombre")]):t._e(),t.columns.ruc.visible?e("th",[t._v("RUC")]):t._e(),t.columns.plan.visible?e("th",[t._v("Plan")]):t._e(),t.columns.correo.visible?e("th",[t._v("Correo")]):t._e(),t.columns.entorno.visible?e("th",[t._v("Entorno")]):t._e(),t.columns.total_comprobantes.visible?e("th",{staticClass:"text-center sortable-header",on:{click:function(a){return t.sortBy("total_comprobantes")}}},[t._v(" Total de"),e("br"),t._v("Comprobantes "),e("span",{staticClass:"sort-icons"},[t.sorting.column!=="total_comprobantes"?e("i",{staticClass:"fas fa-sort"}):t._e(),t.sorting.column==="total_comprobantes"&&t.sorting.direction==="asc"?e("i",{staticClass:"fas fa-sort-up"}):t._e(),t.sorting.column==="total_comprobantes"&&t.sorting.direction==="desc"?e("i",{staticClass:"fas fa-sort-down"}):t._e()])]):t._e(),t.columns.notificaciones.visible?e("th",{staticClass:"text-center sortable-header",on:{click:function(a){return t.sortBy("notificaciones")}}},[t._v(" Notificaciones "),e("span",{staticClass:"sort-icons"},[t.sorting.column!=="notificaciones"?e("i",{staticClass:"fas fa-sort"}):t._e(),t.sorting.column==="notificaciones"&&t.sorting.direction==="asc"?e("i",{staticClass:"fas fa-sort-up"}):t._e(),t.sorting.column==="notificaciones"&&t.sorting.direction==="desc"?e("i",{staticClass:"fas fa-sort-down"}):t._e()])]):t._e(),t.columns.inicio_ciclo.visible?e("th",{staticClass:"text-end"},[t._v("Inicio "),e("br"),t._v("Ciclo Facturacion")]):t._e(),t.columns.comprobantes_ciclo.visible?e("th",{staticClass:"text-center sortable-header",on:{click:function(a){return t.sortBy("comprobantes_ciclo")}}},[t._v(" Comprobantes"),e("br"),t._v("Ciclo Facturacion "),e("span",{staticClass:"sort-icons"},[t.sorting.column!=="comprobantes_ciclo"?e("i",{staticClass:"fas fa-sort"}):t._e(),t.sorting.column==="comprobantes_ciclo"&&t.sorting.direction==="asc"?e("i",{staticClass:"fas fa-sort-up"}):t._e(),t.sorting.column==="comprobantes_ciclo"&&t.sorting.direction==="desc"?e("i",{staticClass:"fas fa-sort-down"}):t._e()])]):t._e(),t.columns.usuarios.visible?e("th",{staticClass:"text-center sortable-header",on:{click:function(a){return t.sortBy("usuarios")}}},[t._v(" Usuarios "),e("span",{staticClass:"sort-icons"},[t.sorting.column!=="usuarios"?e("i",{staticClass:"fas fa-sort"}):t._e(),t.sorting.column==="usuarios"&&t.sorting.direction==="asc"?e("i",{staticClass:"fas fa-sort-up"}):t._e(),t.sorting.column==="usuarios"&&t.sorting.direction==="desc"?e("i",{staticClass:"fas fa-sort-down"}):t._e()])]):t._e(),t.columns.sucursales.visible?e("th",{staticClass:"text-center sortable-header",on:{click:function(a){return t.sortBy("sucursales")}}},[t._v(" Sucursales "),e("span",{staticClass:"sort-icons"},[t.sorting.column!=="sucursales"?e("i",{staticClass:"fas fa-sort"}):t._e(),t.sorting.column==="sucursales"&&t.sorting.direction==="asc"?e("i",{staticClass:"fas fa-sort-up"}):t._e(),t.sorting.column==="sucursales"&&t.sorting.direction==="desc"?e("i",{staticClass:"fas fa-sort-down"}):t._e()])]):t._e(),t.columns.ventas_mes.visible?e("th",{staticClass:"text-center sortable-header",on:{click:function(a){return t.sortBy("ventas_mes")}}},[t._v(" Ventas (Mes) "),e("span",{staticClass:"sort-icons"},[t.sorting.column!=="ventas_mes"?e("i",{staticClass:"fas fa-sort"}):t._e(),t.sorting.column==="ventas_mes"&&t.sorting.direction==="asc"?e("i",{staticClass:"fas fa-sort-up"}):t._e(),t.sorting.column==="ventas_mes"&&t.sorting.direction==="desc"?e("i",{staticClass:"fas fa-sort-down"}):t._e()])]):t._e(),t.columns.fecha_creacion.visible?e("th",{staticClass:"text-center"},[t._v("F.Creación")]):t._e(),t.columns.consultas_api.visible?e("th",{staticClass:"text-center"},[t._v("Consultas "),e("br"),t._v("API Peru "),e("br"),t._v("(mes)")]):t._e(),t.columns.notas_venta.visible?e("th",{staticClass:"text-center"},[t._v("Cant. "),e("br"),t._v("Notas de venta")]):t._e(),t.columns.total_mes.visible?e("th",{staticClass:"text-center"},[t._v("Total"),e("br"),t._m(14)]):t._e(),t.columns.total_pse.visible?e("th",{staticClass:"text-center"},[t._v("Total"),e("br"),t._m(15)]):t._e(),t.columns.total_notas.visible?e("th",{staticClass:"text-center"},[t._v("Total"),e("br"),t._m(16)]):t._e(),t.columns.limitar_doc.visible?e("th",{staticClass:"text-end"},[t._v("Limitar Doc.")]):t._e(),t.columns.limitar_usuarios.visible?e("th",{staticClass:"text-center"},[t._v("Limitar "),e("br"),t._v("Usuarios")]):t._e(),t.columns.limitar_sucursales.visible?e("th",{staticClass:"text-center"},[t._v("Limitar "),e("br"),t._v("Sucursales")]):t._e(),t.columns.limitar_ventas.visible?e("th",{staticClass:"text-center"},[e("el-tooltip",{staticClass:"item",attrs:{content:"Límite de ventas mensual asociado al ciclo de facturación",effect:"dark",placement:"top"}},[e("label",[t._v("Limitar "),e("br"),t._v("Ventas (Mes)")])])],1):t._e(),e("th",{staticClass:"text-end"},[t._v("Acciones")])])]),e("tbody",[t._l(t.paginatedRecords,function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s((t.pagination.currentPage-1)*t.pagination.itemsPerPage+i+1))]),e("td",{staticClass:"sticky-column"},[e("a",{staticStyle:{color:"black"},attrs:{href:`http://${a.hostname}`,target:"_blank"}},[t._v(t._s(a.hostname))])]),t.columns.bloquear_cuenta.visible?e("td",{staticClass:"text-center"},[a.locked?t._e():[e("el-switch",{staticStyle:{display:"block"},on:{change:function(r){return t.changeLockedTenant(a)}},model:{value:a.locked_tenant,callback:function(r){t.$set(a,"locked_tenant",r)},expression:"row.locked_tenant"}})]],2):t._e(),t.columns.nombre.visible?e("td",{staticClass:"column-name table-cell"},[t._v(t._s(a.name))]):t._e(),t.columns.ruc.visible?e("td",[t._v(t._s(a.number))]):t._e(),t.columns.plan.visible?e("td",[t._v(t._s(a.plan))]):t._e(),t.columns.correo.visible?e("td",[t._v(t._s(a.email))]):t._e(),t.columns.entorno.visible?e("td",[a.soap_type=="01"?e("span",{staticClass:"badge badge-default"},[t._v("Demo")]):t._e(),a.soap_type=="02"?e("span",{staticClass:"badge badge-success"},[t._v("Producción")]):t._e(),a.soap_type=="03"?e("span",{staticClass:"badge badge-info"},[t._v("Interno")]):t._e()]):t._e(),t.columns.total_comprobantes.visible?e("td",{staticClass:"text-center"},[e("label",[e("strong",[t._v(t._s(a.count_doc))])])]):t._e(),t.columns.notificaciones.visible?e("td",{staticClass:"d-flex justify-content-center"},[a.document_not_sent>0||a.document_to_be_regularized>0||a.document_to_be_canceled>0?[e("el-tooltip",{staticClass:"item",attrs:{content:"Comprobantes enviados / por enviar",effect:"dark",placement:"top-start"}},[a.document_not_sent>0?e("el-badge",{staticClass:"item mx-2",attrs:{value:a.document_not_sent,type:a.document_not_sent==0?"primary":"danger"}},[e("i",{staticClass:"far fa-bell text-secondary"})]):t._e()],1),e("el-tooltip",{staticClass:"item",attrs:{content:"Comprobantes pendientes de rectificación",effect:"dark",placement:"top-start"}},[a.document_to_be_regularized>0?e("el-badge",{staticClass:"item mx-2",attrs:{value:a.document_regularize_shipping,type:a.document_regularize_shipping==0?"primary":"danger"}},[e("i",{staticClass:"fas fa-exclamation-triangle text-secondary"})]):t._e()],1),e("el-tooltip",{staticClass:"item",attrs:{content:"Comprobantes por anular",effect:"dark",placement:"top-start"}},[a.document_to_be_canceled>0?e("el-badge",{staticClass:"item mx-2",attrs:{value:a.document_to_be_canceled,type:a.document_to_be_canceled==0?"primary":"danger"}},[e("i",{staticClass:"fas fa-exclamation-circle text-secondary"})]):t._e()],1)]:[e("span",{staticClass:"text-muted small d-flex align-items-center"},[t._v(" Todo OK "),e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check ms-1 text-success",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})])])]],2):t._e(),t.columns.inicio_ciclo.visible?e("td",[a.start_billing_cycle?[e("span"),e("span",[t._v(t._s(a.start_billing_cycle))])]:[e("el-date-picker",{attrs:{placeholder:"...",type:"date","value-format":"yyyy-MM-dd"},on:{change:function(r){return t.setStartBillingCycle(r,a.id)}},model:{value:a.select_date_billing,callback:function(r){t.$set(a,"select_date_billing",r)},expression:"row.select_date_billing"}})]],2):t._e(),t.columns.comprobantes_ciclo.visible?e("td",{staticClass:"text-center"},[e("strong",[a.sale_notes_quantity_if_include>0?[t._v(" "+t._s(a.count_doc_month?a.count_doc_month+a.sale_notes_quantity_if_include:0)+" / ")]:[t._v(" "+t._s(a.count_doc_month?a.count_doc_month:0)+" / ")],a.max_documents==0?[e("i",{staticClass:"fas fa-infinity"})]:[e("strong",[t._v(t._s(a.max_documents))])]],2)]):t._e(),t.columns.usuarios.visible?e("td",{staticClass:"text-center"},[a.max_users!==0&&a.count_user>a.max_users?[e("el-popover",{attrs:{content:t.text_limit_users,placement:"top-start",trigger:"hover",width:"220"}},[e("label",{staticClass:"text-danger",attrs:{slot:"reference"},slot:"reference"},[e("strong",[t._v(t._s(a.count_user))])])])]:[e("label",[e("strong",[t._v(t._s(a.count_user))])])],t._v(" / "),a.max_users==0?[e("i",{staticClass:"fas fa-infinity"})]:[e("strong",[t._v(t._s(a.max_users))])]],2):t._e(),t.columns.sucursales.visible?e("td",{staticClass:"text-center"},[e("data-limit-notification",{attrs:{entity_description:"sucursales",unlimited:a.establishments_unlimited,quantity:a.quantity_establishments,max_quantity:a.max_quantity_establishments}})],1):t._e(),t.columns.ventas_mes.visible?e("td",{staticClass:"text-center"},[e("data-limit-notification",{attrs:{entity_description:"ventas",style_div:"width: 150px !important",unlimited:a.sales_unlimited,quantity:a.monthly_sales_total,max_quantity:a.max_sales_limit}})],1):t._e(),t.columns.fecha_creacion.visible?e("td",{staticClass:"text-center"},[t._v(t._s(a.created_at))]):t._e(),t.columns.consultas_api.visible?e("td",[t._v(t._s(a.queries_to_apiperu))]):t._e(),t.columns.notas_venta.visible?e("td",{staticClass:"text-center"},[e("strong",[t._v(t._s(a.count_sales_notes))])]):t._e(),t.columns.total_mes.visible?e("td",{staticClass:"text-center"},[e("strong",[t._v(t._s(a.current_count_doc_month))])]):t._e(),t.columns.total_pse.visible?e("td",{staticClass:"text-center"},[e("strong",[t._v(t._s(a.count_doc_pse))])]):t._e(),t.columns.total_notas.visible?e("td",{staticClass:"text-center"},[e("strong",[t._v(t._s(a.count_doc_month+a.count_sales_notes_month))])]):t._e(),t.columns.limitar_doc.visible?e("td",{staticClass:"text-center"},[e("el-switch",{staticStyle:{display:"block"},on:{change:function(r){return t.changeLockedEmission(a)}},model:{value:a.locked_emission,callback:function(r){t.$set(a,"locked_emission",r)},expression:"row.locked_emission"}})],1):t._e(),t.columns.limitar_usuarios.visible?e("td",{staticClass:"text-center"},[e("el-switch",{staticStyle:{display:"block"},on:{change:function(r){return t.changeLockedUser(a)}},model:{value:a.locked_users,callback:function(r){t.$set(a,"locked_users",r)},expression:"row.locked_users"}})],1):t._e(),t.columns.limitar_sucursales.visible?e("td",{staticClass:"text-center"},[e("el-switch",{staticStyle:{display:"block"},on:{change:function(r){return t.changeLockedByColumn(a,"locked_create_establishments")}},model:{value:a.locked_create_establishments,callback:function(r){t.$set(a,"locked_create_establishments",r)},expression:"row.locked_create_establishments"}})],1):t._e(),t.columns.limitar_ventas.visible?e("td",{staticClass:"text-center"},[e("el-switch",{staticStyle:{display:"block"},on:{change:function(r){return t.changeLockedByColumn(a,"restrict_sales_limit")}},model:{value:a.restrict_sales_limit,callback:function(r){t.$set(a,"restrict_sales_limit",r)},expression:"row.restrict_sales_limit"}})],1):t._e(),e("td",{staticClass:"text-end"},[e("el-dropdown",{attrs:{trigger:"click",placement:"bottom-end"},on:{command:t.handleCommand}},[e("el-button",{staticClass:"dropdown-trigger",attrs:{type:"text",size:"small"}},[e("i",{staticClass:"fas fa-ellipsis-v"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a.locked?t._e():[e("el-dropdown-item",{attrs:{command:{action:"password",id:a.id}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-key me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z"}}),e("path",{attrs:{d:"M15 9h.01"}})]),t._v(" Restablecer contraseña ")]),t.deletePermission==!0?e("el-dropdown-item",{staticClass:"text-danger option-delete",attrs:{command:{action:"delete",row:a},divided:""}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-trash me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M4 7l16 0"}}),e("path",{attrs:{d:"M10 11l0 6"}}),e("path",{attrs:{d:"M14 11l0 6"}}),e("path",{attrs:{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}}),e("path",{attrs:{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}})]),t._v(" Eliminar Cliente ")]):t._e()],e("el-dropdown-item",{attrs:{command:{action:"edit",id:a.id},divided:!a.locked}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-edit me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}}),e("path",{attrs:{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}}),e("path",{attrs:{d:"M16 5l3 3"}})]),t._v(" Editar ")]),a.soap_type=="01"?e("el-dropdown-item",{attrs:{command:{action:"demoConfig",id:a.id}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-settings me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}}),e("path",{attrs:{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}})]),t._v(" Configurar Demo ")]):t._e(),e("el-dropdown-item",{attrs:{command:{action:"secretLogin",id:a.id}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-dual-screen me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M5 4l8 3v15l-8 -3z"}}),e("path",{attrs:{d:"M13 19h6v-15h-14"}})]),t._v(" Acceso Maestro ")]),e("el-dropdown-item",{attrs:{command:{action:"payments",id:a.id},divided:""}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-cash-banknote me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}}),e("path",{attrs:{d:"M3 8a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}}),e("path",{attrs:{d:"M18 12h.01"}}),e("path",{attrs:{d:"M6 12h.01"}})]),t._v(" Pagos ")]),e("el-dropdown-item",{attrs:{command:{action:"accountStatus",id:a.id}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-chart-line me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M4 19l16 0"}}),e("path",{attrs:{d:"M4 15l4 -6l4 2l4 -5l4 4"}})]),t._v(" Estado de cuenta ")])],2)],1)],1)])}),t.filteredRecords.length===0&&t.records.length>0?e("tr",[e("td",{staticClass:"text-center py-4",attrs:{colspan:"20"}},[e("div",{staticClass:"text-muted"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-search",staticStyle:{opacity:"0.5"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}}),e("path",{attrs:{d:"M21 21l-6 -6"}})]),e("p",{staticClass:"mb-0"},[t._v("No se encontraron clientes que coincidan con los filtros aplicados.")]),e("small",[t.searchQuery?[t._v(' Búsqueda: "'+t._s(t.searchQuery)+'" ')]:t._e(),t.filters.entorno?[t._v(" | Entorno: "+t._s(t.getEntornoLabel(t.filters.entorno))+" ")]:t._e(),t.filters.plan?[t._v(" | Plan: "+t._s(t.filters.plan)+" ")]:t._e(),t.filters.bloqueo!==""?[t._v(" | Estado: "+t._s(t.filters.bloqueo==="1"?"Bloqueados":"Activos")+" ")]:t._e()],2)])])]):t._e()],2)])])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6 d-flex align-items-center"},[e("div",{staticClass:"pagination-info"},[e("span",{staticClass:"text-muted"},[t._v(" Mostrando "+t._s(t.paginationInfo.start)+" a "+t._s(t.paginationInfo.end)+" de "+t._s(t.paginationInfo.total)+" registros ")])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"d-flex justify-content-end align-items-center"},[e("div",{staticClass:"me-3"},[e("label",{staticClass:"me-2 text-muted"},[t._v("Mostrar:")]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"small"},on:{change:t.changeItemsPerPage},model:{value:t.pagination.itemsPerPage,callback:function(a){t.$set(t.pagination,"itemsPerPage",a)},expression:"pagination.itemsPerPage"}},t._l(t.pagination.itemsPerPageOptions,function(a){return e("el-option",{key:a,attrs:{label:a,value:a}})}),1)],1),e("div",{staticClass:"pagination-controls"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.itemsPerPage,total:t.filteredRecords.length,layout:"prev, pager, next","hide-on-single-page":!1,small:""},on:{"current-change":t.changePage}})],1)])])])])]),e("system-clients-form",{attrs:{recordId:t.recordId,showDialog:t.showDialog},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}}),e("client-payments",{attrs:{clientId:t.recordId,showDialog:t.showDialogPayments},on:{"update:showDialog":function(a){t.showDialogPayments=a},"update:show-dialog":function(a){t.showDialogPayments=a}}}),e("account-status",{attrs:{clientId:t.recordId,showDialog:t.showDialogAccountStatus},on:{"update:showDialog":function(a){t.showDialogAccountStatus=a},"update:show-dialog":function(a){t.showDialogAccountStatus=a}}}),e("client-delete",{attrs:{record:t.record,showDialog:t.showDialogDelete},on:{"update:showDialog":function(a){t.showDialogDelete=a},"update:show-dialog":function(a){t.showDialogDelete=a}}}),e("demo-configuration",{attrs:{clientId:t.recordId,showDialog:t.showDemoConfiguration},on:{"update:showDialog":function(a){t.showDemoConfiguration=a},"update:show-dialog":function(a){t.showDemoConfiguration=a}}})],1)},ft=[function(){var s=this,t=s._self._c;return t("ol",{staticClass:"breadcrumbs"},[t("li",{staticClass:"active"},[t("span",[s._v("Dashboard")])])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"summary-footer"},[t("a",{staticClass:"text-muted text-uppercase",attrs:{href:"#client-list"}},[s._v("Ver todos")])])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"progress1-left"},[t("span",{staticClass:"progress1-bar border-primary"})])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"progress1-right"},[t("span",{staticClass:"progress1-bar border-primary"})])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"widget-summary-col"},[t("div",{staticClass:"summary"},[t("h4",{staticClass:"title"}),t("div",{staticClass:"info"},[t("strong",{staticClass:"amount"},[s._v("Disco Duro")]),t("br")])]),t("div",{staticClass:"summary-footer d-block"},[t("a",{staticClass:"text-muted text-uppercase",attrs:{href:"https://docs.google.com/document/d/1hpEQUs9OFha_35yyLb1cMKeluD-dEku5lQsQ3TJFib8/edit",target:"BLANK"}},[s._v("Incrementar")])])])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"progress1-left"},[t("span",{staticClass:"progress1-bar border-primary"})])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"progress1-right"},[t("span",{staticClass:"progress1-bar border-primary"})])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"widget-summary-col"},[t("div",{staticClass:"summary"},[t("h4",{staticClass:"title"}),t("div",{staticClass:"info"},[t("strong",{staticClass:"amount"},[s._v("Inodes")])])]),t("div",{staticClass:"summary-footer d-block"},[t("a",{staticClass:"text-muted text-uppercase",attrs:{href:"https://drive.google.com/open?id=1foPKDI3V3Z9uKTjRc2SPSoztVSOBevPAluT2BqFbfxA",target:"BLANK"}},[s._v("Limpiar")])])])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"progress1-left"},[t("span",{staticClass:"progress1-bar border-tertiary"})])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"progress1-right"},[t("span",{staticClass:"progress1-bar border-tertiary"})])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"widget-summary-col"},[t("div",{staticClass:"summary"},[t("h4",{staticClass:"title"}),t("div",{staticClass:"info"},[t("strong",{staticClass:"amount"},[s._v("Archivos "),t("br"),s._v(" Generados")])])]),t("div",{staticClass:"summary-footer"})])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"widget-summary-col widget-summary-col-icon"},[t("div",{staticClass:"summary-icon",staticStyle:{"background-color":"#292961"}},[t("i",{staticClass:"fab fa-gitlab"})])])},function(){var s=this,t=s._self._c;return t("ol",{staticClass:"breadcrumbs"},[t("li",{staticClass:"active"},[t("span",[s._v("Listado de Clientes")])])])},function(){var s=this,t=s._self._c;return t("h6",{staticClass:"mb-3"},[t("i",{staticClass:"fa fa-calendar"}),s._v(" Filtro por Rango de Fechas ")])},function(){var s=this,t=s._self._c;return t("small",[s._v("(Comprobantes "),t("br"),s._v("por mes)")])},function(){var s=this,t=s._self._c;return t("small",[s._v("(Comprobantes "),t("br"),s._v("a PSE-GIOR)")])},function(){var s=this,t=s._self._c;return t("small",[s._v("(Comprobantes "),t("br"),s._v("notas de venta)")])}],vt=o(pt,ht,ft,!1,null,"f53a5d9f",null,null);const gt=vt.exports;const bt={mixins:[C],props:["showDialog","recordId"],data(){return{defaultProps:{children:"childrens",label:"description"},defaultAppsProps:{children:"childrens",label:"description"},headers:headers_token,loading_submit:!1,loading_search:!1,titleDialog:null,button_text:null,resource:"clients",error:{},errors:{},form:{},url_base:null,plans:[],plan_periods:[],modules:[],apps:[],types:[],soap_sends:[{value:"01",text:"Sunat"},{value:"02",text:"Ose"}],soap_types:[{id:"01",description:"Demo"},{id:"02",description:"Producción"}],toggle:!1,certificate_admin:"",soap_username:null,soap_password:null,collapse:1,business:null,regex_password_client:!1}},updated(){this.modules!==void 0&&this.$refs.tree},async created(){await this.$http.get(`/${this.resource}/tables`).then(s=>{this.url_base=s.data.url_base,this.plans=s.data.plans,this.modules=s.data.modules,this.apps=s.data.apps,this.types=s.data.types,this.certificate_admin=s.data.certificate_admin,this.soap_username=s.data.soap_username,this.soap_password=s.data.soap_password,this.group_basic=s.data.group_basic,this.group_hotel=s.data.group_hotel,this.group_pharmacy=s.data.group_pharmacy,this.group_restaurant=s.data.group_restaurant,this.group_hotel_apps=s.data.group_hotel_apps,this.group_pharmacy_apps=s.data.group_pharmacy_apps,this.group_restaurant_apps=s.data.group_restaurant_apps,this.regex_password_client=s.data.regex_password_client,this.plan_periods=s.data.plan_periods}),await this.initForm(),this.form.soap_username=this.soap_username,this.form.soap_password=this.soap_password},methods:{FixChildren(s,t){let e=this.$refs.tree;s!==void 0&&(t.checkedKeys.indexOf(s.id)!==-1?(this.SelectParent(s,e),this.FixSameValueToChild(s,!0,e)):s.childrens!==void 0&&s.childrens.length!==0&&this.FixSameValueToChild(s,!1,e))},FixAppChildren(s,t){let e=this.$refs.Apptree;s!==void 0&&(t.checkedKeys.indexOf(s.id)!==-1?(this.SelectParent(s,e),this.FixSameValueToChild(s,!0,e)):s.childrens!==void 0&&s.childrens.length!==0&&this.FixSameValueToChild(s,!1,e))},FixSameValueToChild(s,t,e){if(s!==void 0&&e!==void 0&&(e.setChecked(s.id,t),s.childrens!==void 0))for(let a=0;a<s.childrens.length;a++)this.FixSameValueToChild(s.childrens[a],t,e)},SelectParent(s,t){if(s!==void 0){let e=t.getNode(s);e.parent.key!==void 0&&(t.setChecked(e.parent,!0),this.SelectParent(e.parent,t))}},initForm(){this.errors={},this.form={id:null,name:null,email:null,identity_document_type_id:"6",number:"",password:null,plan_id:null,price:0,plan_period_id:1,locked_emission:!1,type:null,is_update:!1,modules:[],apps:[],levels:[],config_system_env:!0,soap_send_id:"01",soap_type_id:"01",soap_username:null,soap_password:null,soap_url:null,password_certificate:null,certificate:null,temp_path:null,smtp_host:"smtp.gmail.com",smtp_port:465,smtp_user:"username",smtp_password:null,smtp_encryption:"ssl",enable_list_product:!0}},changePlan(){if(this.form.plan_id){let s=this.plans.find(t=>t.id===this.form.plan_id);this.form.price=s.pricing}},create(){if(this.recordId)this.titleDialog="Editar Cliente";else{this.titleDialog="Nuevo Cliente";const s=[];this.modules.map(e=>{s.push(e.id),e.childrens.map(a=>{s.push(a.id)})});const t=[];this.apps.map(e=>{t.push(e.id),e.childrens.map(a=>{t.push(a.id)})}),setTimeout(()=>{this.$refs.tree.setCheckedKeys(s),this.$refs.Apptree.setCheckedKeys(t)},1e3)}this.recordId&&this.$http.get(`/${this.resource}/record/${this.recordId}`).then(s=>{this.$refs.tree.setCheckedKeys([]),this.$refs.Apptree.setCheckedKeys([]),this.form=s.data.data,this.form.is_update=!0;const t=[],e=this.form.modules,a=this.form.levels,i=[],r=this.form.apps;this.modules.map(n=>{e.includes(n.id)&&t.push(n.id),n.childrens.map(d=>{const p=d.id.split("-");a.includes(parseInt(p[1]))&&t.push(d.id)})}),this.apps.map(n=>{r.includes(n.id)&&i.push(n.id),n.childrens.map(d=>{const p=d.id.split("-");a.includes(parseInt(p[1]))&&i.push(d.id)})}),setTimeout(()=>{this.$refs.tree.setCheckedKeys(t),this.$refs.Apptree.setCheckedKeys(i)},1e3)})},async submit(){const s=this.$refs.tree.getCheckedNodes(),t=this.$refs.Apptree.getCheckedNodes(),e=[];s.map(i=>{i.is_parent&&e.push(i.id)}),t.map(i=>{i.is_parent&&e.push(i.id)});const a=[];if(s.filter(i=>{if(!i.is_parent){const r=i.id.split("-");a.push(r[1])}}),t.filter(i=>{if(!i.is_parent){const r=i.id.split("-");a.push(r[1])}}),this.form.modules=e,this.form.levels=a,this.form.regex_password_client=this.regex_password_client,e.length<1)return this.$message.error("Debe seleccionar al menos un módulo");if(this.form.is_update){if(this.form.temp_path&&!this.form.password_certificate)return this.$message.error("Si carga un certificado, es necesario ingresar el password del certificado")}else if(this.form.certificate&&!this.form.password_certificate)return this.$message.error("Si carga un certificado, es necesario ingresar el password del certificado");this.button_text=this.form.is_update?"Actualizando cliente...":"Creando base de datos...",this.loading_submit=!0,await this.$http.post(`${this.resource}${this.form.is_update?"/update":""}`,this.form).then(i=>{i.data.success?(this.$message.success(i.data.message),this.$eventHub.$emit("reloadData"),this.close()):this.$message.error(i.data.message)}).catch(i=>{i.response.status===422?this.errors=i.response.data:i.response.status===500?this.$message.error(i.response.data.message):console.log(i.response)}).then(()=>{this.loading_submit=!1})},close(){this.$emit("update:showDialog",!1),this.initForm()},searchSunat(){this.searchServiceNumber()},errorUpload(s){console.log(s)},successUpload(s){s.success?(this.form.certificate=s.data.filename,this.form.temp_path=s.data.temp_path):this.$message.error(s.message)},searchNumber(s){this.form.name=s.name},changeModules(){var s={modules:[],apps:[]};this.business==1&&(s.modules=this.getIds(this.group_basic)),this.business==2&&(s.modules=this.getIds(this.group_pharmacy),s.apps=this.getIds(this.group_pharmacy_apps)),this.business==3&&(s.modules=this.getIds(this.group_hotel),s.apps=this.getIds(this.group_hotel_apps)),this.business==4&&(s.modules=this.getIds(this.group_restaurant),s.apps=this.getIds(this.group_restaurant_apps)),this.$refs.tree.setCheckedKeys(s.modules),this.$refs.Apptree.setCheckedKeys(s.apps)},getIds(s){const t=[];return s.map(e=>{t.push(e.id),e.childrens.map(a=>{t.push(a.id)})}),t}}};var Ct=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.titleDialog,visible:t.showDialog},on:{close:t.close,open:t.create}},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.number}},[e("label",{staticClass:"control-label"},[t._v("RUC")]),e("x-input-service",{attrs:{identity_document_type_id:t.form.identity_document_type_id},on:{search:t.searchNumber},model:{value:t.form.number,callback:function(a){t.$set(t.form,"number",a)},expression:"form.number"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.name}},[e("label",{staticClass:"control-label"},[t._v("Nombre de la Empresa")]),e("el-input",{attrs:{disabled:t.form.is_update,dusk:"name"},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),t.errors.name?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.name[0])}}):t._e()],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 url-container"},[t.form.is_update?e("div",{staticClass:"form-group",class:{"has-danger":t.errors.subdomain||t.errors.uuid}},[e("label",{staticClass:"control-label"},[t._v(" Nombre de Subdominio ")]),e("el-input",{attrs:{disabled:t.form.is_update,dusk:"name"},model:{value:t.form.hostname,callback:function(a){t.$set(t.form,"hostname",a)},expression:"form.hostname"}})],1):e("div",{staticClass:"form-group",class:{"has-danger":t.errors.subdomain||t.errors.uuid}},[e("label",{staticClass:"control-label"},[t._v(" Nombre de Subdominio ")]),e("el-input",{staticClass:"subdomain-input",attrs:{dusk:"subdomain"},model:{value:t.form.subdomain,callback:function(a){t.$set(t.form,"subdomain",a)},expression:"form.subdomain"}},[e("template",{slot:"append"},[e("span",{staticClass:"url-text-ellipsis"},[t._v(t._s(t.url_base))])])],2),t.errors.subdomain?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.subdomain[0])}}):t._e(),t.errors.uuid?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.uuid[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.email}},[e("label",{staticClass:"control-label"},[t._v(" Correo de Acceso ")]),e("el-input",{attrs:{disabled:t.form.is_update,dusk:"email"},model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}}),t.errors.email?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.email[0])}}):t._e()],1)])]),e("div",{staticClass:"row mb-3"},[t.form.is_update?t._e():e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.password}},[e("label",{staticClass:"control-label"},[t._v(" Contraseña "),t.regex_password_client?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[e("i",{staticClass:"fa fa-info-circle"}),e("div",{attrs:{slot:"content"},slot:"content"},[e("strong",[t._v("FORMATO DE CONTRASEÑA")]),e("br"),e("br"),t._v(" La contraseña debe contener al menos una letra minúscula."),e("br"),t._v(" La contraseña debe contener al menos una letra mayúscula."),e("br"),t._v(" La contraseña debe contener al menos un dígito."),e("br"),t._v(" La contraseña debe contener al menos un carácter especial [@.$!%*#?&-]."),e("br")])]):t._e()],1),e("el-input",{attrs:{disabled:t.form.is_update,dusk:"password",type:"password","show-password":""},model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}}),t.errors.password?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.password[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.plan_id}},[e("label",{staticClass:"control-label"},[t._v(" Plan ")]),e("el-select",{attrs:{dusk:"plan_id"},on:{change:t.changePlan},model:{value:t.form.plan_id,callback:function(a){t.$set(t.form,"plan_id",a)},expression:"form.plan_id"}},t._l(t.plans,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1),t.errors.plan_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.plan_id[0])}}):t._e()],1)]),t.form.is_update?t._e():e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.type}},[e("label",{staticClass:"control-label"},[t._v(" Perfil ")]),e("el-select",{attrs:{disabled:t.form.is_update},model:{value:t.form.type,callback:function(a){t.$set(t.form,"type",a)},expression:"form.type"}},t._l(t.types,function(a){return e("el-option",{key:a.type,attrs:{label:a.description,value:a.type}})}),1),t.errors.type?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.type[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6 center-el-checkbox"},[t.form.plan_id?e("div",{staticClass:"col-md-12 row",staticStyle:{"padding-left":"0"}},[e("div",{staticClass:"col-md-6 mb-2 form-group"},[e("label",{staticClass:"control-label"},[t._v(" Precio ")]),e("el-input",{attrs:{dusk:"price"},model:{value:t.form.price,callback:function(a){t.$set(t.form,"price",a)},expression:"form.price"}}),t.errors.price?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.price[0])}}):t._e()],1),e("div",{staticClass:"col-md-6 mb-2 form-group"},[e("label",{staticClass:"control-label"},[t._v(" Periodo ")]),e("el-select",{attrs:{dusk:"plan_id"},model:{value:t.form.plan_period_id,callback:function(a){t.$set(t.form,"plan_period_id",a)},expression:"form.plan_period_id"}},t._l(t.plan_periods,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1),t.errors.plan_period_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.plan_period_id[0])}}):t._e()],1)]):t._e(),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.locked_emission}},[e("el-checkbox",{attrs:{disabled:t.form.is_update},model:{value:t.form.locked_emission,callback:function(a){t.$set(t.form,"locked_emission",a)},expression:"form.locked_emission"}},[t._v(" Limitar emisión de documentos ")]),e("br"),t.errors.locked_emission?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.locked_emission[0])}}):t._e()],1)])]),e("el-collapse",{model:{value:t.collapse,callback:function(a){t.collapse=a},expression:"collapse"}},[e("el-collapse-item",{attrs:{name:"1",title:"Módulos"}},[e("div",{staticClass:"row"},[e("span",{staticClass:"ms-4"},[t._v("Giro de negocio "),e("small",[t._v("(opcional)")])]),e("div",{staticClass:"col-12"},[e("el-radio-group",{on:{change:t.changeModules},model:{value:t.business,callback:function(a){t.business=a},expression:"business"}},[e("el-radio",{attrs:{label:1}},[t._v("Básico")]),e("el-radio",{attrs:{label:2}},[t._v("Farmacia")]),e("el-radio",{attrs:{label:3}},[t._v("Hotel")]),e("el-radio",{attrs:{label:4}},[t._v("Restaurante")])],1)],1),e("div",{staticClass:"col-md-6"},[e("span",[t._v(" Habilitar módulos ")]),e("div",{staticClass:"form-group tree-container-admin"},[e("el-tree",{ref:"tree",attrs:{"check-strictly":!0,data:t.modules,props:t.defaultProps,accordion:"","highlight-current":"","node-key":"id","show-checkbox":""},on:{check:t.FixChildren}})],1)]),e("div",{staticClass:"col-md-6"},[e("span",[t._v(" Habilitar apps ")]),e("div",{staticClass:"form-group tree-container-admin"},[e("el-tree",{ref:"Apptree",attrs:{"check-strictly":!0,data:t.apps,props:t.defaultAppsProps,accordion:"","highlight-current":"","node-key":"id","show-checkbox":""},on:{check:t.FixAppChildren}})],1)]),e("div",{staticClass:"col-md-6 center-el-checkbox mt-4"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.enable_list_product}},[e("el-checkbox",{model:{value:t.form.enable_list_product,callback:function(a){t.$set(t.form,"enable_list_product",a)},expression:"form.enable_list_product"}},[t._v(" Habilitar multiples listas de precios por producto ")]),e("br"),t.errors.enable_list_product?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.enable_list_product[0])}}):t._e()],1)])])]),e("el-collapse-item",{attrs:{name:"2",title:"Entorno del sistema"}},[e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_send_id}},[e("label",{staticClass:"control-label"},[t._v(" SOAP Envio ")]),e("el-select",{model:{value:t.form.soap_send_id,callback:function(a){t.$set(t.form,"soap_send_id",a)},expression:"form.soap_send_id"}},t._l(t.soap_sends,function(a,i){return e("el-option",{key:i,attrs:{label:a.text,value:a.value}})}),1),t.errors.soap_send_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_send_id[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_type_id}},[e("label",{staticClass:"control-label"},[t._v(" SOAP Tipo ")]),e("el-select",{model:{value:t.form.soap_type_id,callback:function(a){t.$set(t.form,"soap_type_id",a)},expression:"form.soap_type_id"}},t._l(t.soap_types,function(a){return e("el-option",{key:a.id,attrs:{label:a.description,value:a.id}})}),1),t.form.soap_send_id=="02"&&t.form.soap_type_id=="01"?e("el-checkbox",{attrs:{label:"Ingresar Usuario"},model:{value:t.toggle,callback:function(a){t.toggle=a},expression:"toggle"}}):t._e(),t.errors.soap_type_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_type_id[0])}}):t._e()],1)])]),t.form.soap_type_id=="02"||t.toggle==!0?[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 mt-2"},[e("h4",{staticClass:"border-bottom"},[t._v(" Usuario Secundario Sunat ")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_username}},[e("label",{staticClass:"control-label"},[t._v(" SOAP Usuario "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("el-input",{model:{value:t.form.soap_username,callback:function(a){t.$set(t.form,"soap_username",a)},expression:"form.soap_username"}}),e("div",{staticClass:"sub-title text-muted"},[e("small",[t._v(" RUC + Usuario. Ejemplo: 01234567890ELUSUARIO ")])]),t.errors.soap_username?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_username[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_password}},[e("label",{staticClass:"control-label"},[t._v(" SOAP Password "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("el-input",{model:{value:t.form.soap_password,callback:function(a){t.$set(t.form,"soap_password",a)},expression:"form.soap_password"}}),t.errors.soap_password?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_password[0])}}):t._e()],1)])])]:t._e(),t.form.soap_send_id=="02"?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_url}},[e("label",{staticClass:"control-label"},[t._v(" SOAP Url ")]),e("el-input",{model:{value:t.form.soap_url,callback:function(a){t.$set(t.form,"soap_url",a)},expression:"form.soap_url"}}),t.errors.soap_url?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_url[0])}}):t._e()],1)])]):t._e(),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.password_certificate}},[e("label",{staticClass:"control-label"},[t._v(" Contraseña certificado ")]),e("el-input",{model:{value:t.form.password_certificate,callback:function(a){t.$set(t.form,"password_certificate",a)},expression:"form.password_certificate"}}),t.errors.password_certificate?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.password_certificate[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.certificate}},[e("label",[t._v(" Certificado pfx ")]),e("el-upload",{ref:"upload",attrs:{action:`/${t.resource}/upload`,data:{type:"certificate"},headers:t.headers,multiple:!1,"on-error":t.errorUpload,"on-success":t.successUpload,"show-file-list":!1}},[e("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[t._v(" Selecciona un archivo ")])],1),t.errors.certificate?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.certificate[0])}}):t._e()],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.form.is_update==!1&&t.certificate_admin,expression:"form.is_update == false && certificate_admin"}],staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Archivo cargado (Administrador) ")]),e("el-input",{attrs:{disabled:!0},model:{value:t.certificate_admin,callback:function(a){t.certificate_admin=a},expression:"certificate_admin"}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.form.is_update==!0,expression:"form.is_update == true"}],staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Archivo cargado (Cliente) "+t._s(t.form.certificate?"(1)":"(0)")+" ")]),e("el-input",{attrs:{disabled:!0},model:{value:t.form.certificate,callback:function(a){t.$set(t.form,"certificate",a)},expression:"form.certificate"}})],1)])])],2),e("el-collapse-item",{attrs:{name:"3",title:"Configuracion de correo"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.smtp_host}},[e("label",{staticClass:"control-label"},[t._v(" Dirección del host de correo ")]),e("el-input",{model:{value:t.form.smtp_host,callback:function(a){t.$set(t.form,"smtp_host",a)},expression:"form.smtp_host"}}),t.errors.smtp_host?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.smtp_host[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.smtp_port}},[e("label",{staticClass:"control-label"},[t._v(" Puerto del host de correo ")]),e("el-input",{model:{value:t.form.smtp_port,callback:function(a){t.$set(t.form,"smtp_port",a)},expression:"form.smtp_port"}}),t.errors.smtp_port?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.smtp_port[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.smtp_user}},[e("label",{staticClass:"control-label"},[t._v(" Nombre de usuario de correo ")]),e("el-input",{model:{value:t.form.smtp_user,callback:function(a){t.$set(t.form,"smtp_user",a)},expression:"form.smtp_user"}}),t.errors.smtp_user?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.smtp_user[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.smtp_password}},[e("label",{staticClass:"control-label"},[t._v(" Contraseña del usuario de correo ")]),e("el-input",{attrs:{dusk:"password",type:"password"},model:{value:t.form.smtp_password,callback:function(a){t.$set(t.form,"smtp_password",a)},expression:"form.smtp_password"}}),t.errors.smtp_password?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.smtp_password[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.smtp_encryption}},[e("label",{staticClass:"control-label"},[t._v(" Encriptación de correo ")]),e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.smtp_encryption,callback:function(a){t.$set(t.form,"smtp_encryption",a)},expression:"form.smtp_encryption"}},[e("el-option",{attrs:{label:"SSL",value:"ssl"}}),e("el-option",{attrs:{label:"TLS",value:"tls"}}),e("el-option",{attrs:{label:"Ninguna",value:""}})],1),t.errors.smtp_encryption?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.smtp_encryption[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group p-t-20"},[e("a",{staticClass:"control-label",attrs:{href:"https://docs.google.com/document/d/1ix2vPsiqSoK9jNAOF2gPjWhNa3BdajU5x8I5aBvEz0o/edit?usp=sharing",target:"_new"}},[t._v(" Para correos Gmail verificar el manual ")])])])])]),e("el-collapse-item",{attrs:{name:"4",title:"Información de contacto"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.client_name}},[e("label",{staticClass:"control-label"},[t._v(" Nombre del cliente ")]),e("el-input",{model:{value:t.form.client_name,callback:function(a){t.$set(t.form,"client_name",a)},expression:"form.client_name"}}),t.errors.client_name?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.client_name[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.contact_email}},[e("label",{staticClass:"control-label"},[t._v(" Correo de contacto ")]),e("el-input",{model:{value:t.form.contact_email,callback:function(a){t.$set(t.form,"contact_email",a)},expression:"form.contact_email"}}),t.errors.contact_email?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.contact_email[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.phone_ws}},[e("label",{staticClass:"control-label"},[t._v(" Nümero de WhatsApp ")]),e("el-input",{model:{value:t.form.phone_ws,callback:function(a){t.$set(t.form,"phone_ws",a)},expression:"form.phone_ws"}}),t.errors.phone_ws?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.phone_ws[0])}}):t._e()],1)])])])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 center-el-checkbox mt-4"},[e("div",{staticClass:"form-group"},[e("el-checkbox",{model:{value:t.form.config_system_env,callback:function(a){t.$set(t.form,"config_system_env",a)},expression:"form.config_system_env"}},[t._v(" ¿ Permitir a la empresa cambiar la configuración de producción ? ")]),e("br")],1)])])],1),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{staticClass:"second-buton",on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v(" Cancelar ")]),e("el-button",{attrs:{loading:t.loading_submit,dusk:"submit","native-type":"submit",type:"primary"}},[t.loading_submit?[t._v(" "+t._s(t.button_text)+" ")]:[t._v(" Guardar ")]],2)],1)])])},yt=[],kt=o(bt,Ct,yt,!1,null,null,null,null);const wt=kt.exports,xt={data(){return{loading_submit:!1,headers:null,resource:"users",errors:{},form:{}}},created(){this.initForm(),this.$http.get(`/${this.resource}/record`).then(s=>{s.data!==""&&(this.form=s.data.data)})},methods:{initForm(){this.errors={},this.form={id:null,name:null,email:null,api_token:null,password:null,password_confirmation:null}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?(this.form.password=null,this.form.password_confirmation=null,this.$message.success(s.data.message)):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})}}};var $t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.name}},[e("label",{staticClass:"control-label"},[t._v("Nombre")]),e("el-input",{model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),t.errors.name?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.name[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.email}},[e("label",{staticClass:"control-label"},[t._v("Correo Electrónico")]),e("el-input",{attrs:{disabled:!0},model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}}),t.errors.email?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.email[0])}}):t._e()],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.password}},[e("label",{staticClass:"control-label"},[t._v("Contraseña")]),e("el-input",{model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}}),t.errors.password?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.password[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.password_confirmation}},[e("label",{staticClass:"control-label"},[t._v("Confirmar Contraseña")]),e("el-input",{model:{value:t.form.password_confirmation,callback:function(a){t.$set(t.form,"password_confirmation",a)},expression:"form.password_confirmation"}}),t.errors.password_confirmation?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.password_confirmation[0])}}):t._e()],1)])])]),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])},Dt=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Datos del Administrador "),t("small",[s._v("Acceso al sistema")])])])}],Pt=o(xt,$t,Dt,!1,null,null,null,null);const St=Pt.exports,Ft={data(){return{loading_submit:!1,resource:"users",errors:{},form:{},showToken:!1}},computed:{displayToken(){if(!this.form.api_token)return"";const s=this.form.api_token;if(this.showToken)return s;{if(s.length<=6)return s;const t=s.slice(0,3),e=s.slice(-3);return`${t}●●●●●●●●${e}`}}},created(){this.initForm(),this.$http.get(`/${this.resource}/record`).then(s=>{s.data!==""&&(this.form=s.data.data)})},methods:{initForm(){this.errors={},this.form={id:null,api_token:null}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}/token`,this.form).then(s=>{s.data.success?(this.form.api_token=s.data.data.api_token,this.$message.success(s.data.message)):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})},toggleToken(){this.showToken=!this.showToken},onCopy(){this.$message.success("Token copiado al portapapeles")}}};var Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.api_token}},[e("label",{staticClass:"control-label"},[t._v("Token")]),e("el-input",{attrs:{disabled:!0,type:"text"},model:{value:t.displayToken,callback:function(a){t.displayToken=a},expression:"displayToken"}}),t.errors.api_token?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.api_token[0])}}):t._e()],1)])])]),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{attrs:{type:"primary",disabled:!t.form.api_token},on:{click:t.toggleToken}},[t._v(" "+t._s(t.showToken?"Ocultar Token":"Mostrar Token")+" ")]),e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.form.api_token,expression:"form.api_token",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"primary",disabled:!t.form.api_token}},[t._v(" Copiar Token ")])],1)])])])},It=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Token de Usuario")])])}],Et=o(Ft,Mt,It,!1,null,null,null,null);const At=Et.exports,Lt={props:["showDialog","recordId"],data(){return{loading_submit:!1,headers:headers_token,titleDialog:null,resource:"items",errors:{},form:{}}},created(){this.initForm()},methods:{initForm(){this.errors={},this.form={id:null,certificate:null,password:null}},create(){this.titleDialog="Generar Certificado PEM"},clickUpload(){this.$refs.upload.submit()},close(){this.$emit("update:showDialog",!1),this.initForm()},successUpload(s,t,e){s.success?(this.$message.success(s.message),this.$eventHub.$emit("reloadData"),this.close()):this.$message({message:s.message,type:"error"})},errorUpload(s){console.log(s)}}};var Rt=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"certificate-form",attrs:{title:t.titleDialog,visible:t.showDialog},on:{close:t.close,open:t.create}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.password}},[e("label",{staticClass:"control-label"},[t._v("Contraseña")]),e("el-input",{model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}}),t.errors.password?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.password[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.certificate}},[e("label",{staticClass:"control-label"},[t._v("Certificado pfx")]),e("el-upload",{ref:"upload",attrs:{headers:t.headers,data:{password:t.form.password},action:"/certificates/uploads","show-file-list":!1,"auto-upload":!1,multiple:!1,"on-error":t.errorUpload,"on-success":t.successUpload}},[e("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[t._v("Selecciona un archivo")])],1),t.errors.certificate?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.certificate[0])}}):t._e()],1)])]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-12 text-right"},[e("el-button",{on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cancelar")]),e("el-button",{attrs:{type:"primary",loading:t.loading_submit},on:{click:function(a){return a.preventDefault(),t.clickUpload.apply(null,arguments)}}},[t._v("Aceptar")])],1)])])])},Tt=[],Bt=o(Lt,Rt,Tt,!1,null,null,null,null);const Ut=Bt.exports,qt={mixins:[c],components:{CertificatesForm:Ut},data(){return{showDialog:!1,resource:"certificates",recordId:null,record:{},soap_username:null,soap_password:null}},created(){this.$eventHub.$on("reloadData",()=>{this.getData()}),this.getData()},methods:{clickSaveSoapUser(){let s=this.soap_username,t=this.soap_password;this.$http.post(`${this.resource}/saveSoapUser`,{soap_username:s,soap_password:t}).then(e=>{e.data.success?this.$message.success(e.data.message):this.$message.error(e.data.message)}).catch(e=>{this.$message.error("Sucedio un error.")}).then(()=>{})},getData(){this.$http.get(`/${this.resource}/record`).then(s=>{this.record=s.data.certificate,this.soap_username=s.data.soap_username,this.soap_password=s.data.soap_password})},clickCreate(){this.showDialog=!0},clickDelete(){this.destroy(`/${this.resource}`).then(()=>this.$eventHub.$emit("reloadData"))}}};var Nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[t._m(1),t.record?e("div",{staticClass:"table-responsive pt-2"},[e("table",{staticClass:"table"},[t._m(2),e("tbody",[e("tr",[e("td",[t._v(t._s(t.record))]),e("td",{staticClass:"text-end"},[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.clickDelete.apply(null,arguments)}}},[t._v("Eliminar")])])])])])]):e("div",{staticClass:"row pt-2"},[e("div",{staticClass:"col-md-12"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickCreate}},[t._v("Subir Certificado .pfx")])],1)]),t._m(3),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 py-2"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Usuario")]),e("el-input",{model:{value:t.soap_username,callback:function(a){t.soap_username=a},expression:"soap_username"}}),t._m(4)],1)]),e("div",{staticClass:"col-md-6 py-2"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Contraseña")]),e("el-input",{model:{value:t.soap_password,callback:function(a){t.soap_password=a},expression:"soap_password"}})],1)]),e("div",{staticClass:"col-md-12 py-2"},[e("div",{staticClass:"form-group"},[e("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(a){return a.preventDefault(),t.clickSaveSoapUser.apply(null,arguments)}}},[t._v("Guardar")])],1)])])]),e("certificates-form",{attrs:{showDialog:t.showDialog,recordId:t.recordId},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}})],1)},zt=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Certificado PSE - Datos Sunat")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"title border-bottom pt-0"},[t("h4",[s._v("Certificado")])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("Archivo")]),t("th",{staticClass:"text-end"},[s._v("Acciones")])])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"title border-bottom"},[t("h4",[s._v("Usuario Secundario SUNAT")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"sub-title text-muted"},[t("small",[s._v("RUC + Usuario. Ejemplo: 01234567890ELUSUARIO")])])}],Ot=o(qt,Nt,zt,!1,null,null,null,null);const jt=Ot.exports,Ht={data(){return{loading_submit:!1,headers:headers_token,resource:"companies",errors:{},form:{},soap_sends:[],soap_types:[],toggle:!1,soap_sends:[{value:"01",text:"Sunat"},{value:"02",text:"Ose"}],soap_types:[{id:"01",description:"Demo"},{id:"02",description:"Producción"}]}},async created(){await this.initForm(),await this.$http.get(`/${this.resource}/record`).then(s=>{s.data!==""&&(this.form=s.data.data)})},methods:{initForm(){this.errors={},this.form={id:null,certificate:"",soap_send_id:"01",soap_type_id:"01",soap_username:null,soap_password:null,soap_url:null}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})}}};var Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[t._m(1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_send_id}},[e("label",{staticClass:"control-label"},[t._v("SOAP Envio")]),e("el-select",{model:{value:t.form.soap_send_id,callback:function(a){t.$set(t.form,"soap_send_id",a)},expression:"form.soap_send_id"}},t._l(t.soap_sends,function(a,i){return e("el-option",{key:i,attrs:{value:a.value,label:a.text}})}),1),t.errors.soap_send_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_send_id[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_type_id}},[e("label",{staticClass:"control-label"},[t._v("SOAP Tipo")]),e("el-select",{model:{value:t.form.soap_type_id,callback:function(a){t.$set(t.form,"soap_type_id",a)},expression:"form.soap_type_id"}},t._l(t.soap_types,function(a){return e("el-option",{key:a.id,attrs:{value:a.id,label:a.description}})}),1),t.form.soap_send_id=="02"&&t.form.soap_type_id=="01"?e("el-checkbox",{attrs:{label:"Ingresar Usuario"},model:{value:t.toggle,callback:function(a){t.toggle=a},expression:"toggle"}}):t._e(),t.errors.soap_type_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_type_id[0])}}):t._e()],1)])]),t.form.soap_type_id=="02"||t.toggle==!0?[t._m(2),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_username}},[t._m(3),e("el-input",{model:{value:t.form.soap_username,callback:function(a){t.$set(t.form,"soap_username",a)},expression:"form.soap_username"}}),t._m(4),t.errors.soap_username?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_username[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_password}},[t._m(5),e("el-input",{model:{value:t.form.soap_password,callback:function(a){t.$set(t.form,"soap_password",a)},expression:"form.soap_password"}}),t.errors.soap_password?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_password[0])}}):t._e()],1)])])]:t._e(),t.form.soap_send_id=="02"?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.soap_url}},[e("label",{staticClass:"control-label"},[t._v("SOAP Url")]),e("el-input",{model:{value:t.form.soap_url,callback:function(a){t.$set(t.form,"soap_url",a)},expression:"form.soap_url"}}),t.errors.soap_url?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.soap_url[0])}}):t._e()],1)])]):t._e()],2),e("div",{staticClass:"form-actions text-right pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])},Gt=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info"},[t("h3",{staticClass:"my-0"},[s._v("Datos de la Empresa")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 mt-2"},[t("h4",{staticClass:"border-bottom"},[s._v("Entorno del sistema")])])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 mt-2"},[t("h4",{staticClass:"border-bottom"},[s._v("Usuario Secundario Sunat")])])])},function(){var s=this,t=s._self._c;return t("label",{staticClass:"control-label"},[s._v("SOAP Usuario "),t("span",{staticClass:"text-danger"},[s._v("*")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"sub-title text-muted"},[t("small",[s._v("RUC + Usuario. Ejemplo: 01234567890ELUSUARIO")])])},function(){var s=this,t=s._self._c;return t("label",{staticClass:"control-label"},[s._v("SOAP Password "),t("span",{staticClass:"text-danger"},[s._v("*")])])}],Yt=o(Ht,Vt,Gt,!1,null,null,null,null);const Qt=Yt.exports,Zt={props:["showDialog","recordId"],data(){return{loading_submit:!1,titleDialog:null,resource:"accounting",errors:{},form:{}}},created(){this.initForm()},methods:{create(){this.titleDialog="Exportar formatos contables",this.form.id=this.recordId},initForm(){this.errors={},this.form={id:null,month:moment().format("YYYY-MM"),type:"concar"}},clickDownload(){this.loading_submit=!0;let s=u.stringify({...this.form});window.open(`/${this.resource}/download?${s}`,"_blank"),this.loading_submit=!1},close(){this.$emit("update:showDialog",!1),this.initForm()}}};var Kt=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"certificate-form",attrs:{title:t.titleDialog,visible:t.showDialog},on:{close:t.close,open:t.create}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("label",[t._v("Periodo")]),e("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",format:"MM/yyyy",clearable:!1},model:{value:t.form.month,callback:function(a){t.$set(t.form,"month",a)},expression:"form.month"}})],1),e("div",{staticClass:"col-md-6"},[e("label",[t._v("Exportar a")]),e("el-select",{model:{value:t.form.type,callback:function(a){t.$set(t.form,"type",a)},expression:"form.type"}},[e("el-option",{key:"concar",attrs:{value:"concar",label:"CONCAR"}}),e("el-option",{key:"siscont",attrs:{value:"siscont",label:"SISCONT"}}),e("el-option",{key:"foxcont",attrs:{value:"foxcont",label:"FOXCONT"}}),e("el-option",{key:"contasis",attrs:{value:"contasis",label:"CONTASIS"}})],1)],1)]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-12 text-end"},[e("el-button",{on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cancelar")]),e("el-button",{attrs:{type:"primary",loading:t.loading_submit},on:{click:function(a){return a.preventDefault(),t.clickDownload.apply(null,arguments)}}},[t._v("Generar")])],1)])])])},Wt=[],Jt=o(Zt,Kt,Wt,!1,null,null,null,null);const Xt=Jt.exports,te={components:{AccountingForm:Xt},data(){return{showDialog:!1,resource:"accounting",recordId:null,record:{},records:[]}},created(){this.$eventHub.$on("reloadData",()=>{this.getData()}),this.getData()},methods:{getData(){this.$http.get(`/${this.resource}/records`).then(s=>{this.records=s.data.data})},clickCreate(s){this.recordId=s,this.showDialog=!0}}};var ee=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.records,function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),e("td",[t._v(t._s(a.hostname))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.number))]),e("td",[t._v(t._s(a.email))]),e("td",[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-primary",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickCreate(a.id)}}},[t._v(" Exportar")])])])}),0)])])]),e("accounting-form",{attrs:{showDialog:t.showDialog,recordId:t.recordId},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}})],1)},se=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Clientes")])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("#")]),t("th",[s._v("Dominio")]),t("th",[s._v("Nombre")]),t("th",[s._v("RUC")]),t("th",[s._v("Correo")]),t("th",[s._v("Acciones")])])])}],ae=o(te,ee,se,!1,null,null,null,null);const ie=ae.exports,re={props:["showDialog","recordId"],data(){return{loading_submit:!1,titleDialog:null,resource:"multi-users",errors:{},form:{},clients:[],users:[]}},async created(){await this.initForm(),await this.getTables()},methods:{changeUser(){this.form.user={..._.find(this.users,{composed_id:this.form.composed_id})}},async getTables(){await this.$http.get(`/${this.resource}/tables`).then(s=>{this.clients=s.data.clients,this.users=s.data.users})},initForm(){this.errors={},this.form={destination_client_id:null,composed_id:null,user:{}}},create(){this.titleDialog="Nuevo acceso"},async submit(){this.loading_submit=!0,await this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?(this.$message.success(s.data.message),this.$eventHub.$emit("reloadData"),this.getTables(),this.close()):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).finally(()=>{this.loading_submit=!1})},close(){this.$emit("update:showDialog",!1),this.initForm()}}};var oe=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.titleDialog,visible:t.showDialog,"append-to-body":!0},on:{close:t.close,open:t.create}},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.composed_id}},[e("label",{staticClass:"control-label"},[t._v("Usuario")]),e("el-select",{attrs:{filterable:""},on:{change:t.changeUser},model:{value:t.form.composed_id,callback:function(a){t.$set(t.form,"composed_id",a)},expression:"form.composed_id"}},[t._l(t.users,function(a){return[e("el-tooltip",{key:a.composed_id,attrs:{content:`Empresa origen: ${a.client_full_name}`,placement:"left"}},[e("el-option",{key:a.composed_id,attrs:{label:a.full_name,value:a.composed_id}})],1)]})],2),t.errors.composed_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.composed_id[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.destination_client_id}},[e("label",{staticClass:"control-label"},[t._v("Empresa destino")]),e("el-select",{attrs:{filterable:""},model:{value:t.form.destination_client_id,callback:function(a){t.$set(t.form,"destination_client_id",a)},expression:"form.destination_client_id"}},t._l(t.clients,function(a){return e("el-option",{key:a.id,attrs:{label:a.full_name,value:a.id}})}),1),t.errors.destination_client_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.destination_client_id[0])}}):t._e()],1)])])]),e("div",{staticClass:"form-actions text-right mt-4"},[e("el-button",{staticClass:"second-buton",on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cancelar")]),e("el-button",{attrs:{loading:t.loading_submit,"native-type":"submit",type:"primary"}},[t._v("Agregar ")])],1)])])},le=[],ne=o(re,oe,le,!1,null,null,null,null);const ce=ne.exports,de={mixins:[c],components:{MultiUserForm:ce,DataTable:y},data(){return{title:null,showDialog:!1,resource:"multi-users",recordId:null}},created(){this.title="Multi Usuarios"},computed:{},methods:{clickCreate(s=null){this.recordId=s,this.showDialog=!0},clickDelete(s){this.destroy(`/${this.resource}/${s}`).then(()=>console.log(s)).finally(()=>this.$eventHub.$emit("reloadData"))}}};var ue=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"page-header pe-0"},[e("h2",[e("a",{attrs:{href:"/dashboard"}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-users-group",staticStyle:{"margin-top":"-5px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}}),e("path",{attrs:{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1"}}),e("path",{attrs:{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}}),e("path",{attrs:{d:"M17 10h2a2 2 0 0 1 2 2v1"}}),e("path",{attrs:{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}}),e("path",{attrs:{d:"M3 13v-1a2 2 0 0 1 2 -2h2"}})])])]),e("ol",{staticClass:"breadcrumbs"},[e("li",{staticClass:"active"},[e("span",[t._v(t._s(t.title))])])]),e("div",{staticClass:"right-wrapper pull-right"},[e("button",{staticClass:"btn btn-custom btn-sm mt-2 me-2",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.clickCreate()}}},[e("i",{staticClass:"fa fa-plus-circle"}),t._v(" Agregar ")])])]),e("div",{staticClass:"card mb-0"},[e("div",{staticClass:"card-body"},[e("data-table",{attrs:{resource:t.resource},scopedSlots:t._u([{key:"default",fn:function({index:a,row:i}){return e("tr",{},[e("td",[t._v(t._s(a))]),e("td",[t._v(" "+t._s(i.client_origin_full_name)+" "),e("br"),e("small",[e("b",[t._v(" "+t._s(i.origin_hostname)+" ")])])]),e("td",[t._v(" "+t._s(i.client_destination_full_name)+" "),e("br"),e("small",[e("b",[t._v(" "+t._s(i.destination_hostname)+" ")])])]),e("td",{staticClass:"text-center"},[t._v(t._s(i.user_full_name))]),e("td",{staticClass:"text-center"},[t._v(t._s(i.description_type))]),e("td",{staticClass:"text-end"},[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-danger",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickDelete(i.id)}}},[t._v("Eliminar")])])])}}])},[e("tr",{attrs:{slot:"heading"},slot:"heading"},[e("th",[t._v("#")]),e("th",[t._v("Empresa Origen")]),e("th",[t._v("Empresa Destino")]),e("th",{staticClass:"text-center"},[t._v("Usuario")]),e("th",{staticClass:"text-center"},[t._v("Perfil")]),e("th",{staticClass:"text-end"},[t._v("Acciones")])])])],1),e("multi-user-form",{attrs:{recordId:t.recordId,showDialog:t.showDialog},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}})],1)])},me=[],_e=o(de,ue,me,!1,null,null,null,null);const pe=_e.exports;const he={data(){return{resource:"massive-invoice",loading:!1,showUploadModal:!1,showFilterModal:!1,fileSelected:!1,selectedFileName:"",processing:!1,selectedFile:null,records:[],progressPercentage:0,filters:{month:"",date:"",serie_numero:"",receptor:"",emisor:""},pagination:{currentPage:1,perPage:10},paginationInfo:{total:0,from:0,to:0}}},created(){this.getRecords()},methods:{async getRecords(){this.loading=!0;try{const s={page:this.pagination.currentPage,per_page:this.pagination.perPage,month:this.filters.month,date:this.filters.date,serie_numero:this.filters.serie_numero,receptor:this.filters.receptor,emisor:this.filters.emisor},t=await this.$http.get(`/${this.resource}/records`,{params:s});t.data.success&&(this.records=t.data.data.data,this.paginationInfo={total:t.data.data.total,from:t.data.data.from,to:t.data.data.to})}catch(s){console.error(s),this.$message.error("Error al cargar registros")}finally{this.loading=!1}},formatDate(s){return s?new Date(s).toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"}):""},getTipoDoc(s){return{"01":"FACTURA ELECTRÓNICA","03":"BOLETA DE VENTA ELECTRÓNICA"}[s]||s},getStatusClass(s){const t=s.toLowerCase();return{badge:!0,"badge-success":["aceptado","procesado"].includes(t),"badge-dark":["rechazado","error"].includes(t),"badge-secondary":["registrado","pendiente"].includes(t),"badge-infos":["enviado"].includes(t)}},downloadFormat(){window.open(`/${this.resource}/download-format`,"_blank")},handleFileUpload(s){const t=s.target.files[0];t&&(this.selectedFile=t,this.selectedFileName=t.name,this.fileSelected=!0)},format(s){return s===100?"Completado":`${s}%`},async processFile(){if(!this.selectedFile)return;this.processing=!0;const s=new FormData;s.append("file",this.selectedFile);try{const t=await this.$http.post(`/${this.resource}/upload`,s);if(!t.data.success)throw new Error(t.data.message);this.progressPercentage=50;const e=await this.$http.post(`/${this.resource}/process`,{documents:t.data.data});if(e.data.success)this.progressPercentage=100,await this.$message({message:"Facturas procesadas correctamente",type:"success"}),this.closeModal(),this.getRecords();else throw new Error(e.data.message)}catch(t){console.error("Error:",t);const e=t.response&&t.response.data?t.response.data.message:t.message||"Error al procesar el archivo";this.$message.error(e)}finally{this.processing=!1,this.progressPercentage=0}},async downloadFile(s,t){try{window.open(`/${this.resource}/download/${s}/${t}`,"_blank")}catch(e){console.error(e),this.$message.error("Error al descargar archivo")}},closeModal(){this.showUploadModal=!1,this.showFilterModal=!1,this.fileSelected=!1,this.selectedFileName="",this.selectedFile=null,this.processing=!1,this.progressPercentage=0},onFilterChange(){this.pagination.currentPage=1,this.getRecords()},onPageChange(s){this.pagination.currentPage=s,this.getRecords()},onPerPageChange(){this.pagination.currentPage=1,this.getRecords()},clearFilters(){this.filters={month:"",date:"",serie_numero:"",receptor:"",emisor:""},this.onFilterChange()},applyFilters(){this.showFilterModal=!1,this.onFilterChange()},extractName(s){if(!s)return"";const t=s.split(" - ");return t.length>1?t[1]:s},extractRuc(s){return s&&s.split(" - ")[0]||""}}};var fe=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"page-header"},[e("h2",{staticClass:"text-white"},[e("a",{attrs:{href:"/dashboard"}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-files",staticStyle:{"margin-top":"-5px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M15 3v4a1 1 0 0 0 1 1h4"}}),e("path",{attrs:{d:"M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z"}}),e("path",{attrs:{d:"M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2"}})])])]),t._m(0)]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header bg-teal"},[e("div",[e("button",{staticClass:"btn btn-primary me-2 float-right",on:{click:function(a){t.showUploadModal=!0}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-upload",staticStyle:{"margin-top":"-3px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}}),e("path",{attrs:{d:"M7 9l5 -5l5 5"}}),e("path",{attrs:{d:"M12 4l0 12"}})]),t._v(" Subir Facturas ")]),e("button",{staticClass:"btn btn-info me-2 float-right",on:{click:function(a){t.showFilterModal=!0}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-filter",staticStyle:{"margin-top":"-3px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z"}})]),t._v(" Filtros ")])])]),e("div",{staticClass:"card-body"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-responsive"},[e("table",{staticClass:"table table-striped table-hover"},[t._m(1),e("tbody",t._l(t.records,function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(t.formatDate(a.fecha_emision)))]),e("td",[e("div",{staticClass:"nombre-ruc"},[e("span",[t._v(t._s(t.extractName(a.ruc_emisor)))]),e("small",[t._v(t._s(t.extractRuc(a.ruc_emisor)))])])]),e("td",[e("div",{staticClass:"nombre-ruc"},[e("span",[t._v(t._s(t.extractName(a.ruc)))]),e("small",[t._v(t._s(t.extractRuc(a.ruc)))])])]),e("td",[e("p",{staticClass:"mb-0"},[t._v(t._s(a.serie_comprobante))]),e("small",[t._v(t._s(t.getTipoDoc(a.tipo_comprobante)))])]),e("td",[e("span",{class:t.getStatusClass(a.estado_sunat||a.status)},[t._v(" "+t._s(a.estado_sunat||a.status)+" ")])]),e("td",[t._v("S/ "+t._s(a.total_gravado))]),e("td",[t._v("S/ "+t._s(a.total_igv))]),e("td",[t._v("S/ "+t._s(a.total_venta))]),e("td",[e("button",{staticClass:"btn btn-sm btn-info me-1",attrs:{title:"Descargar PDF"},on:{click:function(i){return t.downloadFile(a.id,"pdf")}}},[e("i",{staticClass:"fas fa-file-pdf"})]),e("button",{staticClass:"btn btn-sm btn-secondary",attrs:{title:"Descargar XML"},on:{click:function(i){return t.downloadFile(a.id,"xml")}}},[e("i",{staticClass:"fas fa-file-code"})])])])}),0)]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"d-flex align-items-center"},[e("el-select",{staticClass:"pagination-select",attrs:{size:"small"},on:{change:t.onPerPageChange},model:{value:t.pagination.perPage,callback:function(a){t.$set(t.pagination,"perPage",a)},expression:"pagination.perPage"}},[e("el-option",{attrs:{value:10,label:"10"}}),e("el-option",{attrs:{value:25,label:"25"}}),e("el-option",{attrs:{value:50,label:"50"}}),e("el-option",{attrs:{value:100,label:"100"}})],1),e("span",{staticClass:"ms-3"},[t._v(" Mostrando "+t._s(t.paginationInfo.from)+" - "+t._s(t.paginationInfo.to)+" de "+t._s(t.paginationInfo.total)+" registros ")])],1)]),e("div",{staticClass:"col-md-6"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.perPage,total:t.paginationInfo.total,layout:"prev, pager, next"},on:{"current-change":t.onPageChange,"update:currentPage":function(a){return t.$set(t.pagination,"currentPage",a)},"update:current-page":function(a){return t.$set(t.pagination,"currentPage",a)}}})],1)])])])]),e("el-dialog",{attrs:{title:"Filtros de Búsqueda",visible:t.showFilterModal,width:"500px"},on:{"update:visible":function(a){t.showFilterModal=a}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 mb-3"},[e("label",[t._v("Mes:")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"month",format:"MM/yyyy","value-format":"yyyy-MM",placeholder:"Seleccione mes"},model:{value:t.filters.month,callback:function(a){t.$set(t.filters,"month",a)},expression:"filters.month"}})],1),e("div",{staticClass:"col-md-12 mb-3"},[e("label",[t._v("Fecha Específica:")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd",placeholder:"Seleccione fecha"},model:{value:t.filters.date,callback:function(a){t.$set(t.filters,"date",a)},expression:"filters.date"}})],1),e("div",{staticClass:"col-md-12 mb-3"},[e("label",[t._v("Emisor:")]),e("el-input",{attrs:{placeholder:"Ingrese RUC o nombre del emisor","prefix-icon":"el-icon-office-building"},model:{value:t.filters.emisor,callback:function(a){t.$set(t.filters,"emisor",a)},expression:"filters.emisor"}})],1),e("div",{staticClass:"col-md-12 mb-3"},[e("label",[t._v("Número de Factura:")]),e("el-input",{attrs:{placeholder:"Ingrese número de factura","prefix-icon":"el-icon-document"},model:{value:t.filters.serie_numero,callback:function(a){t.$set(t.filters,"serie_numero",a)},expression:"filters.serie_numero"}})],1),e("div",{staticClass:"col-md-12"},[e("label",[t._v("RUC/DNI Receptor:")]),e("el-input",{attrs:{placeholder:"Ingrese RUC o DNI","prefix-icon":"el-icon-user"},model:{value:t.filters.receptor,callback:function(a){t.$set(t.filters,"receptor",a)},expression:"filters.receptor"}})],1)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.clearFilters}},[t._v("Limpiar")]),e("el-button",{attrs:{type:"primary"},on:{click:t.applyFilters}},[t._v("Aplicar Filtros")])],1)]),e("el-dialog",{attrs:{title:"Subir Facturas Masivas",visible:t.showUploadModal,width:"500px","close-on-click-modal":!1,"before-close":t.closeModal},on:{"update:visible":function(a){t.showUploadModal=a}}},[e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary mb-4 w-100",on:{click:t.downloadFormat}},[e("i",{staticClass:"fas fa-download"}),t._v(" Descargar Formato Excel ")]),t.fileSelected?t._e():e("div",{staticClass:"upload-area p-4 border rounded"},[e("input",{ref:"fileInput",staticClass:"d-none",attrs:{type:"file",accept:".xlsx,.xls"},on:{change:t.handleFileUpload}}),e("button",{staticClass:"btn btn-outline-primary w-100",on:{click:function(a){return t.$refs.fileInput.click()}}},[e("i",{staticClass:"fas fa-file-excel"}),t._v(" Seleccionar Archivo Excel ")])]),t.fileSelected?e("div",{staticClass:"mt-3"},[e("p",{staticClass:"mb-2"},[e("i",{staticClass:"fas fa-file-excel text-success"}),t._v(" "+t._s(t.selectedFileName)+" ")]),e("button",{staticClass:"btn btn-success",attrs:{disabled:t.processing},on:{click:t.processFile}},[t.processing?e("i",{staticClass:"fas fa-cog fa-spin"}):t._e(),t._v(" "+t._s(t.processing?"Procesando facturas...":"Procesar Facturas")+" ")])]):t._e(),t.processing?e("el-progress",{staticClass:"mt-3",attrs:{percentage:t.progressPercentage,format:t.format}}):t._e()],1)])],1)},ve=[function(){var s=this,t=s._self._c;return t("ol",{staticClass:"breadcrumbs"},[t("li",{staticClass:"active"},[t("span",{staticClass:"text-white"},[s._v("Facturas Masivas")])])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("Emisión")]),t("th",[s._v("Emisor")]),t("th",[s._v("Cliente")]),t("th",[s._v("Número")]),t("th",[s._v("Estado")]),t("th",[s._v("T.Gravado")]),t("th",[s._v("T.IGV")]),t("th",[s._v("Total")]),t("th",[s._v("Acciones")])])])}],ge=o(he,fe,ve,!1,null,null,null,null);const be=ge.exports,Ce={data(){return{infostatus:!1,infotextwait:"",infotext:"",headers:null,resource:"auto-update",errors:{},form:{},loading_submit:!1,loading_submit_migrations:!1,exec_migration:!1,version:"",changelog:"",content:{status:!1},branch:{name:"",percent:1,error:"",status:""},pull:{error:"",status:"",content:"",updated:""},artisan:{error:"",status:"",migrate:{error:"",status:!1,content:""},tenancy_migrate:{error:"",status:!1,content:""},clear:{error:"",status:!1,content:""}},composer:{install:{error:"",status:!1,content:""},update:{error:"",status:!1,content:""}}}},created(){this.getVersion(),this.getChangelog()},methods:{messajeOk(s){this.infostatus=!0,this.infotextwait="Por favor espere",this.infotext=s,this.$message.success(this.infotext)},messajeFail(s){this.infostatus=!0,this.infotextwait="Ocurrió un error",this.infotext=s,this.$message.error(this.infotext)},hideInfo(){this.infostatus=!1,this.infotextwait="",this.infotext=""},async start(){this.loading_submit=!0,this.infostatus=!0,this.messajeOk("Se ha iniciado el proceso de actualización"),this.initContent(),this.content.status=!0,this.content.step="updating",await this.getBranch()},initContent(){this.content.status=!1,this.content.step="",this.branch.name="",this.branch.percent=1,this.branch.error="",this.branch.status=!1,this.pull.error="",this.pull.status=!1,this.pull.updated=!1,this.artisan.error="",this.artisan.status=!1,this.artisan.content="",this.artisan.migrate,this.artisan.migrate.error="",this.artisan.migrate.status=!1,this.artisan.migrate.content="",this.artisan.tenancy_migrate.error="",this.artisan.tenancy_migrate.status=!1,this.artisan.tenancy_migrate.content="",this.artisan.clear.error="",this.artisan.clear.status=!1,this.artisan.clear.content="",this.composer.install.error="",this.composer.install.status=!1,this.composer.install.content="",this.composer.update.error="",this.composer.update.status=!1,this.composer.update.content=""},getVersion(){this.$http.get(`/${this.resource}/version`).then(s=>{s.data!==""&&(this.version=s.data)}).catch(s=>{s.response.status!==200?this.version.error=s.response.data.message:console.log(s)})},getChangelog(){this.$http.get(`/${this.resource}/changelog`).then(s=>{s.data!==""&&(this.changelog=s.data)}).catch(s=>{s.response.status!==200?this.changelog.error=s.response.data.message:console.log(s)})},getBranch(){this.branch.percent=40,this.messajeOk("Obteniendo información de la rama"),this.$http.get(`/${this.resource}/branch`).then(s=>{this.hideInfo(),this.branch.percent=70,s.data!==""&&(this.branch.name=s.data,this.messajeOk("Se ha Obteniendo la información de la rama "+this.branch.name),this.branch.percent=100,s.status===200&&(this.branch.status="success"),this.execPull())}).catch(s=>{s.response.status!==200?(this.branch.percent=0,this.branch.error=s.response.data.message,this.branch.status="false"):console.log(s),this.messajeFail("Ocurrió un error, no se puede continuar")})},execPull(){this.messajeOk("Se están descargando los datos"),this.$http.get(`/${this.resource}/pull/${this.branch.name}`).then(s=>{if(this.hideInfo(),s.data!==""){this.pull.content=s.data,this.pull.percent=100,s.status===200&&(this.pull.status="success");let t=this.pull.content;t.includes("Already up to date.")===!0|t.includes("Already up-to-date.")===!0?(this.messajeOk("Todo esta correcto"),this.hideInfo(),this.loading_submit=!1,this.pull.updated=!0):this.execComposer()}}).catch(s=>{this.pull.percent=0,this.pull.error="no ha podido finalizar",this.pull.status="false",console.log(s),this.messajeFail("No se ha podido descargar los datos")}).finally(()=>{})},execComposer(){this.messajeOk("Se están instalando dependencias Composer"),this.$http.get(`/${this.resource}/composer/install`).then(s=>{this.hideInfo(),s.data!==""&&(this.composer.install.content=s.data,this.composer.install.percent=100,s.status===200&&(this.messajeOk("Se ha ejecutado la instalación de dependecias composer"),this.composer.install.status="success",this.execArtisanMigrate()))}).catch(s=>{s.response.status!==200?(this.composer.install.percent=0,this.composer.install.error=s.response.data.message,this.composer.install.status="false"):console.log(s),s!==void 0&&s.response!==void 0&&s.response.status!==void 0&&s.response.status===504?this.execArtisanMigrate():this.messajeFail("Ha ocurrido un error al instalar las dependencias Composer")}),this.loading_submit=!1},execArtisanMigrate(){this.messajeOk("Se están ejecutando las migraciones"),this.$http.get(`/${this.resource}/artisan/migrate`).then(s=>{this.hideInfo(),s.data!==""&&(this.artisan.migrate.content=s.data,this.artisan.migrate.percent=100,s.status===200&&(this.artisan.migrate.status="success",this.messajeOk("Se han ejecutando las migraciones"),this.execArtisanMigrateTenant()))}).catch(s=>{s.response.status!==200?(this.artisan.migrate.percent=0,this.artisan.migrate.error=s.response.data.message,this.artisan.migrate.status="false"):console.log(s),this.messajeFail("Ocurrió un error al ejecutar las migraciones")})},execArtisanMigrateTenant(){this.messajeOk("Se están ejecutando las migraciones de los tenant"),this.$http.get(`/${this.resource}/artisan/migrate/tenant`).then(s=>{this.hideInfo(),s.data!==""&&(this.artisan.tenancy_migrate.content=s.data,this.artisan.tenancy_migrate.percent=100,s.status===200&&(this.artisan.tenancy_migrate.status="success",this.messajeOk("Se han ejecutando las migraciones de los tenant"),this.execArtisanClear()))}).catch(s=>{this.artisan.tenancy_migrate.percent=0,this.artisan.tenancy_migrate.error=s,this.artisan.tenancy_migrate.status=!1,console.log(s),this.messajeFail("Ocurrió un error al ejecutar las migraciones de los tenant")})},execArtisanClear(){this.messajeOk("Se esta limpiando los procesos artisan"),this.$http.get(`/${this.resource}/artisan/clear`).then(s=>{this.hideInfo(),s.data!==""&&(this.artisan.clear.content=s.data,this.artisan.clear.percent=100,s.status===200&&(this.messajeOk("Se han limpiado los procesos artisan"),this.artisan.clear.status="success"),this.hideInfo())}).catch(s=>{this.artisan.clear.percent=0,this.artisan.clear.error=s,this.artisan.clear.status=!1,console.log(s),this.messajeFail("Ocurrió un error al limpiar los procesos artisan")})},execMigrations(){this.infostatus=!0,this.infotextwait="Por favor espere",this.loading_submit_migrations=!0,this.loading_submit=!0,this.initContent(),this.content.status=!0,this.content.step="updating",this.execArtisanMigrate(),this.loading_submit_migrations=!1,this.loading_submit=!1}}};var ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-title text-center"},[e("i",{staticClass:"fab fa-gitlab",staticStyle:{color:"rgb(41, 41, 97)"}}),e("p",{},[t._v(" Versión:"+t._s(t.version)+" ")]),e("el-button",{staticClass:"btn btn-sm btn-primary pb-1",attrs:{type:"button",loading:t.loading_submit,disabled:t.exec_migration},on:{click:function(a){return a.preventDefault(),t.start()}}},[t._v("Iniciar proceso")]),e("el-button",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button",disabled:!t.exec_migration,loading:t.loading_submit_migrations},on:{click:function(a){return a.preventDefault(),t.execMigrations()}}},[t._v("Ejecutar migraciones")]),e("div",{staticClass:"text-right"},[e("el-checkbox",{model:{value:t.exec_migration,callback:function(a){t.exec_migration=a},expression:"exec_migration"}},[t._v("Ejecutar migraciones")]),e("br")],1)],1),t.infostatus?e("div",{staticClass:"card-title text-center"},[t._v(" "+t._s(t.infotextwait)+" ")]):t._e(),t.infostatus?e("div",{staticClass:"card-title text-center"},[t._v(" "+t._s(t.infotext)+" ")]):t._e(),t.content.status==!0&&t.content.step=="updating"?e("div",{attrs:{id:"response-content"}},[t.branch.status=="success"?e("div",[e("h3",[t._v("Obteniendo rama del repositorio")]),e("el-progress",{attrs:{percentage:t.branch.percent}}),e("h4",[t._v("Rama actual: "),e("strong",[t._v(t._s(t.branch.name))])]),e("span",{staticClass:"text-danger"},[t._v(t._s(t.branch.error))]),e("br"),e("hr"),e("h3",[t._v("Descargando actualización")]),e("h4",[t._v("Log: "+t._s(t.pull.content))]),e("span",{staticClass:"text-danger"},[t._v(t._s(t.pull.error))]),e("br")],1):t._e(),t.artisan.migrate.status=="success"?e("div",[e("hr"),e("h3",[t._v("Corriendo migraciones en administrador")]),e("h4",[t._v("Log: "+t._s(t.artisan.migrate.content))]),e("span",{staticClass:"text-danger"},[t._v(t._s(t.artisan.migrate.error))]),e("br")]):t._e(),t.artisan.tenancy_migrate.status=="success"?e("div",[e("hr"),e("h3",[t._v("Corriendo migraciones en cliente")]),e("h4",[t._v("Log: "+t._s(t.artisan.tenancy_migrate.content))]),e("span",{staticClass:"text-danger"},[t._v(t._s(t.artisan.tenancy_migrate.error))]),e("br")]):t._e(),t.pull.status=="success"?e("div",[t.pull.updated==!1?e("div",[t.artisan.clear.status=="success"?e("div",[e("hr"),e("h3",[t._v("Eliminando Caché")]),e("h4",[t._v("Log: "+t._s(t.artisan.clear.content))]),e("span",{staticClass:"text-danger"},[t._v(t._s(t.artisan.clear.error))]),e("br")]):t._e(),t.composer.install.status=="success"?e("div",[e("h3",[t._v("Actualizando dependencias")]),e("h4",[t._v("Log:")]),e("pre",[t._v("                                    "+t._s(t.composer.install.content)+`
                                `)]),e("span",{staticClass:"text-danger"},[t._v(t._s(t.composer.install.error))]),e("br")]):t._e()]):e("div",[e("hr"),e("h3",[t._v("El sistema está actualizado")])])]):t._e()]):t._e()])])]),e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t._m(0),e("div",{staticStyle:{"max-height":"600px","overflow-y":"auto"},domProps:{innerHTML:t._s(t.changelog)}})])])])])},ke=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-title text-center"},[t("i",{staticClass:"fas fa-file-alt",staticStyle:{color:"rgb(41, 41, 97)"}}),t("p",[s._v("Changelog")])])}],we=o(Ce,ye,ke,!1,null,null,null,null);const xe=we.exports,$e={props:["storageSize","discUsed","lastZip","clients"],data(){return{newLastZipDate:"",headers:null,resource:"backup",errors:{},form:{},loading_submit:!1,loading_upload:!1,db:{error:"",content:"",status:""},files:{error:"",content:"",status:""},newLastZip:"",formBackups:{type:"todos"},errors:{}}},created(){this.initForm()},methods:{onGenerateNnameLastFile(){this.newLastZip&&this.newLastZip.date&&(this.newLastZipDate=`creado el ${this.newLastZip.date}`)},clickDownload(){window.open(`/${this.resource}/download/${this.newLastZip.name}`,"_blank")},initForm(){this.form={host:null,port:null,username:null,password:null},this.newLastZip=this.lastZip,this.onGenerateNnameLastFile()},async start(){this.initContent(),this.loading_submit=!0,this.backupDb()},initContent(){this.db.error="",this.db.content="",this.db.status=!1,this.files.error="",this.files.content="",this.files.status=!1},backupDb(){this.$http.post(`/${this.resource}/db`,this.formBackups).then(s=>{s.data!==""&&(this.db.content=s.data,this.errors={},s.status===200&&(this.db.status="success"),this.backupFiles())}).catch(s=>{const t=s.response.status;t===422?this.errors=s.response.data:t!==200&&(this.db.error=s.response.data.message,this.db.status="false")}).finally(()=>this.loading_submit=!1)},async backupFiles(){await this.$http.post(`/${this.resource}/files`,this.formBackups).then(async s=>{s.data!==""&&(this.files.content=s.data,this.errors={},s.status===200&&(this.files.status="success",this.$message.success("Backup generado correctamente, se esta cargando la información del último backup."),this.newLastZip="",await this.sleep(4500),this.mostRecent(),this.$message.success("Se cargo los datos generados")),this.loading_submit=!1)}).catch(s=>{const t=s.response.status;t===422?this.errors=s.response.data:t!==200&&(this.db.error=s.response.data.message,this.db.status="false")})},mostRecent(){this.$http.get(`/${this.resource}/last-backup`).then(s=>{s.data!==""&&(this.newLastZip=s.data,this.loading_submit=!1,this.onGenerateNnameLastFile())}).catch(s=>{s.response.status!==200?this.files.error=s.response.data.message:console.log(s)})},uploadFtp(){this.loading_upload=!0,this.sendFtp()},sleep(s){return new Promise(t=>setTimeout(t,s))},sendFtp(){this.$http.post(`${this.resource}/upload`,this.form).then(s=>{s.data.success?(this.$message.success(s.data.message),this.$eventHub.$emit("reloadData"),this.loading_upload=!1,this.initForm()):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:s.response.status===500?this.$message.error(s.response.data.message):console.log(s.response)}).then(()=>{this.loading_upload=!1})}}};var De=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"card col-md-8"},[e("div",{staticClass:"card-header justify-content-center d-block"},[e("h4",[t._v("Generar backup")]),e("br"),e("form",{staticClass:"row pt-2",on:{submit:function(a){return a.preventDefault(),t.onSubmitBackups.apply(null,arguments)}}},[e("div",{staticClass:"col-12 mb-2"},[e("span",[t._v("Tipo")]),t._v(" "),e("br"),e("el-radio",{attrs:{label:"todos"},model:{value:t.formBackups.type,callback:function(a){t.$set(t.formBackups,"type",a)},expression:"formBackups.type"}},[t._v("Todos")]),e("el-radio",{attrs:{label:"individual"},model:{value:t.formBackups.type,callback:function(a){t.$set(t.formBackups,"type",a)},expression:"formBackups.type"}},[t._v("Individual")])],1),t.formBackups.type==="individual"?e("div",{staticClass:"col-6 col-md-3 form-group",class:{"has-danger":t.errors.hostname_id}},[e("el-select",{attrs:{clearable:"",filterable:"",placeholder:"Selecciona un cliente"},model:{value:t.formBackups.hostname_id,callback:function(a){t.$set(t.formBackups,"hostname_id",a)},expression:"formBackups.hostname_id"}},t._l(t.clients,function(a){return e("el-option",{key:a.hostname_id,attrs:{label:a.name,value:a.hostname_id}})}),1),t.errors.hostname_id?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.hostname_id[0])}}):t._e()],1):t._e(),e("div",{staticClass:"col-6 col-md-3 form-group"},[e("el-button",{attrs:{loading:t.loading_submit,disabled:t.loading_submit},on:{click:function(a){return a.preventDefault(),t.start()}}},[t._v("Iniciar Proceso")])],1)]),e("br"),e("br"),e("p",{staticClass:"mb-0"},[t._v("Espacio disponible en disco: "+t._s(t.discUsed))]),e("p",{staticClass:"mb-0"},[t._v("Espacio ocupado por archivos de facturación: "+t._s(t.storageSize))])]),e("div",{staticClass:"card-body"},[t.newLastZip!==""?e("p",[t._v("Ultimo Backup generado: "),e("strong",[t._v(t._s(t.newLastZip.name)+" "+t._s(t.newLastZipDate))])]):t._e(),e("el-button",{on:{click:function(a){return a.preventDefault(),t.clickDownload()}}},[t._v("Descargar")]),e("hr"),e("p",{staticClass:"mb-2"},[t._v("Para restaurar una base de datos debe ejecutar los siguientes comandos.")]),e("code",[t._v("mysql -u [user] -p [database_name] < [filename].sql")]),e("br"),e("hr"),e("p",{staticClass:"mb-2"},[t._v("Para restaurar los archivos descargados debe copiar todas carpetas dentro de la carpeta del cliente.")]),e("code",[t._v("cp [path_del_zip]/signed storage/app/tenancy/tenants/tenancy_[subdominio del cliente]")]),t._v(" "),e("br"),e("code",[t._v("cp [path_del_zip]/unsigned storage/app/tenancy/tenants/tenancy_[subdominio del cliente]")]),t._v(" "),e("br"),e("code",[t._v("cp [path_del_zip]/cdr storage/app/tenancy/tenants/tenancy_[subdominio del cliente]")]),t._v(" "),e("br"),e("code",[t._v("cp [path_del_zip]/pdf storage/app/tenancy/tenants/tenancy_[subdominio del cliente]")]),t._v(" "),e("br"),e("p",[t._v("Repetir para todas las carpetas que estan dentro del .zip")])],1)]),e("div",{staticClass:"card col-md-4 mt-0"},[e("div",{staticClass:"card-header"},[t._v(" Enviar por FTP último backup generado ")]),e("div",{staticClass:"card-body"},[e("small",{staticClass:"text-muted"},[t._v("Por seguridad sus datos FTP no son guardados")]),t.newLastZip!==""?e("form",[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.host}},[e("label",{staticClass:"control-label"},[t._v("Host/IP")]),e("el-input",{model:{value:t.form.host,callback:function(a){t.$set(t.form,"host",a)},expression:"form.host"}})],1),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.port}},[e("label",{staticClass:"control-label"},[t._v("Puerto")]),e("el-input",{model:{value:t.form.port,callback:function(a){t.$set(t.form,"port",a)},expression:"form.port"}})],1),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.username}},[e("label",{staticClass:"control-label"},[t._v("Usuario")]),e("el-input",{model:{value:t.form.username,callback:function(a){t.$set(t.form,"username",a)},expression:"form.username"}})],1),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.password}},[e("label",{staticClass:"control-label"},[t._v("Contraseña")]),e("el-input",{model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}})],1),t.newLastZip!==""?e("div",{staticClass:"form-group"},[e("el-button",{attrs:{loading:t.loading_upload},on:{click:function(a){return a.preventDefault(),t.uploadFtp()}}},[t._v("Enviar")])],1):t._e()]):t._e()])])])},Pe=[],Se=o($e,De,Pe,!1,null,null,null,null);const Fe=Se.exports,Me={data(){return{loading_submit:!1,resource:"configurations",errors:{},form:{},soap_sends:[],soap_types:[]}},async created(){await this.initForm(),await this.$http.get(`/${this.resource}/record`).then(s=>{this.form.token_public_culqui=s.data.token_public_culqui,this.form.token_private_culqui=s.data.token_private_culqui})},methods:{openCulqi(){window.open("https://www.culqi.com")},initForm(){this.errors={},this.form={token_public_culqui:null,token_private_culqui:null}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})}}};var Ie=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.token_public_culqui}},[e("label",{staticClass:"control-label"},[t._v(" Token Público "),e("el-tooltip",{attrs:{placement:"right-start"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" Token Público. "),e("a",{attrs:{href:"#"},on:{click:t.openCulqi}},[t._v("Culqi")])]),e("i",{staticClass:"fa fa-info-circle"})])],1),e("el-input",{model:{value:t.form.token_public_culqui,callback:function(a){t.$set(t.form,"token_public_culqui",a)},expression:"form.token_public_culqui"}}),t.errors.token_public_culqui?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.token_public_culqui[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.token_private_culqui}},[e("label",{staticClass:"control-label"},[t._v("Token Privado "),e("el-tooltip",{attrs:{placement:"right-start"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" Token Privado. "),e("a",{attrs:{href:"#"},on:{click:t.openCulqi}},[t._v("Culqi")])]),e("i",{staticClass:"fa fa-info-circle"})])],1),e("el-input",{model:{value:t.form.token_private_culqui,callback:function(a){t.$set(t.form,"token_private_culqui",a)},expression:"form.token_private_culqui"}}),t.errors.token_private_culqui?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.token_private_culqui[0])}}):t._e()],1)])])]),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])},Ee=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Culqi")])])}],Ae=o(Me,Ie,Ee,!1,null,null,null,null);const Le=Ae.exports,Re={data(){return{loading_submit:!1,resource:"configurations",errors:{},form:{}}},async created(){await this.initForm(),await this.$http.get(`/${this.resource}/apkurl`).then(s=>{this.form.apk_url=s.data.apk_url})},methods:{initForm(){this.errors={},this.form={apk_url:null}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})}}};var Te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.apk_url}},[e("label",{staticClass:"control-label"},[t._v(" URL ")]),e("el-input",{model:{value:t.form.apk_url,callback:function(a){t.$set(t.form,"apk_url",a)},expression:"form.apk_url"}}),t.errors.apk_url?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.apk_url[0])}}):t._e()],1)])]),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])},Be=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("URL de descarga de Aplicacion móvil")])])}],Ue=o(Re,Te,Be,!1,null,null,null,null);const qe=Ue.exports,Ne={data(){return{loading_submit:!1,resource:"configurations",errors:{},form:{}}},async created(){await this.initForm(),await this.$http.get(`/${this.resource}/apiruc`).then(s=>{this.form.url_apiruc=s.data.url_apiruc,this.form.token_apiruc=s.data.token_apiruc,this.form.token_apiruc=="false"&&(this.form.token_false=!0)})},methods:{initForm(){this.errors={},this.form={url_apiruc:null,token_apiruc:null,token_false:!1}},submit(){this.loading_submit=!0,this.form.token_false==!0&&(this.form.token_apiruc="false"),this.$http.post(`/${this.resource}`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})}}};var ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.token_false}},[e("el-checkbox",{model:{value:t.form.token_false,callback:function(a){t.$set(t.form,"token_false",a)},expression:"form.token_false"}},[t._v("Usar consulta interna")]),e("br"),t.errors.token_false?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.token_false[0])}}):t._e()],1)]),t.form.token_false==!1?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.url_apiruc}},[e("label",{staticClass:"control-label"},[t._v(" URL ")]),e("el-input",{model:{value:t.form.url_apiruc,callback:function(a){t.$set(t.form,"url_apiruc",a)},expression:"form.url_apiruc"}}),t.errors.url_apiruc?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.url_apiruc[0])}}):t._e()],1)]):t._e(),t.form.token_false==!1?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.token_apiruc}},[e("label",{staticClass:"control-label"},[t._v("Token")]),e("el-input",{model:{value:t.form.token_apiruc,callback:function(a){t.$set(t.form,"token_apiruc",a)},expression:"form.token_apiruc"}}),t.errors.token_apiruc?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.token_apiruc[0])}}):t._e()],1)]):t._e()])]),e("div",{staticClass:"form-actions text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])},Oe=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Consulta RUC/DNIe")])])}],je=o(Ne,ze,Oe,!1,null,null,null,null);const He=je.exports,Ve={props:["memory_bytes","memory_write","backtrack_limit","all_config"],data(){return{}},created(){},methods:{}};var Ge=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-responsive"},[t._m(1),e("tbody",[e("tr",[e("td",[t._v(" Memoria en bytes ")]),e("td",[e("strong",[t._v(t._s(t.memory_bytes))])])]),e("tr",[e("td",[t._v(" Memoria en el archivo ")]),e("td",[e("strong",[t._v(t._s(t.memory_write))])])]),e("tr",[e("td",[t._v(" pcre.backtrack_limit ")]),e("td",[e("strong",[t._v(t._s(t.backtrack_limit))])])]),t._l(t.all_config,function(a,i){return e("tr",{key:i},[e("td",[t._v(" "+t._s(i)+" ")]),e("td",[e("strong",[t._v(t._s(a))])])])})],2)])])])])])])},Ye=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Datos de PHP")])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v(" Indicador ")]),t("th",[s._v(" Valor ")])])])}],Qe=o(Ve,Ge,Ye,!1,null,null,null,null);const Ze=Qe.exports;function Ke(s,t){return{render:function(a){return a("div",{style:this.styles,class:this.cssClasses},[a("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:s,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(a){this.$data._plugins.push(a)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(a,i){if(this.$data._chart&&this.$data._chart.destroy(),!this.$refs.canvas)throw new Error("Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components");this.$data._chart=new h(this.$refs.canvas.getContext("2d"),{type:t,data:a,options:i,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var We=Ke("line-chart","line");const Je={legend:{display:!1},responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0}},scales:{yAxes:[{gridLines:{display:!0,lineWidth:1,color:"rgba(0,0,0,0.1)",drawBorder:!1},ticks:{beginAtZero:!0}}],xAxes:[{gridLines:{display:!0,lineWidth:1,color:"rgba(0,0,0,0.1)",drawBorder:!1}}]}},Xe={extends:We,props:["data"],data(){return{options:Je}},mounted(){this.renderChart(this.data,this.options)}},ts=null,es=null;var ss=o(Xe,ts,es,!1,null,null,null,null);const as=ss.exports,is={components:{ChartLine:as},data(){return{loaded:!1,dataCpu:{labels:null,datasets:[{data:null}]},dataMemory:{labels:null,datasets:[{data:null}]}}},async mounted(){this.loaded=!1,await this.$http.get("/status/history").then(s=>{let t=s.data;this.dataCpu.labels=t.labels,this.dataCpu.datasets[0].data=t.cpu,this.dataMemory.labels=t.labels,this.dataMemory.datasets[0].data=t.memory}),this.loaded=!0},created(){},methods:{}};var rs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("p",{staticClass:"mb-0"},[t._v("CPU %")]),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"chart-data-selector ready"},[e("div",{staticClass:"chart-data-selector-items"},[t.loaded?e("chart-line",{attrs:{data:t.dataCpu}}):t._e()],1)])])]),e("p",{staticClass:"mb-0"},[t._v("RAM GB")]),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"chart-data-selector ready"},[e("div",{staticClass:"chart-data-selector-items"},[t.loaded?e("chart-line",{attrs:{data:t.dataMemory}}):t._e()],1)])])])])])},os=[],ls=o(is,rs,os,!1,null,null,null,null);const ns=ls.exports;const cs={props:{type:{type:String,required:!0},config:{type:Object,required:!0}},data(){return{imageUrl:"",loading:!1,btnText:"",helpText:""}},mounted(){this.type==="bg"?(this.imageUrl=this.config.image,this.helpText="Se recomienda una imagen de 1000x1000px con fondo transparente en formato PNG o SVG"):(this.imageUrl=this.config.logo||"",this.helpText="Se recomienda una imagen de 600x300px con fondo transparente en formato PNG"),this.type==="bg"?this.btnText="Cambiar imagen de fondo":this.btnText="Cambiar logo"},methods:{onShowFilePicker(){this.$refs.inputFile.click()},onGeneratePreview(s){const t=s.target.files;if(t.length>0){const e=new FileReader;e.addEventListener("load",()=>{this.imageUrl=e.result}),e.readAsDataURL(t[0]);const a=t[0],i=new FormData;i.append("image",a),i.append("type",this.type),this.loading=!0,this.$http.post("/configurations/bg",i).then(r=>{this.$message({message:r.data.message,type:"success"})}).catch(r=>{r.response.status===500&&this.$message.error(r.response.data.message)}).finally(()=>this.loading=!1)}}}};var ds=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"image-container"},[e("img",{staticClass:"img-fluid img-thumbnail w-100",attrs:{src:t.imageUrl,alt:"Vista previa"}}),e("div",{staticClass:"overlay"},[e("el-button",{staticClass:"change-btn",attrs:{type:"primary",loading:t.loading,disabled:t.loading},on:{click:t.onShowFilePicker}},[t._v(t._s(t.btnText))])],1)]),e("input",{ref:"inputFile",staticClass:"hidden",attrs:{type:"file"},on:{change:t.onGeneratePreview}}),e("small",{staticClass:"form-control-feedback mt-2 d-block"},[t._v(t._s(t.helpText))])])},us=[],ms=o(cs,ds,us,!1,null,"26c947df",null,null);const _s=ms.exports;const ps={components:{ImageBgUpload:_s},props:["configuration"],data(){return{loading:!1,form:{position_form:"",show_logo_in_form:"",position_logo:"",show_socials:"",use_login_global:!1,padding_in_form:!1,facebook:"",twitter:"",instagram:"",linkedin:"",tiktok:"",login_bg_color:"rgb(248, 248, 248)"},errors:{}}},mounted(){this.form.position_form=this.configuration.login.position_form,this.form.show_logo_in_form=this.configuration.login.show_logo_in_form,this.form.position_logo=this.configuration.login.position_logo,this.form.padding_in_form=this.configuration.login.padding_in_form||!1,this.form.show_socials=this.configuration.login.show_socials,this.form.use_login_global=this.configuration.use_login_global,this.form.facebook=this.configuration.login.facebook,this.form.twitter=this.configuration.login.twitter,this.form.instagram=this.configuration.login.instagram,this.form.linkedin=this.configuration.login.linkedin,this.form.tiktok=this.configuration.login.tiktok,this.form.login_bg_color=this.configuration.login_bg_color||"rgb(248, 248, 248)"},watch:{"form.position_logo":function(s){this.form.show_logo_in_form=s==="on-form"}},methods:{initForm(){this.errors={},this.form={}},onSubmit(){delete this.form.type,delete this.form.image,this.loading=!0,this.$http.post("configurations/login",this.form).then(s=>{this.$message({message:s.data.message,type:"success"})}).catch(s=>this.axiosError(s)).finally(()=>this.loading=!1)}}};var hs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"card mb-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 form-group mb-4"},[e("label",[t._v("Usar configuración global")]),e("el-switch",{model:{value:t.form.use_login_global,callback:function(a){t.$set(t.form,"use_login_global",a)},expression:"form.use_login_global"}})],1),t.form.use_login_global?[e("div",{staticClass:"col-12 form-group row pb-5"},[e("div",{staticClass:"col-6 col-md-6"},[e("h4",{staticClass:"mt-2"},[t._v("Apariencia del Login")]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Posición del formulario")]),e("el-select",{model:{value:t.form.position_form,callback:function(a){t.$set(t.form,"position_form",a)},expression:"form.position_form"}},[e("el-option",{key:"left",attrs:{value:"left",label:"Izquierda"}}),e("el-option",{key:"right",attrs:{value:"right",label:"Derecha"}})],1),t.errors.position_form?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.position_form[0])}}):t._e()],1),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Color de fondo de la imagen")]),e("el-color-picker",{staticClass:"col-md-12 px-0",attrs:{"show-alpha":"",predefine:["rgb(248, 248, 248)","#ffffff","#f0f0f0","#e6e6e6","#d9d9d9","#cccccc"]},model:{value:t.form.login_bg_color,callback:function(a){t.$set(t.form,"login_bg_color",a)},expression:"form.login_bg_color"}})],1),e("div",{staticClass:"form-group"},[e("label",[t._v("Quitar marco a la imagen")]),e("el-switch",{model:{value:t.form.padding_in_form,callback:function(a){t.$set(t.form,"padding_in_form",a)},expression:"form.padding_in_form"}})],1)]),e("div",{staticClass:"col-6 col-md-6"},[e("ImageBgUpload",{attrs:{type:"bg",config:t.configuration.login}})],1)]),e("div",{staticClass:"col-12 row pb-5"},[e("div",{staticClass:"col-6 col-md-6"},[e("h4",{staticClass:"mt-2"},[t._v("Marca y Logo")]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Posición del logo")]),e("el-select",{model:{value:t.form.position_logo,callback:function(a){t.$set(t.form,"position_logo",a)},expression:"form.position_logo"}},[e("el-option",{key:"on-form",attrs:{value:"on-form",label:"Encima del formulario"}}),e("el-option",{key:"top-left",attrs:{value:"top-left",label:"Superior izquierda"}}),e("el-option",{key:"bottom-left",attrs:{value:"bottom-left",label:"Inferior izquierda"}}),e("el-option",{key:"top-right",attrs:{value:"top-right",label:"Superior derecha"}}),e("el-option",{key:"bottom-right",attrs:{value:"bottom-right",label:"Inferior derecha"}}),e("el-option",{key:"none",attrs:{value:"none",label:"Ocultar"}})],1),t.errors.position_logo?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.position_logo[0])}}):t._e()],1)]),e("div",{staticClass:"col-6 col-md-6"},[e("ImageBgUpload",{attrs:{type:"logo",config:t.configuration.login}})],1)]),e("div",{staticClass:"col-12 pb-4"},[e("h4",{staticClass:"mt-2"},[t._v("Redes Sociales y Enlaces Externos")]),e("div",{staticClass:"form-group"},[e("label",[t._v("Mostrar botones de redes sociales")]),e("el-switch",{model:{value:t.form.show_socials,callback:function(a){t.$set(t.form,"show_socials",a)},expression:"form.show_socials"}})],1),t.form.show_socials?e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-12 col-md-6"},[e("label",{staticClass:"control-label"},[t._v("Facebook")]),e("el-input",{model:{value:t.form.facebook,callback:function(a){t.$set(t.form,"facebook",a)},expression:"form.facebook"}})],1),e("div",{staticClass:"form-group col-12 col-md-6"},[t._m(1),e("el-input",{model:{value:t.form.twitter,callback:function(a){t.$set(t.form,"twitter",a)},expression:"form.twitter"}})],1),e("div",{staticClass:"form-group col-12 col-md-6"},[e("label",{staticClass:"control-label"},[t._v("Instagram")]),e("el-input",{model:{value:t.form.instagram,callback:function(a){t.$set(t.form,"instagram",a)},expression:"form.instagram"}})],1),e("div",{staticClass:"form-group col-12 col-md-6"},[e("label",{staticClass:"control-label"},[t._v("Linkedin")]),e("el-input",{model:{value:t.form.linkedin,callback:function(a){t.$set(t.form,"linkedin",a)},expression:"form.linkedin"}})],1),e("div",{staticClass:"form-group col-12 col-md-6"},[e("label",{staticClass:"control-label"},[t._v("TikTok")]),e("el-input",{model:{value:t.form.tiktok,callback:function(a){t.$set(t.form,"tiktok",a)},expression:"form.tiktok"}})],1)]):t._e()])]:t._e(),e("div",{staticClass:"text-end mt-3 col-12"},[e("el-button",{attrs:{loading:t.loading,disabled:t.loading,type:"primary"},on:{click:t.onSubmit}},[t._v("GUARDAR")])],1)],2)])])])},fs=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Configuración global para el login de los clientes")])])},function(){var s=this,t=s._self._c;return t("label",{staticClass:"control-label"},[s._v("X "),t("small",[s._v("(Twitter)")])])}],vs=o(ps,hs,fs,!1,null,null,null,null);const gs=vs.exports,bs={data(){return{headers:headers_token,loading_submit:!1,resource:"configurations",errors:{},form:{}}},async created(){await this.initForm(),await this.getData()},methods:{async getData(){await this.$http.get(`/${this.resource}/get-other-configuration`).then(s=>{this.form=Object.assign({},this.form,s.data)})},successUpload(s,t,e){s.success?(this.$message.success(s.message),this.form.tenant_image_ads=s.name):this.$message({message:"Error al subir el archivo",type:"error"})},errorUpload(s){this.$message({message:"Error al subir el archivo",type:"error"})},initForm(){this.errors={},this.form={enable_guest_register:!0,regex_password_client:!1,tenant_show_ads:!1,tenant_image_ads:null}},submit(){this.loading_submit=!0,this.$http.post(`/${this.resource}/other-configuration`,this.form).then(s=>{s.data.success?this.$message.success(s.data.message):this.$message.error(s.data.message)}).catch(s=>{s.response.status===422?this.errors=s.response.data:console.log(s)}).then(()=>{this.loading_submit=!1})}}};var Cs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label"},[t._v(" Habilitar Registro de invitados "),e("el-tooltip",{staticClass:"item",attrs:{content:"Permitir a los clientes registrarse sin necesidad de un usuario administrador que los cree (se necesita configurar el correo previamente).",effect:"dark",placement:"top-start"}},[e("i",{staticClass:"fa fa-info-circle"})])],1),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.enable_guest_register}},[e("el-switch",{attrs:{"active-text":"Si","inactive-text":"No"},on:{change:t.submit},model:{value:t.form.enable_guest_register,callback:function(a){t.$set(t.form,"enable_guest_register",a)},expression:"form.enable_guest_register"}}),t.errors.enable_guest_register?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.enable_guest_register[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label"},[t._v(" Mostrar publicidad "),e("el-tooltip",{staticClass:"item",attrs:{content:"Se visualizará la imágen cargada en el header de todos los clientes.",effect:"dark",placement:"top-start"}},[e("i",{staticClass:"fa fa-info-circle"})])],1),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.tenant_show_ads}},[e("el-switch",{attrs:{"active-text":"Si","inactive-text":"No"},on:{change:t.submit},model:{value:t.form.tenant_show_ads,callback:function(a){t.$set(t.form,"tenant_show_ads",a)},expression:"form.tenant_show_ads"}}),t.errors.tenant_show_ads?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.tenant_show_ads[0])}}):t._e()],1)]),t.form.tenant_show_ads?e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Imágen para publicidad")]),e("el-input",{attrs:{readonly:!0},model:{value:t.form.tenant_image_ads,callback:function(a){t.$set(t.form,"tenant_image_ads",a)},expression:"form.tenant_image_ads"}},[e("el-upload",{attrs:{slot:"append",headers:t.headers,"on-success":t.successUpload,"on-error":t.errorUpload,"show-file-list":!1,action:"/configurations/upload-tenant-ads"},slot:"append"},[e("el-button",{attrs:{icon:"el-icon-upload",type:"primary"}})],1)],1),t._m(1)],1)]):t._e(),e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label"},[t._v(" Habilitar contraseña segura "),e("el-tooltip",{staticClass:"item",attrs:{content:"Se solicitará una contraseña segura (cumplir patrón) al registrar cliente",effect:"dark",placement:"top-start"}},[e("i",{staticClass:"fa fa-info-circle"})])],1),e("div",{staticClass:"form-group",class:{"has-danger":t.errors.regex_password_client}},[e("el-switch",{attrs:{"active-text":"Si","inactive-text":"No"},on:{change:t.submit},model:{value:t.form.regex_password_client,callback:function(a){t.$set(t.form,"regex_password_client",a)},expression:"form.regex_password_client"}}),t.errors.regex_password_client?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.regex_password_client[0])}}):t._e()],1)])])])])])},ys=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Otras configuraciones")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"sub-title text-danger"},[t("small",[s._v("Se recomienda resoluciones 500x50")])])}],ks=o(bs,Cs,ys,!1,null,null,null,null);const ws=ks.exports,xs={props:["configuration"],created(){this.initForm()},data(){return{loading_submit:!1,resource:"configurations",errors:{},form:{mail_host:"",mail_port:"",mail_username:"",mail_password:"",mail_encryption:""}}},methods:{initForm(){this.form={mail_host:this.configuration.mail_host||"",mail_port:this.configuration.mail_port||"",mail_username:this.configuration.mail_username||"",mail_password:this.configuration.mail_password||"",mail_encryption:this.configuration.mail_encryption||""}},submit(){this.loading_submit=!0,this.$http.post(`${this.resource}/emails`,this.form).then(s=>{if(s.data.success)return this.$message.success("Configuración guardada correctamente")}).catch(s=>{this.errors=s.response.data.errors||{},this.$message.error("Error al guardar la configuración")}).finally(()=>{this.loading_submit=!1}),this.loading_submit=!1}}};var $s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("form",{staticClass:"row card-body px-0",attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Dirección del host de correo")]),e("el-input",{model:{value:t.form.mail_host,callback:function(a){t.$set(t.form,"mail_host",a)},expression:"form.mail_host"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Puerto del host de correo")]),e("el-input",{model:{value:t.form.mail_port,callback:function(a){t.$set(t.form,"mail_port",a)},expression:"form.mail_port"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Nombre de usuario de correo")]),e("el-input",{model:{value:t.form.mail_username,callback:function(a){t.$set(t.form,"mail_username",a)},expression:"form.mail_username"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Contraseña del usuario de correo")]),e("el-input",{attrs:{type:"password"},model:{value:t.form.mail_password,callback:function(a){t.$set(t.form,"mail_password",a)},expression:"form.mail_password"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Encriptación de correo")]),e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.mail_encryption,callback:function(a){t.$set(t.form,"mail_encryption",a)},expression:"form.mail_encryption"}},[e("el-option",{attrs:{label:"SSL",value:"ssl"}}),e("el-option",{attrs:{label:"TLS",value:"tls"}}),e("el-option",{attrs:{label:"Ninguna",value:""}})],1)],1)]),t._m(1),e("div",{staticClass:"col-md-12 text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])},Ds=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Configuración de correo")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group pt-3"},[t("a",{staticClass:"control-label",attrs:{href:"https://docs.google.com/document/d/1ix2vPsiqSoK9jNAOF2gPjWhNa3BdajU5x8I5aBvEz0o/edit?usp=sharing",target:"_blank"}},[s._v(" Para correos Gmail verificar el manual ")])])])}],Ps=o(xs,$s,Ds,!1,null,null,null,null);const Ss=Ps.exports,Fs={props:["showDialog","recordId"],data(){return{loading_submit:!1,titleDialog:null,resource:"reports/report-login-lockout",errors:{},form:{},showTable:!1,search:{column:null,value:null,record_id:null,system_activity_log_type_id:"login_lockout"},columns:[],records:[],pagination:{}}},created(){this.$eventHub.$on("reloadData",()=>{this.getRecords()})},async mounted(){},methods:{clickDownload(s){const t=u.stringify({...this.search});window.open(`/${this.resource}/report/${s}/?${t}`,"_blank")},customIndex(s){return this.pagination.per_page*(this.pagination.current_page-1)+s+1},getRecords(){return this.loading_submit=!0,this.search.record_id=this.recordId,this.$http.get(`/${this.resource}/records?${this.getQueryParameters()}`).then(s=>{this.records=s.data.data,this.pagination=s.data.meta,this.pagination.per_page=parseInt(s.data.meta.per_page)}).catch(s=>{}).then(()=>{this.loading_submit=!1})},getQueryParameters(){return u.stringify({page:this.pagination.current_page,limit:this.limit,...this.search})},changeClearInput(){this.search.value="",this.getRecords()},async create(){this.records=[],this.titleDialog="Cuentas bloquedas",await this.$http.get(`/${this.resource}/columns`).then(s=>{this.columns=s.data,this.search.column=_.head(Object.keys(this.columns))}),await this.getRecords()},close(){this.showTable=!1,this.$emit("update:showDialog",!1)}}};var Ms=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"85%",title:t.titleDialog,visible:t.showDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{close:t.close,open:t.create}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_submit,expression:"loading_submit"}]},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 col-lg-12 col-xl-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 pb-2"},[e("div",{staticClass:"d-flex"},[e("div",{staticStyle:{width:"100px"}},[t._v(" Filtrar por: ")]),e("el-select",{attrs:{placeholder:"Select"},on:{change:t.changeClearInput},model:{value:t.search.column,callback:function(a){t.$set(t.search,"column",a)},expression:"search.column"}},t._l(t.columns,function(a,i){return e("el-option",{key:i,attrs:{value:i,label:a}})}),1)],1)]),e("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 pb-2"},[t.search.column==="date_of_issue"||t.search.column==="date_of_due"||t.search.column==="date_of_payment"||t.search.column==="date"||t.search.column==="delivery_date"?[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Buscar","value-format":"yyyy-MM-dd"},on:{change:t.getRecords},model:{value:t.search.value,callback:function(a){t.$set(t.search,"value",a)},expression:"search.value"}})]:[e("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Buscar","prefix-icon":"el-icon-search"},on:{input:t.getRecords},model:{value:t.search.value,callback:function(a){t.$set(t.search,"value",a)},expression:"search.value"}})]],2)])]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[e("thead",[e("tr",{staticStyle:{width:"100%"},attrs:{slot:"heading"},slot:"heading"},[e("th",[t._v("#")]),e("th",{staticClass:"text-center"},[t._v("Fecha y Hora")]),e("th",[t._v("Correo")]),e("th",[t._v("Transacción")]),e("th",{staticClass:"text-center"},[t._v("Ip")]),e("th",{staticClass:"text-center"},[t._v("Ubicación")]),e("th",[t._v("Dispositivo")]),e("th",[t._v("Tipo dispositivo")]),e("th",[t._v("Plataforma")]),e("th",[t._v("Navegador")])])]),e("tbody",t._l(t.records,function(a,i){return e("tr",[e("td",[t._v(t._s(t.customIndex(i)))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.date_time))]),e("td",[t._v(t._s(a.request_email))]),e("td",{staticClass:"text-justify"},[t._v(t._s(a.system_activity_log_type_description))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.ip))]),e("td",{staticClass:"text-center"},[a.location?[e("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"}},[e("div",[e("p",[e("b",[t._v("País: ")]),t._v(" "+t._s(a.location.country_code)+" - "+t._s(a.location.country_name))]),e("p",[e("b",[t._v("Región: ")]),t._v(" "+t._s(a.location.region_code)+" - "+t._s(a.location.region_name))]),e("p",[e("b",[t._v("Ciudad: ")]),t._v(" "+t._s(a.location.city_name))]),e("p",[e("b",[t._v("Zona horaria: ")]),t._v(" "+t._s(a.location.timezone))])]),e("el-button",{attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"fa fa-eye"})])],1)]:t._e()],2),e("td",[t._v(t._s(a.device_name))]),e("td",[t._v(t._s(a.device_type_description))]),e("td",[t._v(t._s(a.platform_description))]),e("td",[t._v(t._s(a.browser_description))])])}),0)]),e("div",[e("el-pagination",{attrs:{layout:"total, prev, pager, next",total:t.pagination.total,"current-page":t.pagination.current_page,"page-size":t.pagination.per_page},on:{"current-change":t.getRecords,"update:currentPage":function(a){return t.$set(t.pagination,"current_page",a)},"update:current-page":function(a){return t.$set(t.pagination,"current_page",a)}}})],1)])])])])])]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-12 text-right"},[e("el-button",{on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cerrar")])],1)])])])},Is=[],Es=o(Fs,Ms,Is,!1,null,null,null,null);const As=Es.exports,Ls={components:{RecordForm:As},data(){return{showDialog:!1,resource:"report-login-lockout",recordId:null,record:{},records:[]}},created(){this.$eventHub.$on("reloadData",()=>{this.getClients()}),this.getClients()},methods:{getClients(){this.$http.get("/reports/clients").then(s=>{this.records=s.data.data})},clickCreate(s){this.recordId=s,this.showDialog=!0}}};var Rs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.records,function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),e("td",[t._v(t._s(a.hostname))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.number))]),e("td",[t._v(t._s(a.email))]),e("td",[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-primary",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickCreate(a.id)}}},[t._v(" Visualizar")])])])}),0)])])]),e("record-form",{attrs:{showDialog:t.showDialog,recordId:t.recordId},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}})],1)},Ts=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info"},[t("h3",{staticClass:"my-0"},[s._v("Clientes - Cuentas bloquedas")])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("#")]),t("th",[s._v("Dominio")]),t("th",[s._v("Nombre")]),t("th",[s._v("RUC")]),t("th",[s._v("Correo")]),t("th",[s._v("Acciones")])])])}],Bs=o(Ls,Rs,Ts,!1,null,null,null,null);const Us=Bs.exports,qs={props:["showDialog","recordId"],data(){return{loading_submit:!1,titleDialog:null,resource:"reports/user-not-change-password",errors:{},form:{},showTable:!1,search:{record_id:null},columns:[],records:[],pagination:{}}},created(){this.$eventHub.$on("reloadData",()=>{this.getRecords()})},async mounted(){},methods:{clickDownload(s){const t=u.stringify({...this.search});window.open(`/${this.resource}/report/${s}/?${t}`,"_blank")},getRecords(){return this.loading_submit=!0,this.search.record_id=this.recordId,this.$http.get(`/${this.resource}/records?${this.getQueryParameters()}`).then(s=>{this.records=s.data.data}).catch(s=>{}).then(()=>{this.loading_submit=!1})},getQueryParameters(){return u.stringify({...this.search})},changeClearInput(){this.getRecords()},async create(){this.records=[],this.titleDialog="Usuarios con contraseña desactualizada",await this.getRecords()},close(){this.$emit("update:showDialog",!1)}}};var Ns=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"85%",title:t.titleDialog,visible:t.showDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{close:t.close,open:t.create}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_submit,expression:"loading_submit"}]},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 col-lg-12 col-xl-12"},[e("div",{staticClass:"row"})]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[e("thead",[e("tr",{staticStyle:{width:"100%"},attrs:{slot:"heading"},slot:"heading"},[e("th",[t._v("#")]),e("th",[t._v("Email")]),e("th",[t._v("Nombre")]),e("th",[t._v("Perfil")]),e("th",[t._v("Sucursal")])])]),e("tbody",t._l(t.records,function(a,i){return e("tr",[e("td",[t._v(t._s(i+1))]),e("td",[t._v(t._s(a.email))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.type))]),e("td",[t._v(t._s(a.establishment_description))])])}),0)])])])])])])]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-12 text-right"},[e("el-button",{on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cerrar")])],1)])])])},zs=[],Os=o(qs,Ns,zs,!1,null,null,null,null);const js=Os.exports,Hs={components:{RecordForm:js},data(){return{showDialog:!1,resource:"user-not-change-password",recordId:null,record:{},records:[]}},created(){this.$eventHub.$on("reloadData",()=>{this.getClients()}),this.getClients()},methods:{getClients(){this.$http.get("/reports/clients").then(s=>{this.records=s.data.data})},clickCreate(s){this.recordId=s,this.showDialog=!0}}};var Vs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.records,function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),e("td",[t._v(t._s(a.hostname))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.number))]),e("td",[t._v(t._s(a.email))]),e("td",[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-primary",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickCreate(a.id)}}},[t._v(" Visualizar")])])])}),0)])])]),e("record-form",{attrs:{showDialog:t.showDialog,recordId:t.recordId},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}})],1)},Gs=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info"},[t("h3",{staticClass:"my-0"},[s._v("Clientes - Usuarios con contraseña desactualizada")])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("#")]),t("th",[s._v("Dominio")]),t("th",[s._v("Nombre")]),t("th",[s._v("RUC")]),t("th",[s._v("Correo")]),t("th",[s._v("Acciones")])])])}],Ys=o(Hs,Vs,Gs,!1,null,null,null,null);const Qs=Ys.exports;const Zs={props:["showDialog","recordId","plan_documents"],data(){return{loading_submit:!1,titleDialog:null,resource:"plans",documents_unlimited:null,users_unlimited:null,limit_users:null,limit_documents:null,errors:{},errorLDocument:{},errorLUser:{},form:{}}},created(){this.initForm()},methods:{notEmpty(s){return!_.isEmpty(s)},initForm(){this.limit_users=null,this.limit_documents=null,this.documents_unlimited=!1,this.users_unlimited=!1,this.errors={},this.errorLDocument={},this.errorLUser={},this.form={id:null,name:null,pricing:null,limit_users:null,limit_documents:null,plan_documents:[],establishments_limit:0,establishments_unlimited:!0,sales_limit:0,sales_unlimited:!0,include_sale_notes_sales_limit:!1,include_sale_notes_limit_documents:!1}},create(){this.titleDialog=this.recordId?"Editar plan":"Nuevo plan",this.recordId&&this.$http.get(`/${this.resource}/record/${this.recordId}`).then(s=>{this.setData(s.data.data)})},validateInputs(){return!this.form.establishments_unlimited&&isNaN(this.form.establishments_limit)?this.getResponseValidations(!1,"Límite de sucursales no es un número válido."):!this.form.sales_unlimited&&isNaN(this.form.sales_limit)?this.getResponseValidations(!1,"Límite de ventas no es un número válido."):this.getResponseValidations()},submit(){if(this.validateLUsers().limit_users||this.validateLDocuments().limit_documents)return;const s=this.validateInputs();if(!s.success)return this.$message.error(s.message);this.transform(),this.loading_submit=!0,this.$http.post(`${this.resource}`,this.form).then(t=>{t.data.success?(this.$message.success(t.data.message),this.$eventHub.$emit("reloadData"),this.close()):this.$message.error(t.data.message)}).catch(t=>{t.response.status===422?this.errors=t.response.data:console.log(t.response)}).then(()=>{this.loading_submit=!1})},setData(s){this.form=s,this.form.plan_documents=Object.values(s.plan_documents),this.users_unlimited=s.limit_users==0,this.documents_unlimited=s.limit_documents==0,this.limit_users=this.users_unlimited?"∞":s.limit_users,this.limit_documents=this.documents_unlimited?"∞":s.limit_documents},transform(){this.users_unlimited?this.form.limit_users=0:this.form.limit_users=this.limit_users,this.documents_unlimited?this.form.limit_documents=0:this.form.limit_documents=this.limit_documents},validateLDocuments(){return this.errorLDocument={},this.documents_unlimited||this.limit_documents<1&&this.$set(this.errorLDocument,"limit_documents",["limite de documentos debe ser mayor a cero"]),this.errorLDocument},validateLUsers(){return this.errorLUser={},this.users_unlimited||this.limit_users<1&&this.$set(this.errorLUser,"limit_users",["limite de usuarios debe ser mayor a cero"]),this.errorLUser},setUnlimitDocuments(){this.limit_documents=this.documents_unlimited?"∞":null,this.form.limit_documents=this.limit_documents=="∞"?0:this.limit_documents},setUnlimitUsers(){this.limit_users=this.users_unlimited?"∞":null,this.form.limit_users=this.limit_users=="∞"?0:this.limit_users},close(){this.$emit("update:showDialog",!1),this.initForm()}}};var Ks=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.titleDialog,visible:t.showDialog},on:{close:t.close,open:t.create}},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.name}},[e("label",{staticClass:"control-label"},[t._v("Nombre")]),e("el-input",{attrs:{maxlength:11},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),t.errors.name?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.name[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.pricing}},[e("label",{staticClass:"control-label"},[t._v("Precio")]),e("el-input",{model:{value:t.form.pricing,callback:function(a){t.$set(t.form,"pricing",a)},expression:"form.pricing"}}),t.errors.pricing?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errors.pricing[0])}}):t._e()],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.limit_users||t.errorLUser.limit_users}},[e("label",{staticClass:"control-label"},[t._v("Límite de usuarios")]),e("el-input",{attrs:{disabled:t.users_unlimited},on:{input:t.validateLUsers},model:{value:t.limit_users,callback:function(a){t.limit_users=a},expression:"limit_users"}}),e("el-checkbox",{on:{change:t.setUnlimitUsers},model:{value:t.users_unlimited,callback:function(a){t.users_unlimited=a},expression:"users_unlimited"}},[t._v("Ilimitado")]),e("br"),t.errors.limit_users?e("small",{staticClass:"form-control-feedback d-block",domProps:{textContent:t._s(t.errors.limit_users[0])}}):t._e(),t.errorLUser.limit_users?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errorLUser.limit_users[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.limit_documents||t.errorLDocument.limit_documents}},[e("label",{staticClass:"control-label"},[t._v("Límite de documentos")]),e("el-input",{attrs:{disabled:t.documents_unlimited},on:{input:t.validateLDocuments},model:{value:t.limit_documents,callback:function(a){t.limit_documents=a},expression:"limit_documents"}}),e("el-checkbox",{on:{change:t.setUnlimitDocuments},model:{value:t.documents_unlimited,callback:function(a){t.documents_unlimited=a},expression:"documents_unlimited"}},[t._v("Ilimitado")]),e("br"),e("el-checkbox",{model:{value:t.form.include_sale_notes_limit_documents,callback:function(a){t.$set(t.form,"include_sale_notes_limit_documents",a)},expression:"form.include_sale_notes_limit_documents"}},[t._v("Incluir notas de venta")]),e("br"),t.errors.limit_documents?e("small",{staticClass:"form-control-feedback d-block",domProps:{textContent:t._s(t.errors.limit_documents[0])}}):t._e(),t.errorLDocument.limit_documents?e("small",{staticClass:"form-control-feedback",domProps:{textContent:t._s(t.errorLDocument.limit_documents[0])}}):t._e()],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.establishments_limit}},[e("label",{staticClass:"control-label"},[t._v("Límite de sucursales")]),t.form.establishments_unlimited?[e("el-input",{attrs:{value:"∞",disabled:""}})]:[e("el-input",{model:{value:t.form.establishments_limit,callback:function(a){t.$set(t.form,"establishments_limit",a)},expression:"form.establishments_limit"}})],e("el-checkbox",{model:{value:t.form.establishments_unlimited,callback:function(a){t.$set(t.form,"establishments_unlimited",a)},expression:"form.establishments_unlimited"}},[t._v("Ilimitado")]),e("br"),t.errors.establishments_limit?e("small",{staticClass:"form-control-feedback d-block",domProps:{textContent:t._s(t.errors.establishments_limit[0])}}):t._e()],2)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group",class:{"has-danger":t.errors.sales_limit}},[e("label",{staticClass:"control-label"},[t._v(" Límite de ventas mensual "),e("el-tooltip",{staticClass:"item",attrs:{content:t.form.include_sale_notes_sales_limit?"Disponible para CPE y Nota de venta":"Disponible para CPE",effect:"dark",placement:"top"}},[e("i",{staticClass:"fa fa-info-circle"})])],1),t.form.sales_unlimited?[e("el-input",{attrs:{value:"∞",disabled:""}})]:[e("el-input",{model:{value:t.form.sales_limit,callback:function(a){t.$set(t.form,"sales_limit",a)},expression:"form.sales_limit"}})],e("el-checkbox",{model:{value:t.form.sales_unlimited,callback:function(a){t.$set(t.form,"sales_unlimited",a)},expression:"form.sales_unlimited"}},[t._v("Ilimitado")]),e("br"),e("el-checkbox",{model:{value:t.form.include_sale_notes_sales_limit,callback:function(a){t.$set(t.form,"include_sale_notes_sales_limit",a)},expression:"form.include_sale_notes_sales_limit"}},[t._v("Incluir notas de venta")]),e("br"),t.errors.sales_limit?e("small",{staticClass:"form-control-feedback d-block",domProps:{textContent:t._s(t.errors.sales_limit[0])}}):t._e()],2)])])]),e("div",{staticClass:"form-actions text-right pt-2"},[e("el-button",{on:{click:function(a){return a.preventDefault(),t.close()}}},[t._v("Cancelar")]),e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])},Ws=[],Js=o(Zs,Ks,Ws,!1,null,null,null,null);const v=Js.exports,Xs={mixins:[c],components:{PlansForm:v},data(){return{showDialog:!1,resource:"plans",recordId:null,records:[],plan_documents:[],aux:[]}},created(){this.$eventHub.$on("reloadData",()=>{this.getData()}),this.getData(),this.getPlanDocuments()},methods:{getPlanDocuments(){this.$http.get(`/${this.resource}/tables`).then(s=>{this.plan_documents=s.data.plan_documents})},getData(){this.$http.get(`/${this.resource}/records`).then(s=>{this.records=s.data.data})},getDescriptions(s){let t=[];return Object.values(s).forEach((e,a)=>{t.push(this.plan_documents[e-1])}),t},clickCreate(s=null){this.recordId=s,this.showDialog=!0},clickDelete(s){this.destroy(`/${this.resource}/${s}`).then(()=>this.$eventHub.$emit("reloadData"))}}};var ta=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"page-header"},[e("h2",[e("a",{attrs:{href:"/dashboard"}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-shopping-cart",staticStyle:{"margin-top":"-5px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}}),e("path",{attrs:{d:"M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}}),e("path",{attrs:{d:"M17 17h-11v-14h-2"}}),e("path",{attrs:{d:"M6 5l14 1l-1 7h-13"}})])])]),t._m(0),e("div",{staticClass:"right-wrapper pull-right"},[e("button",{staticClass:"btn btn-custom btn-sm mt-2 me-2",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.clickCreate()}}},[e("i",{staticClass:"fa fa-plus-circle"}),t._v(" Nuevo")])])]),e("div",{staticClass:"pricing-table row no-gutters mt-3 mb-3 d-flex justify-content-center"},[t._l(t.records,function(a,i){return[e("div",{key:i,staticClass:"col-lg-3 col-sm-6 text-center pb-4",staticStyle:{padding:"10px"}},[e("div",{staticClass:"plan most-popular h-100 d-flex flex-column"},[e("div",{staticClass:"d-flex align-items-center"},[e("h3",{staticClass:"text-start fw-semibold"},[t._v(t._s(a.name))]),a.locked?e("span",{staticClass:"tag-popular d-flex align-items-center ms-2"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-bolt",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"}})]),t._v(" Default ")]):t._e()]),e("div",[e("span",{staticClass:"d-flex justify-content-start fw-bold mt-3"},[t._v(" S/ "),e("h1",{staticClass:"m-0",staticStyle:{"font-size":"3rem !important"}},[t._v(t._s(a.pricing))])]),e("p",{staticClass:"text-start mb-4 mt-0 text-muted"},[t._v("Servicio facturado mensualmente")])]),e("div",{staticClass:"price-content pt-3"},[t._m(1,!0),a.limit_users===0?e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" Usuarios ilimitados ")]):e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" "+t._s(a.limit_users)+" usuarios ")]),a.limit_documents===0?e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" Comprobantes ilimitados ")]):e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" "+t._s(a.limit_documents)+" comprobantes ")]),a.establishments_unlimited?e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" Sucursales ilimitados ")]):e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" "+t._s(a.establishments_limit)+" sucursales ")]),a.sales_unlimited?e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" Ventas ilimitadas ")]):e("p",{staticClass:"key-features"},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-circle-check text-success me-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M9 12l2 2l4 -4"}})]),t._v(" Total ventas mensuales S/"+t._s(a.sales_limit)+" ")])]),a.locked?t._e():e("div",{staticClass:"col-12 d-flex justify-content-center mt-auto"},[e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-danger col-6 me-1",staticStyle:{"margin-left":"6px"},attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickDelete(a.id)}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-trash",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M4 7l16 0"}}),e("path",{attrs:{d:"M10 11l0 6"}}),e("path",{attrs:{d:"M14 11l0 6"}}),e("path",{attrs:{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}}),e("path",{attrs:{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}})]),t._v(" Eliminar plan ")]),e("button",{staticClass:"btn waves-effect waves-light btn-xs btn-primary col-6 ms-1",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.clickCreate(a.id)}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-edit",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}}),e("path",{attrs:{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}}),e("path",{attrs:{d:"M16 5l3 3"}})]),t._v(" Editar plan ")])])])])]})],2),e("system-plans-form",{attrs:{showDialog:t.showDialog,plan_documents:t.plan_documents,recordId:t.recordId},on:{"update:showDialog":function(a){t.showDialog=a},"update:show-dialog":function(a){t.showDialog=a}}})],1)},ea=[function(){var s=this,t=s._self._c;return t("ol",{staticClass:"breadcrumbs"},[t("li",{staticClass:"active"},[t("span",[s._v("Planes")])])])},function(){var s=this,t=s._self._c;return t("p",{staticClass:"text-start mb-2"},[t("strong",[s._v("Características:")])])}],sa=o(Xs,ta,ea,!1,null,null,null,null);const aa=sa.exports,ia={props:["configuration"],data(){return{form:{active_cron:!1,hour_generate_payment_order:"",day_before_due:"",send_notification_cron:!1,qr_api_msg:""},resource:"configurations",textarea:null,loading_submit:!1}},created(){this.configuration&&(this.form.day_before_due=this.configuration.day_before_due||3,this.form.hour_generate_payment_order=this.configuration.hour_generate_payment_order||"09:00:00",this.form.active_cron=!!this.configuration.active_cron,this.form.send_notification_cron=!!this.configuration.send_notification_cron,this.form.qr_api_msg=this.configuration.qr_api_msg)},methods:{submit(){this.loading_submit=!0,this.$http.post(`${this.resource}/`,this.form).then(s=>{if(s.data.success)return this.$message.success("Configuración guardada correctamente")}).catch(s=>{this.errors=s.response.data.errors||{},this.$message.error("Error al guardar la configuración")}).finally(()=>{this.loading_submit=!1})}}};var ra=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[t._m(0),e("form",{staticClass:"row card-body px-0",attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("el-checkbox",{on:{change:t.submit},model:{value:t.form.active_cron,callback:function(a){t.$set(t.form,"active_cron",a)},expression:"form.active_cron"}},[t._v(" Activar tareas automáticas CRON ")]),t._m(1)],1),t.form.active_cron?e("div",{staticClass:"col-md-12 container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group position-relative form-days-cron"},[e("label",{staticClass:"control-label"},[t._v(" Dias antes del vencimiento ")]),e("el-input",{attrs:{type:"number",min:1,max:25,placeholder:"Ingrese su dia"},model:{value:t.form.day_before_due,callback:function(a){t.$set(t.form,"day_before_due",a)},expression:"form.day_before_due"}}),e("span",{staticClass:"day-span-cron"},[t._v("Dias")])],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Hora para generar la orden ")]),e("el-time-select",{staticClass:"w-100",attrs:{"picker-options":{start:"00:00",end:"23:59",step:"01:00"},placeholder:"Ingrese su hora"},model:{value:t.form.hour_generate_payment_order,callback:function(a){t.$set(t.form,"hour_generate_payment_order",a)},expression:"form.hour_generate_payment_order"}})],1)]),e("div",{staticClass:"col-md-12 mt-2"},[e("el-switch",{on:{change:t.submit},model:{value:t.form.send_notification_cron,callback:function(a){t.$set(t.form,"send_notification_cron",a)},expression:"form.send_notification_cron"}}),e("span",[t._v(" Habilitar notificaciones: ")])],1),t.form.send_notification_cron?e("div",[e("span",{staticStyle:{opacity:"0.4"}},[t._v(" Luego de haberse generado las ordenes, las notificaciones se enviarán automáticamente por WhatsApp y Email (debe configurar previamente ambos servicios). ")]),e("div",{staticClass:"mt-2"},[e("h4",[t._v(" Plantilla de mensaje ")]),e("p",{staticStyle:{opacity:"0.7"}},[t._v(" Personaliza el mensaje que recibirán los clientes. Usa variables para datos dinámicos. ")]),e("div",{staticClass:"h-auto"},[e("el-input",{ref:"textarea",attrs:{type:"textarea",placeholder:"Please input",rows:"6",autosize:""},model:{value:t.form.qr_api_msg,callback:function(a){t.$set(t.form,"qr_api_msg",a)},expression:"form.qr_api_msg"}})],1),e("div",[e("nav",{staticStyle:{opacity:"0.4"}},[t._v(" Variables disponibles: "),e("div",{staticClass:"d-flex align-items-center justify-content-center flex-wrap gap-1"},[e("el-tooltip",{attrs:{content:"Nombre del cliente a quien se notifica",placement:"bottom",effect:"light"}},[e("el-button",[t._v(" @variable_nombre ")])],1),e("el-tooltip",{attrs:{content:"Nombre del plan del cliente",placement:"bottom",effect:"light"}},[e("el-button",[t._v(" @variable_plan ")])],1),e("el-tooltip",{attrs:{content:"El precio del plan (bien si esta configurado uno nuevo o del plan por defecto)",placement:"bottom",effect:"light"}},[e("el-button",[t._v(" @variable_precios ")])],1),e("el-tooltip",{attrs:{content:"Fecha de vencimiento de la orden (una vez pasada, se vence y se bloquea el cliente)",placement:"bottom",effect:"light"}},[e("el-button",[t._v(" @variable_fecha_vencimiento ")])],1)],1)])])])]):t._e(),e("div",{staticClass:"col-md-12 text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])]):t._e()])])])},oa=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"card-header bg-info bg-info-customer-admin"},[t("h3",{staticClass:"my-0"},[s._v("Configuración de tareas automáticas ")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"ms-2"},[t("span",{staticStyle:{opacity:"0.4"}},[s._v(" Habilita el sistema para generar y enviar recordatorios de pagos de pago automáticamente. ")])])}],la=o(ia,ra,oa,!1,null,null,null,null);const na=la.exports,ca={props:["showDialogOrder","clients","recordId"],data(){return{form:{},resource:"payment-orders",loading_submit:!1}},methods:{open(){this.initForm(),this.recordId&&(this.form.client_id=this.recordId)},close(){this.$emit("update:showDialogOrder",!1)},initForm(){this.form={client_id:null,amount:null,description:null,date_of_due:m().format("YYYY-MM-DD")}},submit(){this.$http.post(`/${this.resource}/create`,this.form).then(s=>{console.log(s.data),s.data.success?(this.$message.success(s.data.message),this.$emit("refresh-records"),this.close()):this.$message.warning(s.data.message)})}}};var da=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"Crear Orden de Pago Manual",visible:t.showDialogOrder},on:{open:t.open,close:t.close}},[e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Empresa")]),e("el-select",{model:{value:t.form.client_id,callback:function(a){t.$set(t.form,"client_id",a)},expression:"form.client_id"}},t._l(t.clients.filter(a=>a.name!=="Todos"&&a.id!=="all"),function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1)],1)]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Fecha de vencimiento")]),e("el-date-picker",{staticClass:"w-100",attrs:{"value-format":"yyyy-MM-dd","default-time":"00:00:00",placeholder:"Elija la fecha de vencimiento de la orden"},model:{value:t.form.date_of_due,callback:function(a){t.$set(t.form,"date_of_due",a)},expression:"form.date_of_due"}})],1)]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Monto")]),e("el-input",{attrs:{type:"text",placeholder:"Ingrese el monto"},model:{value:t.form.amount,callback:function(a){t.$set(t.form,"amount",a)},expression:"form.amount"}})],1)]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("Concepto")]),e("el-input",{attrs:{type:"text",placeholder:"Ingrese el concepto"},model:{value:t.form.description,callback:function(a){t.$set(t.form,"description",a)},expression:"form.description"}})],1)]),e("div",{staticClass:"sub-title text-muted my-3"},[e("small",[t._v("Recuerda que las órdenes manuales le ayudaran a dar seguimiento de pagos como cotizaciones u otros de forma interna. Estas NO generan bloqueos automáticos en las cuentas de tus clientes.")])]),e("div",{staticClass:"col-md-12 text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit},on:{click:function(a){t.form.notify=!1}}},[t._v("Crear orden")]),e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit},on:{click:function(a){t.form.notify=!0}}},[t._v("Crear y notificar Orden")])],1)])])])])},ua=[],ma=o(ca,da,ua,!1,null,null,null,null);const _a=ma.exports,pa={props:["showDialogEditClient","client","resource"],data(){return{plans:[],periods:[],form:{},loading_submit:!1}},methods:{open(){this.initForm(),this.form=this.client,this.getTables()},close(){this.loading_submit=!1,this.$emit("update:showDialogEditClient",!1)},initForm(){this.form={client_id:null,price:null,phone_ws:null,contact_email:null,plan_id:null,plan_period_id:null}},getTables(){this.$http.get("/payment-orders/client/tables").then(({data:s})=>{this.plans=s.plans,this.periods=s.periods})},submit(){this.loading_submit=!0,this.$http.post(`/payment-orders/updateClient/${this.client.id}`,this.form).then(s=>{s.data.success?(this.$emit("refresh-records"),this.close(),this.$notify({title:"Éxito",message:"Se actualizó correctamente",type:"success"})):(this.$notify({title:"Error",message:"Ocurrió un error al actualizar",type:"error"}),this.loading_submit=!1)})}}};var ha=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"Actualizar Información de Contacto y del Servicio",visible:t.showDialogEditClient,"close-on-click-modal":!1},on:{open:t.open,close:t.close}},[e("div",{staticClass:"sub-title text-muted"},[e("small",[t._v("Estos datos son utilizados para la generación de las órdenes automáticas, además del envío de notificaciones por correo y WhatsApp. Esto no modifica los datos de la cuenta de la empresa creada.")])]),e("form",{attrs:{autocomplete:"off"},on:{submit:function(a){return a.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Nombre ")]),e("el-input",{attrs:{type:"text"},model:{value:t.form.client_name,callback:function(a){t.$set(t.form,"client_name",a)},expression:"form.client_name"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Correo ")]),e("el-input",{attrs:{type:"text"},model:{value:t.form.contact_email,callback:function(a){t.$set(t.form,"contact_email",a)},expression:"form.contact_email"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group position-relative form-whatsapp"},[e("span",{staticClass:"number-code-country text-muted"},[t._v("+51")]),e("label",{staticClass:"control-label"},[t._v(" Whatsapp ")]),e("el-input",{attrs:{type:"text"},model:{value:t.form.phone_ws,callback:function(a){t.$set(t.form,"phone_ws",a)},expression:"form.phone_ws"}})],1)]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Plan ")]),e("el-select",{attrs:{placeholder:"Seleccione un plan"},model:{value:t.form.plan_id,callback:function(a){t.$set(t.form,"plan_id",a)},expression:"form.plan_id"}},t._l(t.plans,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1)],1)]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Precio ")]),e("el-input",{attrs:{type:"text"},model:{value:t.form.price,callback:function(a){t.$set(t.form,"price",a)},expression:"form.price"}})],1)]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Periodos ")]),e("el-select",{attrs:{placeholder:"Seleccione un periodo"},model:{value:t.form.plan_period_id,callback:function(a){t.$set(t.form,"plan_period_id",a)},expression:"form.plan_period_id"}},t._l(t.periods,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1)],1)]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v(" Fecha de finalización ")]),e("el-date-picker",{staticClass:"w-100",attrs:{clearable:"","value-format":"yyyy-MM-dd","default-time":"00:00:00",placeholder:"Elija la fecha de finalización del servicio"},model:{value:t.form.ending_billing_cycle,callback:function(a){t.$set(t.form,"ending_billing_cycle",a)},expression:"form.ending_billing_cycle"}})],1)]),e("div",{staticClass:"col-md-12 text-end pt-2"},[e("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.loading_submit}},[t._v("Guardar")])],1)])])])])},fa=[],va=o(pa,ha,fa,!1,null,null,null,null);const ga=va.exports;const ba={data(){return{showDialog:!1,resource:"payment-orders",clients:[],clientPlans:[],records:[],filters:{},status:[],payments_records:[],showDialogOrder:!1,showDialogPayment:!1,showDialogEditClient:!1,recordId:null,check_active_cron:!1,isFiltersVisible:!1,originalFilters:{}}},components:{CreateOrder:_a,EditClient:ga},async created(){await this.getTables(),this.initFilters(),await this.getRecords(),this.check_active_cron||this.$notify({title:"Información",message:"Debe habilitar el cron desde configuraciones para que este modulo funcione correctamente",type:"warning"})},computed:{getClient(){return this.clientPlans.find(s=>s.id===this.filters.client_id)||{}},sortedPayments(){const s=[2,1,3,4];return this.payments_records.slice().sort((t,e)=>s.indexOf(t.id)-s.indexOf(e.id))},filtersChanged(){return JSON.stringify(this.filters)!==JSON.stringify(this.originalFilters)},sortedClientPays(){var t;if(!((t=this.getClient)!=null&&t.pays))return[];const s=[2,1,3,4];return this.getClient.pays.slice().sort((e,a)=>s.indexOf(e.id)-s.indexOf(a.id))}},methods:{initForm(){this.form={}},initFilters(){this.filters={},this.originalFilters={...this.filters}},toggleFilters(){this.isFiltersVisible=!this.isFiltersVisible},reload(){this.getTables(),this.getRecords()},viewButtonCancel(s){return s.order_state_id!=4||s.order_state_id==1},viewButtonPay(s){return s.order_state_id==1||s.order_state_id==3},getClassState(s){switch(s){case 1:return"badge badge-warning";case 2:return"badge badge-success";case 3:return"badge badge-danger";case 4:return"badge badge-dark"}},getClassStatePay(s){switch(s){case 1:return"var(--warning)";case 2:return"var(--success)";case 3:return"var(--danger)";case 4:return"var(--muted)"}},getTextClassPay(s){switch(s){case 1:return"text-warning";case 2:return"text-success";case 3:return"text-danger";case 4:return"text-secondary"}},async getTables(){await this.$http.get(`/${this.resource}/tables`).then(s=>{this.clients=s.data.clients,this.clientPlans=s.data.clientPlans,this.status=s.data.status,this.check_active_cron=s.data.active_cron})},async getRecords(){await this.$http.get(`/${this.resource}/records`,{params:this.filters}).then(s=>{this.records=s.data.data.map(t=>(t.amount!==null&&t.amount!==void 0&&(t.amount=parseFloat(t.amount).toFixed(2)),t)),this.payments_records=s.data.pays})},actionsPaymentOrder(s,t){this.$http.get(`/${this.resource}/${s}/${t}`).then(e=>{e.data.success?(this.$message({message:e.data.message,type:"success"}),this.reload()):this.$message({message:e.data.message,type:"error"})})},updateTable(s){let t=this.records.find(a=>a.id===s),e={id:s,price:t.amount,date_of_due:t.due_date};this.$http.post(`/${this.resource}/updateTable`,e).then(a=>{a.data.success&&(this.$message({message:a.data.message,type:"success"}),this.reload())})},searchRemoteCustomers(s){s.length<3||this.$http.get("/clients/search",{params:{query:s}}).then(t=>{this.clients=t.data.clients})},getIconPay(s){switch(s){case 1:return`
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-clock-hour-4 icon-transparent"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 3.34a10 10 0 1 1 -15 8.66l.005 -.324a10 10 0 0 1 14.995 -8.336m-5 2.66a1 1 0 0 0 -1 1v5.026l.009 .105l.02 .107l.04 .129l.048 .102l.046 .078l.042 .06l.069 .08l.088 .083l.083 .062l3 2a1 1 0 1 0 1.11 -1.664l-2.555 -1.704v-4.464a1 1 0 0 0 -.883 -.993z" /></svg>`;case 2:return`
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-circle-check icon-transparent"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z" /></svg>`;case 3:return`
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-alert-triangle icon-transparent"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z" /></svg>`;case 4:return`
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-ban icon-transparent-ban"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M5.7 5.7l12.6 12.6" /></svg>`;default:return""}},formatDecimal(s){if(s.amount===""||s.amount===null||s.amount===void 0)return;const t=parseFloat(s.amount);isNaN(t)?s.amount="0.00":s.amount=t.toFixed(2)}}};var Ca=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"page-header"},[e("h2",[e("a",{attrs:{href:"/payment-orders"}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-credit-card",staticStyle:{"margin-top":"-3px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"}}),e("path",{attrs:{d:"M3 10l18 0"}}),e("path",{attrs:{d:"M7 15l.01 0"}}),e("path",{attrs:{d:"M11 15l2 0"}})])])]),t._m(0),e("div",{staticClass:"right-wrapper pull-right"},[e("button",{staticClass:"btn btn-custom btn-sm mt-2 me-2",attrs:{type:"button"},on:{click:function(a){t.showDialogOrder=!0}}},[e("i",{staticClass:"fa fa-plus-circle"}),t._v(" Nueva Orden")])])]),e("div",{staticClass:"col-md-12 container"},[e("div",{staticClass:"row"},[t._l(t.sortedPayments,function(a){return[e("div",{staticClass:"col-12 col-sm-6 col-lg-3"},[e("div",{staticClass:"status-container p-3 d-flex align-items-center justify-content-between",style:{backgroundColor:t.getClassStatePay(a.id)}},[e("div",[e("span",{staticClass:"status-price"},[t._v("S/ "+t._s(parseFloat(a.total).toFixed(2)))]),e("p",{staticClass:"m-0"},[t._v(t._s(a.name))])]),e("div",{domProps:{innerHTML:t._s(t.getIconPay(a.id))}})])])]})],2)]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body mx-2"},[e("div",{staticClass:"btn-filter-content mb-3 d-flex"},[e("el-button",{staticClass:"btn-show-filter",class:{shift:t.isFiltersVisible},attrs:{type:"secondary"},on:{click:t.toggleFilters}},[t._v(" "+t._s(t.isFiltersVisible?"Ocultar filtros":"Mostrar filtros")+" ")]),t.isFiltersVisible?e("el-button",{attrs:{type:"secondary",icon:"el-icon-search"},on:{click:function(a){return t.getRecords()}}},[t._v(" Aplicar filtros ")]):t._e(),t.filtersChanged?e("el-button",{attrs:{type:"secondary",icon:"el-icon-refresh"},on:{click:function(a){t.initFilters(),t.getRecords()}}},[t._v(" Limpiar filtros ")]):t._e()],1),t.isFiltersVisible?e("div",{staticClass:"filter-section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label"},[t._v("Buscar cliente")]),e("el-select",{attrs:{filterable:"",remote:"","remote-method":t.searchRemoteCustomers},model:{value:t.filters.client_id,callback:function(a){t.$set(t.filters,"client_id",a)},expression:"filters.client_id"}},t._l(t.clients,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1)],1),e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label"},[t._v("Estado")]),e("el-select",{model:{value:t.filters.order_state_id,callback:function(a){t.$set(t.filters,"order_state_id",a)},expression:"filters.order_state_id"}},t._l(t.status,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}),1)],1),e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label"},[t._v("Fecha de inicio")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Fecha de inicio"},model:{value:t.filters.date_start,callback:function(a){t.$set(t.filters,"date_start",a)},expression:"filters.date_start"}})],1),e("div",{staticClass:"form-group col-lg-3 col-md-6 col-sm-12 mb-2"},[e("label",{staticClass:"control-label"},[t._v("Fecha de fin")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Fecha de fin"},model:{value:t.filters.date_end,callback:function(a){t.$set(t.filters,"date_end",a)},expression:"filters.date_end"}})],1)])]):t._e(),t.filters.client_id?e("div",{staticClass:"col-md-12 mt-3 card-filters-client"},[e("header",{staticClass:"card-filters-header p-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 text-center position-relative"},[e("strong",{staticClass:"client-name"},[t._v(" "+t._s(t.getClient.name)+" ("+t._s(t.getClient.number)+") ")]),e("div",{staticClass:"container-edit-delete d-flex"},[e("button",{staticClass:"btn btn-light btn-sm me-2 d-flex align-items-center justify-content-center",attrs:{type:"button",title:"Editar cliente"},on:{click:function(a){t.showDialogEditClient=!0}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-edit",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}}),e("path",{attrs:{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}}),e("path",{attrs:{d:"M16 5l3 3"}})])]),e("button",{staticClass:"btn btn-light btn-sm d-flex align-items-center justify-content-center",attrs:{type:"button",title:"Nueva orden"},on:{click:function(a){t.showDialogOrder=!0}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-plus",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 5l0 14"}}),e("path",{attrs:{d:"M5 12l14 0"}})])])])])]),e("div",{staticClass:"row mt-3 d-flex justify-content-center"},[t.getClient.client_name||t.getClient.contact_email?e("div",{staticClass:"col-md-4 text-center"},[e("span",[t._v(" "+t._s(t.getClient.client_name)+" ")]),e("br"),e("strong",{staticClass:"text-center"},[t._v(" "+t._s(t.getClient.contact_email)+" ")])]):t._e(),t.getClient.phone_ws?e("div",{staticClass:"col-md-4 text-center"},[e("span",[t._v(" WHATSAPP ")]),e("br"),e("strong",{staticClass:"text-center"},[t._v(" "+t._s(t.getClient.phone_ws)+" ")])]):t._e(),t.getClient.created_at||t.getClient.diff_time_creation?e("div",{staticClass:"col-md-4 text-center"},[e("span",[t._v(" CREADO "+t._s(t.getClient.created_at)+" ")]),e("br"),e("strong",{staticClass:"text-center"},[t._v(" "+t._s(t.getClient.diff_time_creation)+" ")])]):t._e()])]),e("article",[e("div",{staticClass:"col-md-12 container border-bottom-filters"},[e("div",{staticClass:"row row-cols-4"},[t._l(t.sortedClientPays,function(a){return[e("div",{staticClass:"col text-center p-3"},[e("span",{staticClass:"text-muted"},[t._v(" "+t._s(a.name)+" ")]),e("br"),e("strong",{staticClass:"text-center price-pay",class:t.getTextClassPay(a.id)},[t._v(" S/ "+t._s(parseFloat(a.total).toFixed(2))+" ")])])]})],2)]),e("div",{staticClass:"col-md-12 container"},[e("div",{staticClass:"row row-cols-5"},[e("div",{staticClass:"col text-center p-3"},[e("span",{staticClass:"text-muted"},[t._v(" PLAN ")]),e("br"),e("strong",{staticClass:"text-center price-pay"},[t._v(" "+t._s(t.getClient.plan.name)+" ")])]),e("div",{staticClass:"col text-center p-3"},[e("span",{staticClass:"text-muted"},[t._v(" PRECIO ")]),e("br"),e("strong",{staticClass:"text-center price-pay"},[t._v(" S/ "+t._s(parseFloat(t.getClient.plan.price).toFixed(2))+" ")])]),e("div",{staticClass:"col text-center p-3"},[e("span",{staticClass:"text-muted"},[t._v(" PERIODO ")]),e("br"),e("strong",{staticClass:"text-center price-pay"},[t._v(" "+t._s(t.getClient.plan.period)+" ")])]),e("div",{staticClass:"col text-center p-3"},[e("span",{staticClass:"text-muted"},[t._v(" SERVICIO ")]),e("br"),e("strong",{staticClass:"text-center price-pay",class:t.getClient.plan.active?"text-success":"text-danger"},[t._v(" "+t._s(t.getClient.plan.active?"Activo":"Inactivo")+" ")])]),e("div",{staticClass:"col text-center p-3"},[e("span",{staticClass:"text-muted"},[t._v(" Vence "+t._s(t.getClient.plan.date_of_ending)+" ")]),e("br"),e("strong",{staticClass:"text-center price-pay"},[t._v(" "+t._s(t.getClient.plan.diff_date_of_ending)+" ")])])])])])]):t._e(),e("div",{staticClass:"table-responsive mt-4"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.records,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"text-start fw-bold"},[e("span",[t._v(" #"+t._s(a.order)+" ")]),e("br"),a.created_by==="Manual"?[e("span",{staticClass:"text-center badge badge-info badge-pill"},[t._v(" "+t._s(a.created_by)+" ")])]:[e("span",{staticClass:"text-center badge badge-pill badge-secondary"},[t._v(" "+t._s(a.created_by)+" ")])]],2),e("td",{staticClass:"client-column"},[t._v(" "+t._s(a.client)+" "),e("br"),e("span",{staticClass:"description-text text-muted"},[t._v(" "+t._s(a.description)+" ")])]),e("td",{staticClass:"amount-column"},[e("el-input",{attrs:{disabled:a.order_state_id==4||a.order_state_id==2,size:"small",type:"number",step:"0.01",min:"0"},on:{blur:function(i){return t.formatDecimal(a)},change:function(i){return t.updateTable(a.id)}},model:{value:a.amount,callback:function(i){t.$set(a,"amount",i)},expression:"record.amount"}})],1),e("td",{staticClass:"datetime-column"},[e("el-date-picker",{attrs:{disabled:a.order_state_id==4||a.order_state_id==2,"value-format":"yyyy-MM-dd","default-time":"00:00:00",placeholder:"Elija la fecha de vencimiento de la orden"},on:{change:function(i){return t.updateTable(a.id)}},model:{value:a.due_date,callback:function(i){t.$set(a,"due_date",i)},expression:"record.due_date"}})],1),e("td",[e("span",{staticClass:"badge badge-pill text-center",class:[t.getClassState(a.order_state_id)]},[t._v(" "+t._s(a.order_state)+" ")]),e("br"),a.date_of_payment?e("span",{staticClass:"text-muted"},[t._v(" "+t._s(a.date_of_payment)+" ")]):t._e()]),e("td",{staticClass:"text-center"},[a.notifications>=1?e("span",{staticClass:"text-center badge badge-info badge-pill"},[t._v(" "+t._s(a.notifications)+" ")]):t._e(),e("br"),a.diff_notification?e("span",{staticClass:"text-muted"},[t._v(" "+t._s(a.diff_notification))]):t._e()]),e("td",{staticClass:"text-end"},[a.order_state_id==4||a.order_state_id==2?[t._m(2,!0)]:[e("el-dropdown",{attrs:{trigger:"click",size:"small"}},[e("el-button",{staticClass:"dropdown-trigger",attrs:{type:"text",size:"small"}},[e("i",{staticClass:"fas fa-ellipsis-v"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(i){return t.actionsPaymentOrder("notify",a.id)}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-mail me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"}}),e("path",{attrs:{d:"M3 7l9 6l9 -6"}})]),t._v(" Notificar ")]),t.viewButtonPay(a)?e("el-dropdown-item",{nativeOn:{click:function(i){return t.actionsPaymentOrder("pays",a.id)}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-cash me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M7 15h-3a1 1 0 0 1 -1 -1v-8a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v3"}}),e("path",{attrs:{d:"M7 9m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"}}),e("path",{attrs:{d:"M12 14a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}})]),t._v(" Pagar ")]):t._e(),t.viewButtonCancel(a)?e("el-dropdown-item",{nativeOn:{click:function(i){return t.actionsPaymentOrder("cancel",a.id)}}},[e("svg",{staticClass:"icon icon-tabler icons-tabler-outline icon-tabler-ban me-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}),e("path",{attrs:{d:"M5.7 5.7l12.6 12.6"}})]),t._v(" Anular ")]):t._e()],1)],1)]],2)])}),0)])])])]),e("create-order",{attrs:{showDialogOrder:t.showDialogOrder,clients:t.clients,resource:t.resource,recordId:t.getClient.id},on:{"update:showDialogOrder":function(a){t.showDialogOrder=a},"update:show-dialog-order":function(a){t.showDialogOrder=a},"refresh-records":function(a){return t.reload()}}}),e("edit-client",{attrs:{showDialogEditClient:t.showDialogEditClient,client:t.getClient},on:{"update:showDialogEditClient":function(a){t.showDialogEditClient=a},"update:show-dialog-edit-client":function(a){t.showDialogEditClient=a},"refresh-records":function(a){return t.reload()}}})],1)},ya=[function(){var s=this,t=s._self._c;return t("ol",{staticClass:"breadcrumbs"},[t("li",{staticClass:"active"},[t("span",[s._v("Administración de pagos")])])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-start"},[s._v(" ID de orden ")]),t("th",{staticClass:"client-column"},[s._v(" Cliente ")]),t("th",{staticClass:"amount-column"},[s._v(" Monto ")]),t("th",{staticClass:"datetime-column"},[s._v(" Fecha de vencimiento ")]),t("th",[s._v(" Estado ")]),t("th",{staticClass:"text-center"},[s._v(" Notificaciones ")]),t("th",{staticClass:"text-end"},[s._v(" Acciones ")])])])},function(){var s=this,t=s._self._c;return t("span",{staticClass:"text-muted small d-inline-flex align-items-center text-center"},[s._v(" Sin"),t("br"),s._v(" acciones ")])}],ka=o(ba,Ca,ya,!1,null,"25034909",null,null);const wa=ka.exports;k.use(w);f.Select.computed.readonly=function(){const s=!this.$isServer&&!Number.isNaN(Number(document.documentMode));return!(this.filterable||this.multiple||!s)&&!this.visible};l.use(f,{size:"small"});l.prototype.$eventHub=new l;l.component("system-support-configuration",I);l.component("system-clients-index",gt);l.component("system-qrapi-configuration",T);l.component("system-clients-form",wt);l.component("system-users-form",St);l.component("system-users-token-user",At);l.component("system-certificate-index",jt);l.component("system-companies-form",Qt);l.component("system-accounting-index",ie);l.component("system-multi-users-index",pe);l.component("system-massive-invoice-index",be);l.component("system-update",xe);l.component("system-backup",Fe);l.component("system-configuration-culqi",Le);l.component("system-configuration-apk-url",qe);l.component("system-configuration-token",He);l.component("system-php-configuration",Ze);l.component("system-server-status",ns);l.component("system-login-settings",gs);l.component("system-login-other-configuration",ws);l.component("system-email-configuration",Ss);l.component("system-report-login-lockout-index",Us);l.component("system-user-not-change-password-index",Qs);l.component("system-plans-index",aa);l.component("system-plans-form",v);l.component("x-input-service",x);l.component("system-payments-index",wa);l.component("system-cron-order-configuration",na);l.use($);l.mixin({filters:{toDecimals(s,t=2){return Number(s).toFixed(t)},DecimalText:function(s,t=2){return isNaN(parseFloat(s))?s:Number(s).toFixed(t)},toDate(s){return s?m(s).format("DD/MM/YYYY"):""},toTime(s){return s?s.length===5?m(s+":00","HH:mm:ss").format("HH:mm:ss"):m(s,"HH:mm:ss").format("HH:mm:ss"):""},pad(s,t="",e=3){return s&&String(s).padStart(e,t)}},methods:{axiosError(s){const t=s.response,e=t.status;e===422&&(this.errors=t.data),e===500&&this.$message({type:"info",message:t.data.message})},getResponseValidations(s=!0,t=null){return{success:s,message:t}},generalSleep(s){return new Promise(t=>setTimeout(t,s))}}});new l({store:D,el:"#main-wrapper"});
